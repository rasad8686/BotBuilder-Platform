# SCIM 2.0 User Provisioning API Documentation

paths:
  /scim/v2/Users:
    get:
      tags:
        - SCIM
      summary: List users
      description: List users via SCIM protocol
      security:
        - bearerAuth: []
      parameters:
        - name: filter
          in: query
          schema:
            type: string
          description: SCIM filter expression
          example: userName eq "john@example.com"
        - name: startIndex
          in: query
          schema:
            type: integer
            default: 1
        - name: count
          in: query
          schema:
            type: integer
            default: 100
      responses:
        '200':
          description: SCIM ListResponse
          content:
            application/scim+json:
              schema:
                type: object
                properties:
                  schemas:
                    type: array
                    items:
                      type: string
                  totalResults:
                    type: integer
                  startIndex:
                    type: integer
                  itemsPerPage:
                    type: integer
                  Resources:
                    type: array
                    items:
                      $ref: '#/components/schemas/ScimUser'
        '401':
          $ref: '#/components/responses/UnauthorizedError'

    post:
      tags:
        - SCIM
      summary: Create user
      description: Create a new user via SCIM
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/scim+json:
            schema:
              $ref: '#/components/schemas/ScimUser'
      responses:
        '201':
          description: User created
          content:
            application/scim+json:
              schema:
                $ref: '#/components/schemas/ScimUser'
        '400':
          description: Invalid request
        '409':
          description: User already exists

  /scim/v2/Users/{id}:
    get:
      tags:
        - SCIM
      summary: Get user by ID
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: SCIM User
          content:
            application/scim+json:
              schema:
                $ref: '#/components/schemas/ScimUser'
        '404':
          description: User not found

    put:
      tags:
        - SCIM
      summary: Replace user
      description: Replace an existing user
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/scim+json:
            schema:
              $ref: '#/components/schemas/ScimUser'
      responses:
        '200':
          description: User replaced
        '404':
          description: User not found

    patch:
      tags:
        - SCIM
      summary: Update user
      description: Partially update a user
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/scim+json:
            schema:
              type: object
              properties:
                schemas:
                  type: array
                  items:
                    type: string
                Operations:
                  type: array
                  items:
                    type: object
                    properties:
                      op:
                        type: string
                        enum: [add, replace, remove]
                      path:
                        type: string
                      value:
                        type: string
      responses:
        '200':
          description: User updated
        '404':
          description: User not found

    delete:
      tags:
        - SCIM
      summary: Delete user
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '204':
          description: User deleted
        '404':
          description: User not found

  /scim/v2/Groups:
    get:
      tags:
        - SCIM
      summary: List groups
      description: List groups via SCIM protocol
      security:
        - bearerAuth: []
      parameters:
        - name: filter
          in: query
          schema:
            type: string
        - name: startIndex
          in: query
          schema:
            type: integer
        - name: count
          in: query
          schema:
            type: integer
      responses:
        '200':
          description: SCIM Groups ListResponse
        '401':
          $ref: '#/components/responses/UnauthorizedError'

    post:
      tags:
        - SCIM
      summary: Create group
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/scim+json:
            schema:
              $ref: '#/components/schemas/ScimGroup'
      responses:
        '201':
          description: Group created

  /scim/v2/Groups/{id}:
    get:
      tags:
        - SCIM
      summary: Get group by ID
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: SCIM Group
        '404':
          description: Group not found

    patch:
      tags:
        - SCIM
      summary: Update group
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/scim+json:
            schema:
              type: object
      responses:
        '200':
          description: Group updated

    delete:
      tags:
        - SCIM
      summary: Delete group
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '204':
          description: Group deleted

components:
  schemas:
    ScimUser:
      type: object
      properties:
        schemas:
          type: array
          items:
            type: string
          example: ["urn:ietf:params:scim:schemas:core:2.0:User"]
        id:
          type: string
        externalId:
          type: string
        userName:
          type: string
          example: john@example.com
        name:
          type: object
          properties:
            givenName:
              type: string
            familyName:
              type: string
            formatted:
              type: string
        displayName:
          type: string
        emails:
          type: array
          items:
            type: object
            properties:
              value:
                type: string
              primary:
                type: boolean
              type:
                type: string
        active:
          type: boolean
        meta:
          type: object
          properties:
            resourceType:
              type: string
            created:
              type: string
              format: date-time
            lastModified:
              type: string
              format: date-time

    ScimGroup:
      type: object
      properties:
        schemas:
          type: array
          items:
            type: string
        id:
          type: string
        displayName:
          type: string
        members:
          type: array
          items:
            type: object
            properties:
              value:
                type: string
              display:
                type: string
