{"version":3,"file":"tours-sdk.js","sources":["../src/sdk/tours/utils/api.js","../src/sdk/tours/utils/storage.js","../src/sdk/tours/TourEngine.js","../src/sdk/tours/utils/positioning.js","../src/sdk/tours/components/Tooltip.js","../src/sdk/tours/components/Modal.js","../src/sdk/tours/components/Hotspot.js","../src/sdk/tours/components/Slideout.js","../src/sdk/tours/components/Overlay.js","../src/sdk/tours/components/ProgressBar.js","../src/sdk/tours/utils/dom.js","../src/sdk/tours/TourRenderer.js","../src/sdk/tours/utils/events.js","../src/sdk/tours/TourSDK.js","../src/sdk/tours/index.js"],"sourcesContent":["/**\n * API Utilities\n * Handles communication with the BotBuilder Tours API\n */\n\nlet API_URL = 'https://api.botbuilder.app';\nlet WORKSPACE_ID = null;\n\n/**\n * Initialize API configuration\n * @param {string} apiUrl - API base URL\n * @param {string} workspaceId - Workspace ID\n */\nexport function initApi(apiUrl, workspaceId) {\n  API_URL = apiUrl;\n  WORKSPACE_ID = workspaceId;\n}\n\n/**\n * Make an API request\n * @param {string} endpoint - API endpoint\n * @param {Object} options - Fetch options\n * @returns {Promise<Object>}\n */\nasync function request(endpoint, options = {}) {\n  const url = `${API_URL}${endpoint}`;\n\n  const defaultHeaders = {\n    'Content-Type': 'application/json',\n    'X-Workspace-ID': WORKSPACE_ID,\n  };\n\n  try {\n    const response = await fetch(url, {\n      ...options,\n      headers: {\n        ...defaultHeaders,\n        ...options.headers,\n      },\n    });\n\n    if (!response.ok) {\n      const errorData = await response.json().catch(() => ({}));\n      throw new Error(errorData.message || `HTTP ${response.status}`);\n    }\n\n    return await response.json();\n  } catch (error) {\n    console.error(`[TourSDK API] Request failed: ${endpoint}`, error);\n    throw error;\n  }\n}\n\n/**\n * Initialize session and fetch active tours\n * @param {string} workspaceId - Workspace ID\n * @param {Object} options - Options\n * @returns {Promise<Object>}\n */\nexport async function initSession(workspaceId, options = {}) {\n  const { visitorId, userId } = options;\n\n  return request('/api/public/tours/init', {\n    method: 'POST',\n    body: JSON.stringify({\n      workspaceId,\n      visitorId,\n      userId,\n      url: window.location.href,\n      referrer: document.referrer,\n      userAgent: navigator.userAgent,\n      timestamp: new Date().toISOString(),\n    }),\n  });\n}\n\n/**\n * Fetch active tours for a workspace\n * @param {string} workspaceId - Workspace ID\n * @param {Object} options - Options\n * @returns {Promise<Array>}\n */\nexport async function fetchActiveTours(workspaceId, options = {}) {\n  const { visitorId, userId } = options;\n\n  const params = new URLSearchParams({\n    workspaceId,\n    url: window.location.pathname,\n  });\n\n  if (visitorId) params.append('visitorId', visitorId);\n  if (userId) params.append('userId', userId);\n\n  const response = await request(`/api/public/tours?${params.toString()}`);\n  return response.tours || [];\n}\n\n/**\n * Fetch a specific tour\n * @param {string} tourId - Tour ID\n * @returns {Promise<Object>}\n */\nexport async function fetchTour(tourId) {\n  const response = await request(`/api/public/tours/${tourId}`);\n  return response.tour || response;\n}\n\n/**\n * Track an analytics event\n * @param {Object} eventData - Event data\n * @returns {Promise}\n */\nexport async function trackEvent(eventData) {\n  const payload = {\n    ...eventData,\n    workspaceId: WORKSPACE_ID,\n    timestamp: eventData.timestamp || new Date().toISOString(),\n    sessionId: getSessionId(),\n    pageUrl: window.location.href,\n    pageTitle: document.title,\n  };\n\n  // Use sendBeacon for reliability (especially on page unload)\n  if (navigator.sendBeacon) {\n    const blob = new Blob([JSON.stringify(payload)], { type: 'application/json' });\n    navigator.sendBeacon(`${API_URL}/api/public/tours/event`, blob);\n    return;\n  }\n\n  // Fallback to fetch\n  return request('/api/public/tours/event', {\n    method: 'POST',\n    body: JSON.stringify(payload),\n  });\n}\n\n/**\n * Sync progress with server\n * @param {Object} progressData - Progress data\n * @returns {Promise}\n */\nexport async function syncProgress(progressData) {\n  return request('/api/public/tours/progress', {\n    method: 'POST',\n    body: JSON.stringify({\n      ...progressData,\n      workspaceId: WORKSPACE_ID,\n    }),\n  });\n}\n\n/**\n * Get user progress from server\n * @param {string} tourId - Tour ID\n * @param {string} visitorId - Visitor ID\n * @returns {Promise<Object>}\n */\nexport async function fetchProgress(tourId, visitorId) {\n  const params = new URLSearchParams({\n    tourId,\n    visitorId,\n  });\n\n  return request(`/api/public/tours/progress?${params.toString()}`);\n}\n\n/**\n * Batch track multiple events\n * @param {Array} events - Array of event data\n * @returns {Promise}\n */\nexport async function batchTrackEvents(events) {\n  return request('/api/public/tours/events/batch', {\n    method: 'POST',\n    body: JSON.stringify({\n      events,\n      workspaceId: WORKSPACE_ID,\n    }),\n  });\n}\n\n/**\n * Report an error\n * @param {Object} errorData - Error data\n * @returns {Promise}\n */\nexport async function reportError(errorData) {\n  try {\n    return request('/api/public/tours/error', {\n      method: 'POST',\n      body: JSON.stringify({\n        ...errorData,\n        workspaceId: WORKSPACE_ID,\n        url: window.location.href,\n        userAgent: navigator.userAgent,\n        timestamp: new Date().toISOString(),\n      }),\n    });\n  } catch (error) {\n    // Silently fail - don't want error reporting to cause more errors\n    console.error('[TourSDK] Failed to report error:', error);\n  }\n}\n\n// Session management\n\nlet sessionId = null;\n\nfunction getSessionId() {\n  if (!sessionId) {\n    sessionId = `s_${Date.now().toString(36)}_${Math.random().toString(36).substring(2, 8)}`;\n  }\n  return sessionId;\n}\n\n/**\n * Event queue for offline support\n */\nconst eventQueue = [];\nlet isOnline = navigator.onLine;\n\n// Monitor online status\nif (typeof window !== 'undefined') {\n  window.addEventListener('online', () => {\n    isOnline = true;\n    flushEventQueue();\n  });\n\n  window.addEventListener('offline', () => {\n    isOnline = false;\n  });\n}\n\n/**\n * Queue an event for later sending\n * @param {Object} eventData\n */\nexport function queueEvent(eventData) {\n  eventQueue.push({\n    ...eventData,\n    queuedAt: new Date().toISOString(),\n  });\n\n  // Try to flush immediately if online\n  if (isOnline) {\n    flushEventQueue();\n  }\n}\n\n/**\n * Flush the event queue\n */\nasync function flushEventQueue() {\n  if (eventQueue.length === 0 || !isOnline) return;\n\n  const events = [...eventQueue];\n  eventQueue.length = 0;\n\n  try {\n    await batchTrackEvents(events);\n  } catch (error) {\n    // Re-queue failed events\n    eventQueue.push(...events);\n    console.error('[TourSDK] Failed to flush event queue:', error);\n  }\n}\n\n// Flush queue before page unload\nif (typeof window !== 'undefined') {\n  window.addEventListener('beforeunload', () => {\n    if (eventQueue.length > 0 && navigator.sendBeacon) {\n      const blob = new Blob(\n        [JSON.stringify({ events: eventQueue, workspaceId: WORKSPACE_ID })],\n        { type: 'application/json' }\n      );\n      navigator.sendBeacon(`${API_URL}/api/public/tours/events/batch`, blob);\n    }\n  });\n}\n","/**\n * Storage Utilities\n * Handles localStorage operations for visitor ID and progress\n */\n\nconst STORAGE_PREFIX = 'bbt_tours_';\nconst VISITOR_ID_KEY = `${STORAGE_PREFIX}visitor_id`;\nconst PROGRESS_KEY = `${STORAGE_PREFIX}progress_`;\nconst SESSION_KEY = `${STORAGE_PREFIX}session`;\n\n/**\n * Generate a unique visitor ID\n * @returns {string}\n */\nfunction generateVisitorId() {\n  const timestamp = Date.now().toString(36);\n  const randomPart = Math.random().toString(36).substring(2, 10);\n  return `v_${timestamp}_${randomPart}`;\n}\n\n/**\n * Get or generate visitor ID\n * @returns {string}\n */\nexport function getVisitorId() {\n  try {\n    let visitorId = localStorage.getItem(VISITOR_ID_KEY);\n\n    if (!visitorId) {\n      visitorId = generateVisitorId();\n      localStorage.setItem(VISITOR_ID_KEY, visitorId);\n    }\n\n    return visitorId;\n  } catch (error) {\n    // localStorage might be disabled\n    console.warn('[TourSDK] localStorage not available, using session visitor ID');\n    return generateVisitorId();\n  }\n}\n\n/**\n * Set visitor ID\n * @param {string} visitorId\n */\nexport function setVisitorId(visitorId) {\n  try {\n    localStorage.setItem(VISITOR_ID_KEY, visitorId);\n  } catch (error) {\n    console.warn('[TourSDK] Failed to save visitor ID');\n  }\n}\n\n/**\n * Get progress for a tour\n * @param {string} tourId\n * @returns {Object|null}\n */\nexport function getProgress(tourId) {\n  try {\n    const data = localStorage.getItem(`${PROGRESS_KEY}${tourId}`);\n    return data ? JSON.parse(data) : null;\n  } catch (error) {\n    console.warn('[TourSDK] Failed to get progress');\n    return null;\n  }\n}\n\n/**\n * Set progress for a tour\n * @param {string} tourId\n * @param {Object} data\n */\nexport function setProgress(tourId, data) {\n  try {\n    localStorage.setItem(`${PROGRESS_KEY}${tourId}`, JSON.stringify(data));\n  } catch (error) {\n    console.warn('[TourSDK] Failed to save progress');\n  }\n}\n\n/**\n * Clear progress for a tour\n * @param {string} tourId\n */\nexport function clearProgress(tourId) {\n  try {\n    localStorage.removeItem(`${PROGRESS_KEY}${tourId}`);\n  } catch (error) {\n    console.warn('[TourSDK] Failed to clear progress');\n  }\n}\n\n/**\n * Clear all tour progress\n */\nexport function clearAllProgress() {\n  try {\n    const keys = Object.keys(localStorage);\n    keys.forEach((key) => {\n      if (key.startsWith(PROGRESS_KEY)) {\n        localStorage.removeItem(key);\n      }\n    });\n  } catch (error) {\n    console.warn('[TourSDK] Failed to clear all progress');\n  }\n}\n\n/**\n * Get all tour progress\n * @returns {Object}\n */\nexport function getAllProgress() {\n  try {\n    const progress = {};\n    const keys = Object.keys(localStorage);\n\n    keys.forEach((key) => {\n      if (key.startsWith(PROGRESS_KEY)) {\n        const tourId = key.replace(PROGRESS_KEY, '');\n        const data = localStorage.getItem(key);\n        if (data) {\n          progress[tourId] = JSON.parse(data);\n        }\n      }\n    });\n\n    return progress;\n  } catch (error) {\n    console.warn('[TourSDK] Failed to get all progress');\n    return {};\n  }\n}\n\n/**\n * Get session data\n * @returns {Object}\n */\nexport function getSession() {\n  try {\n    const data = sessionStorage.getItem(SESSION_KEY);\n    return data ? JSON.parse(data) : {};\n  } catch (error) {\n    return {};\n  }\n}\n\n/**\n * Set session data\n * @param {Object} data\n */\nexport function setSession(data) {\n  try {\n    const existing = getSession();\n    sessionStorage.setItem(SESSION_KEY, JSON.stringify({ ...existing, ...data }));\n  } catch (error) {\n    console.warn('[TourSDK] Failed to save session data');\n  }\n}\n\n/**\n * Clear session data\n */\nexport function clearSession() {\n  try {\n    sessionStorage.removeItem(SESSION_KEY);\n  } catch (error) {\n    console.warn('[TourSDK] Failed to clear session');\n  }\n}\n\n/**\n * Check if a tour has been completed\n * @param {string} tourId\n * @returns {boolean}\n */\nexport function isTourCompleted(tourId) {\n  const progress = getProgress(tourId);\n  return progress?.status === 'completed';\n}\n\n/**\n * Check if a tour has been skipped\n * @param {string} tourId\n * @returns {boolean}\n */\nexport function isTourSkipped(tourId) {\n  const progress = getProgress(tourId);\n  return progress?.status === 'skipped';\n}\n\n/**\n * Get the current step for a tour\n * @param {string} tourId\n * @returns {number}\n */\nexport function getCurrentStep(tourId) {\n  const progress = getProgress(tourId);\n  return progress?.currentStep ?? 0;\n}\n\n/**\n * Mark a tour as seen (started at least once)\n * @param {string} tourId\n */\nexport function markTourAsSeen(tourId) {\n  const progress = getProgress(tourId) || {};\n  setProgress(tourId, {\n    ...progress,\n    seen: true,\n    seenAt: new Date().toISOString(),\n  });\n}\n\n/**\n * Check if a tour has been seen\n * @param {string} tourId\n * @returns {boolean}\n */\nexport function hasTourBeenSeen(tourId) {\n  const progress = getProgress(tourId);\n  return !!progress?.seen;\n}\n\n/**\n * Store dismissed tours for the session\n * @param {string} tourId\n */\nexport function dismissTourForSession(tourId) {\n  const session = getSession();\n  const dismissed = session.dismissed || [];\n\n  if (!dismissed.includes(tourId)) {\n    dismissed.push(tourId);\n    setSession({ dismissed });\n  }\n}\n\n/**\n * Check if a tour is dismissed for this session\n * @param {string} tourId\n * @returns {boolean}\n */\nexport function isTourDismissedForSession(tourId) {\n  const session = getSession();\n  return session.dismissed?.includes(tourId) || false;\n}\n\n/**\n * Get storage usage info\n * @returns {Object}\n */\nexport function getStorageInfo() {\n  try {\n    let totalSize = 0;\n    let tourDataSize = 0;\n\n    for (const key in localStorage) {\n      if (localStorage.hasOwnProperty(key)) {\n        const size = localStorage[key].length * 2; // UTF-16\n        totalSize += size;\n\n        if (key.startsWith(STORAGE_PREFIX)) {\n          tourDataSize += size;\n        }\n      }\n    }\n\n    return {\n      totalSize,\n      tourDataSize,\n      totalSizeKB: (totalSize / 1024).toFixed(2),\n      tourDataSizeKB: (tourDataSize / 1024).toFixed(2),\n    };\n  } catch (error) {\n    return { error: 'Unable to calculate storage info' };\n  }\n}\n","/**\n * TourEngine - Handles tour logic, targeting, and API communication\n */\n\nimport { fetchActiveTours, fetchTour, trackEvent as apiTrackEvent, syncProgress } from './utils/api';\nimport { getProgress, setProgress } from './utils/storage';\n\nexport class TourEngine {\n  constructor(sdk) {\n    this.sdk = sdk;\n    this.toursCache = new Map();\n    this.activeToursCache = null;\n    this.lastFetch = 0;\n    this.cacheDuration = 5 * 60 * 1000; // 5 minutes\n  }\n\n  /**\n   * Load all active tours for the workspace\n   */\n  async loadActiveTours() {\n    const now = Date.now();\n\n    // Use cache if valid\n    if (this.activeToursCache && now - this.lastFetch < this.cacheDuration) {\n      return this.activeToursCache;\n    }\n\n    try {\n      const tours = await fetchActiveTours(this.sdk.config.workspaceId, {\n        visitorId: this.sdk.visitorId,\n        userId: this.sdk.userId,\n      });\n\n      this.activeToursCache = tours;\n      this.lastFetch = now;\n\n      // Cache individual tours\n      tours.forEach((tour) => {\n        this.toursCache.set(tour.id, tour);\n      });\n\n      return tours;\n    } catch (error) {\n      console.error('[TourEngine] Failed to load active tours:', error);\n      return [];\n    }\n  }\n\n  /**\n   * Load a specific tour by ID\n   * @param {string} tourId - Tour ID\n   */\n  async loadTour(tourId) {\n    // Check cache first\n    if (this.toursCache.has(tourId)) {\n      return this.toursCache.get(tourId);\n    }\n\n    try {\n      const tour = await fetchTour(tourId);\n      this.toursCache.set(tourId, tour);\n      return tour;\n    } catch (error) {\n      console.error(`[TourEngine] Failed to load tour ${tourId}:`, error);\n      return null;\n    }\n  }\n\n  /**\n   * Check if targeting rules match current context\n   * @param {Object} tour - Tour object\n   * @returns {boolean}\n   */\n  checkTargeting(tour) {\n    if (!tour.targeting || !tour.targeting.rules || tour.targeting.rules.length === 0) {\n      return true; // No targeting rules = show to everyone\n    }\n\n    const context = {\n      url: window.location.href,\n      pathname: window.location.pathname,\n      hostname: window.location.hostname,\n      search: window.location.search,\n      hash: window.location.hash,\n      referrer: document.referrer,\n      userId: this.sdk.userId,\n      visitorId: this.sdk.visitorId,\n      userTraits: this.sdk.userTraits,\n      device: this._getDeviceInfo(),\n      timestamp: Date.now(),\n    };\n\n    const { operator = 'AND', rules } = tour.targeting;\n\n    if (operator === 'AND') {\n      return rules.every((rule) => this._evaluateRule(rule, context));\n    } else if (operator === 'OR') {\n      return rules.some((rule) => this._evaluateRule(rule, context));\n    }\n\n    return true;\n  }\n\n  /**\n   * Determine if a tour should be shown\n   * @param {Object} tour - Tour object\n   * @param {Object} context - Current context\n   * @returns {boolean}\n   */\n  shouldShowTour(tour, context) {\n    // Check if tour is active\n    if (tour.status !== 'active') {\n      return false;\n    }\n\n    // Check date range\n    if (tour.startDate && new Date(tour.startDate) > new Date()) {\n      return false;\n    }\n    if (tour.endDate && new Date(tour.endDate) < new Date()) {\n      return false;\n    }\n\n    // Check frequency limits\n    const progress = this.getUserProgress(tour.id);\n    if (progress) {\n      // Already completed\n      if (progress.status === 'completed' && !tour.settings?.allowReplay) {\n        return false;\n      }\n\n      // Skipped and skip cooldown not passed\n      if (progress.status === 'skipped' && tour.settings?.skipCooldown) {\n        const cooldownEnd = new Date(progress.updatedAt).getTime() + tour.settings.skipCooldown;\n        if (Date.now() < cooldownEnd) {\n          return false;\n        }\n      }\n    }\n\n    // Check targeting rules\n    if (!this.checkTargeting(tour)) {\n      return false;\n    }\n\n    // Check page URL matching\n    if (tour.pageUrl) {\n      const currentUrl = window.location.pathname;\n      if (tour.pageUrlMatch === 'exact') {\n        if (currentUrl !== tour.pageUrl) return false;\n      } else if (tour.pageUrlMatch === 'contains') {\n        if (!currentUrl.includes(tour.pageUrl)) return false;\n      } else if (tour.pageUrlMatch === 'regex') {\n        try {\n          const regex = new RegExp(tour.pageUrl);\n          if (!regex.test(currentUrl)) return false;\n        } catch {\n          return false;\n        }\n      }\n    }\n\n    return true;\n  }\n\n  /**\n   * Track an analytics event\n   * @param {string} eventType - Event type\n   * @param {Object} data - Event data\n   */\n  async trackEvent(eventType, data) {\n    try {\n      await apiTrackEvent({\n        eventType,\n        ...data,\n        visitorId: this.sdk.visitorId,\n        userId: this.sdk.userId,\n        timestamp: new Date().toISOString(),\n        url: window.location.href,\n        userAgent: navigator.userAgent,\n      });\n    } catch (error) {\n      console.error('[TourEngine] Failed to track event:', error);\n    }\n  }\n\n  /**\n   * Get user progress for a tour\n   * @param {string} tourId - Tour ID\n   * @returns {Object|null}\n   */\n  getUserProgress(tourId) {\n    return getProgress(tourId);\n  }\n\n  /**\n   * Save user progress\n   * @param {string} tourId - Tour ID\n   * @param {number} currentStep - Current step index\n   * @param {string} status - Status: 'in_progress', 'completed', 'skipped'\n   */\n  async saveProgress(tourId, currentStep, status) {\n    const data = {\n      tourId,\n      currentStep,\n      status,\n      visitorId: this.sdk.visitorId,\n      userId: this.sdk.userId,\n      updatedAt: new Date().toISOString(),\n    };\n\n    // Save locally\n    setProgress(tourId, data);\n\n    // Sync with server\n    try {\n      await syncProgress(data);\n    } catch (error) {\n      console.error('[TourEngine] Failed to sync progress:', error);\n    }\n  }\n\n  /**\n   * Clear cache\n   */\n  clearCache() {\n    this.toursCache.clear();\n    this.activeToursCache = null;\n    this.lastFetch = 0;\n  }\n\n  // Private methods\n\n  _evaluateRule(rule, context) {\n    const { type, field, operator, value } = rule;\n\n    let fieldValue;\n\n    switch (type) {\n      case 'url':\n        fieldValue = this._getUrlField(field, context);\n        break;\n      case 'user':\n        fieldValue = this._getUserField(field, context);\n        break;\n      case 'device':\n        fieldValue = context.device[field];\n        break;\n      case 'custom':\n        fieldValue = context.userTraits[field];\n        break;\n      default:\n        return true;\n    }\n\n    return this._compareValues(fieldValue, operator, value);\n  }\n\n  _getUrlField(field, context) {\n    switch (field) {\n      case 'pathname':\n        return context.pathname;\n      case 'hostname':\n        return context.hostname;\n      case 'search':\n        return context.search;\n      case 'hash':\n        return context.hash;\n      case 'full':\n        return context.url;\n      case 'referrer':\n        return context.referrer;\n      default:\n        return context.url;\n    }\n  }\n\n  _getUserField(field, context) {\n    switch (field) {\n      case 'id':\n        return context.userId;\n      case 'visitorId':\n        return context.visitorId;\n      default:\n        return context.userTraits[field];\n    }\n  }\n\n  _compareValues(fieldValue, operator, targetValue) {\n    if (fieldValue === undefined || fieldValue === null) {\n      return operator === 'not_exists' || operator === 'is_empty';\n    }\n\n    const strValue = String(fieldValue).toLowerCase();\n    const strTarget = String(targetValue).toLowerCase();\n\n    switch (operator) {\n      case 'equals':\n        return strValue === strTarget;\n      case 'not_equals':\n        return strValue !== strTarget;\n      case 'contains':\n        return strValue.includes(strTarget);\n      case 'not_contains':\n        return !strValue.includes(strTarget);\n      case 'starts_with':\n        return strValue.startsWith(strTarget);\n      case 'ends_with':\n        return strValue.endsWith(strTarget);\n      case 'matches_regex':\n        try {\n          return new RegExp(targetValue, 'i').test(fieldValue);\n        } catch {\n          return false;\n        }\n      case 'greater_than':\n        return Number(fieldValue) > Number(targetValue);\n      case 'less_than':\n        return Number(fieldValue) < Number(targetValue);\n      case 'exists':\n        return fieldValue !== undefined && fieldValue !== null;\n      case 'not_exists':\n        return fieldValue === undefined || fieldValue === null;\n      case 'is_empty':\n        return strValue === '';\n      case 'is_not_empty':\n        return strValue !== '';\n      case 'in_list':\n        const list = Array.isArray(targetValue) ? targetValue : targetValue.split(',');\n        return list.map((v) => v.trim().toLowerCase()).includes(strValue);\n      case 'not_in_list':\n        const notList = Array.isArray(targetValue) ? targetValue : targetValue.split(',');\n        return !notList.map((v) => v.trim().toLowerCase()).includes(strValue);\n      default:\n        return true;\n    }\n  }\n\n  _getDeviceInfo() {\n    const ua = navigator.userAgent;\n\n    return {\n      type: this._getDeviceType(ua),\n      browser: this._getBrowser(ua),\n      os: this._getOS(ua),\n      screenWidth: window.screen.width,\n      screenHeight: window.screen.height,\n      language: navigator.language,\n    };\n  }\n\n  _getDeviceType(ua) {\n    if (/tablet|ipad|playbook|silk/i.test(ua)) {\n      return 'tablet';\n    }\n    if (/mobile|iphone|ipod|android|blackberry|opera mini|iemobile/i.test(ua)) {\n      return 'mobile';\n    }\n    return 'desktop';\n  }\n\n  _getBrowser(ua) {\n    if (/edge/i.test(ua)) return 'edge';\n    if (/chrome/i.test(ua)) return 'chrome';\n    if (/firefox/i.test(ua)) return 'firefox';\n    if (/safari/i.test(ua)) return 'safari';\n    if (/msie|trident/i.test(ua)) return 'ie';\n    return 'unknown';\n  }\n\n  _getOS(ua) {\n    if (/windows/i.test(ua)) return 'windows';\n    if (/macintosh|mac os x/i.test(ua)) return 'macos';\n    if (/linux/i.test(ua)) return 'linux';\n    if (/android/i.test(ua)) return 'android';\n    if (/ios|iphone|ipad|ipod/i.test(ua)) return 'ios';\n    return 'unknown';\n  }\n}\n","/**\n * Positioning Utilities\n * Handles tooltip/modal positioning and viewport adjustments\n */\n\nconst ARROW_SIZE = 8;\nconst SPACING = 12;\n\n/**\n * Calculate position for tooltip relative to target element\n * @param {DOMRect} targetRect - Target element bounding rect\n * @param {DOMRect} tooltipRect - Tooltip element bounding rect\n * @param {string} preferredPosition - Preferred position (top, bottom, left, right, auto)\n * @returns {Object} - { top, left, actualPosition }\n */\nexport function calculatePosition(targetRect, tooltipRect, preferredPosition = 'bottom') {\n  const positions = {\n    top: {\n      top: targetRect.top - tooltipRect.height - SPACING,\n      left: targetRect.left + targetRect.width / 2 - tooltipRect.width / 2,\n    },\n    bottom: {\n      top: targetRect.bottom + SPACING,\n      left: targetRect.left + targetRect.width / 2 - tooltipRect.width / 2,\n    },\n    left: {\n      top: targetRect.top + targetRect.height / 2 - tooltipRect.height / 2,\n      left: targetRect.left - tooltipRect.width - SPACING,\n    },\n    right: {\n      top: targetRect.top + targetRect.height / 2 - tooltipRect.height / 2,\n      left: targetRect.right + SPACING,\n    },\n  };\n\n  // Auto position - find best fit\n  if (preferredPosition === 'auto') {\n    const viewportWidth = window.innerWidth;\n    const viewportHeight = window.innerHeight;\n\n    // Check which positions fit in viewport\n    const fits = {\n      top: positions.top.top >= 0,\n      bottom: positions.bottom.top + tooltipRect.height <= viewportHeight,\n      left: positions.left.left >= 0,\n      right: positions.right.left + tooltipRect.width <= viewportWidth,\n    };\n\n    // Priority: bottom > top > right > left\n    if (fits.bottom) preferredPosition = 'bottom';\n    else if (fits.top) preferredPosition = 'top';\n    else if (fits.right) preferredPosition = 'right';\n    else if (fits.left) preferredPosition = 'left';\n    else preferredPosition = 'bottom'; // Default fallback\n  }\n\n  const position = positions[preferredPosition] || positions.bottom;\n\n  return {\n    top: position.top,\n    left: position.left,\n    actualPosition: preferredPosition,\n  };\n}\n\n/**\n * Adjust position to fit within viewport\n * @param {Object} position - { top, left }\n * @param {Object} dimensions - { width, height }\n * @returns {Object} - Adjusted { top, left }\n */\nexport function adjustForViewport(position, dimensions) {\n  const viewportWidth = window.innerWidth;\n  const viewportHeight = window.innerHeight;\n  const padding = 10; // Minimum distance from viewport edge\n\n  let { top, left } = position;\n  const { width, height } = dimensions;\n\n  // Horizontal adjustment\n  if (left < padding) {\n    left = padding;\n  } else if (left + width > viewportWidth - padding) {\n    left = viewportWidth - width - padding;\n  }\n\n  // Vertical adjustment\n  if (top < padding) {\n    top = padding;\n  } else if (top + height > viewportHeight - padding) {\n    top = viewportHeight - height - padding;\n  }\n\n  return { top, left };\n}\n\n/**\n * Get arrow position class based on tooltip position\n * @param {string} position - Tooltip position (top, bottom, left, right)\n * @returns {string} - Arrow position class\n */\nexport function getArrowPosition(position) {\n  // Arrow points opposite to tooltip position\n  const arrowPositions = {\n    top: 'bottom',\n    bottom: 'top',\n    left: 'right',\n    right: 'left',\n  };\n\n  return arrowPositions[position] || 'top';\n}\n\n/**\n * Calculate arrow offset for centered alignment\n * @param {DOMRect} targetRect - Target element rect\n * @param {DOMRect} tooltipRect - Tooltip element rect\n * @param {string} position - Tooltip position\n * @returns {Object} - { offset, direction }\n */\nexport function calculateArrowOffset(targetRect, tooltipRect, position) {\n  const tooltipCenter =\n    position === 'top' || position === 'bottom'\n      ? tooltipRect.left + tooltipRect.width / 2\n      : tooltipRect.top + tooltipRect.height / 2;\n\n  const targetCenter =\n    position === 'top' || position === 'bottom'\n      ? targetRect.left + targetRect.width / 2\n      : targetRect.top + targetRect.height / 2;\n\n  return {\n    offset: targetCenter - tooltipCenter,\n    direction: position === 'top' || position === 'bottom' ? 'horizontal' : 'vertical',\n  };\n}\n\n/**\n * Get optimal position based on available space\n * @param {DOMRect} targetRect - Target element rect\n * @param {Object} tooltipSize - { width, height }\n * @returns {string} - Best position\n */\nexport function getOptimalPosition(targetRect, tooltipSize) {\n  const viewportWidth = window.innerWidth;\n  const viewportHeight = window.innerHeight;\n\n  const spaceAbove = targetRect.top;\n  const spaceBelow = viewportHeight - targetRect.bottom;\n  const spaceLeft = targetRect.left;\n  const spaceRight = viewportWidth - targetRect.right;\n\n  const spaces = {\n    top: { space: spaceAbove, fits: spaceAbove >= tooltipSize.height + SPACING },\n    bottom: { space: spaceBelow, fits: spaceBelow >= tooltipSize.height + SPACING },\n    left: { space: spaceLeft, fits: spaceLeft >= tooltipSize.width + SPACING },\n    right: { space: spaceRight, fits: spaceRight >= tooltipSize.width + SPACING },\n  };\n\n  // Find positions that fit\n  const fittingPositions = Object.entries(spaces)\n    .filter(([, data]) => data.fits)\n    .sort(([, a], [, b]) => b.space - a.space);\n\n  if (fittingPositions.length > 0) {\n    return fittingPositions[0][0];\n  }\n\n  // If nothing fits perfectly, return position with most space\n  const allPositions = Object.entries(spaces).sort(([, a], [, b]) => b.space - a.space);\n\n  return allPositions[0][0];\n}\n\n/**\n * Calculate position for modal dialog\n * @param {Object} modalSize - { width, height }\n * @param {string} alignment - 'center', 'top', 'bottom'\n * @returns {Object} - { top, left }\n */\nexport function calculateModalPosition(modalSize, alignment = 'center') {\n  const viewportWidth = window.innerWidth;\n  const viewportHeight = window.innerHeight;\n\n  const left = (viewportWidth - modalSize.width) / 2;\n\n  let top;\n  switch (alignment) {\n    case 'top':\n      top = 60;\n      break;\n    case 'bottom':\n      top = viewportHeight - modalSize.height - 60;\n      break;\n    case 'center':\n    default:\n      top = (viewportHeight - modalSize.height) / 2;\n      break;\n  }\n\n  return { top, left };\n}\n\n/**\n * Calculate position for slideout panel\n * @param {number} width - Panel width\n * @param {string} side - 'left' or 'right'\n * @returns {Object} - CSS properties\n */\nexport function calculateSlideoutPosition(width, side = 'right') {\n  return {\n    top: 0,\n    bottom: 0,\n    [side]: 0,\n    width: `${width}px`,\n    [side === 'right' ? 'left' : 'right']: 'auto',\n  };\n}\n\n/**\n * Check if position would cause overflow\n * @param {Object} position - { top, left }\n * @param {Object} dimensions - { width, height }\n * @returns {Object} - { overflowTop, overflowRight, overflowBottom, overflowLeft }\n */\nexport function checkOverflow(position, dimensions) {\n  const viewportWidth = window.innerWidth;\n  const viewportHeight = window.innerHeight;\n\n  return {\n    overflowTop: position.top < 0,\n    overflowRight: position.left + dimensions.width > viewportWidth,\n    overflowBottom: position.top + dimensions.height > viewportHeight,\n    overflowLeft: position.left < 0,\n  };\n}\n\n/**\n * Get centered position in viewport\n * @param {Object} dimensions - { width, height }\n * @returns {Object} - { top, left }\n */\nexport function getCenteredPosition(dimensions) {\n  const viewportWidth = window.innerWidth;\n  const viewportHeight = window.innerHeight;\n\n  return {\n    top: (viewportHeight - dimensions.height) / 2,\n    left: (viewportWidth - dimensions.width) / 2,\n  };\n}\n","/**\n * Tooltip Component\n * Displays a tooltip attached to a target element\n */\n\nimport { calculatePosition, adjustForViewport, getArrowPosition } from '../utils/positioning';\n\nexport class Tooltip {\n  constructor(options) {\n    this.options = {\n      title: '',\n      content: '',\n      position: 'bottom', // top, bottom, left, right, auto\n      targetElement: null,\n      media: null, // { type: 'image'|'video', src: '...', alt: '...' }\n      buttons: null, // Custom buttons\n      stepIndex: 0,\n      totalSteps: 1,\n      showBackButton: false,\n      showSkipButton: true,\n      onNext: () => {},\n      onPrev: () => {},\n      onSkip: () => {},\n      onClose: () => {},\n      theme: 'light',\n      primaryColor: null,\n      ...options,\n    };\n\n    this.element = null;\n    this.arrowElement = null;\n    this._resizeHandler = null;\n    this._scrollHandler = null;\n  }\n\n  render(container) {\n    this._createTooltip();\n    container.appendChild(this.element);\n    this._positionTooltip();\n    this._setupListeners();\n    this._animateIn();\n  }\n\n  destroy() {\n    this._removeListeners();\n\n    if (this.element && this.element.parentNode) {\n      this.element.classList.add('bbt-tooltip--exit');\n      setTimeout(() => {\n        if (this.element && this.element.parentNode) {\n          this.element.parentNode.removeChild(this.element);\n        }\n      }, 200);\n    }\n\n    this.element = null;\n    this.arrowElement = null;\n  }\n\n  _createTooltip() {\n    const {\n      title,\n      content,\n      media,\n      buttons,\n      stepIndex,\n      totalSteps,\n      showBackButton,\n      showSkipButton,\n      theme,\n      primaryColor,\n    } = this.options;\n\n    this.element = document.createElement('div');\n    this.element.className = `bbt-tooltip bbt-tooltip--${theme}`;\n\n    if (primaryColor) {\n      this.element.style.setProperty('--bbt-primary-color', primaryColor);\n    }\n\n    // Arrow\n    this.arrowElement = document.createElement('div');\n    this.arrowElement.className = 'bbt-tooltip__arrow';\n    this.element.appendChild(this.arrowElement);\n\n    // Content wrapper\n    const wrapper = document.createElement('div');\n    wrapper.className = 'bbt-tooltip__wrapper';\n\n    // Close button\n    const closeBtn = document.createElement('button');\n    closeBtn.className = 'bbt-tooltip__close';\n    closeBtn.innerHTML = '&times;';\n    closeBtn.setAttribute('aria-label', 'Close');\n    closeBtn.onclick = (e) => {\n      e.preventDefault();\n      this.options.onClose();\n    };\n    wrapper.appendChild(closeBtn);\n\n    // Media\n    if (media) {\n      const mediaEl = this._createMedia(media);\n      wrapper.appendChild(mediaEl);\n    }\n\n    // Header with title\n    if (title) {\n      const header = document.createElement('div');\n      header.className = 'bbt-tooltip__header';\n\n      const titleEl = document.createElement('h4');\n      titleEl.className = 'bbt-tooltip__title';\n      titleEl.textContent = title;\n      header.appendChild(titleEl);\n\n      wrapper.appendChild(header);\n    }\n\n    // Content\n    if (content) {\n      const contentEl = document.createElement('div');\n      contentEl.className = 'bbt-tooltip__content';\n      contentEl.innerHTML = content;\n      wrapper.appendChild(contentEl);\n    }\n\n    // Footer with actions\n    const footer = document.createElement('div');\n    footer.className = 'bbt-tooltip__footer';\n\n    // Progress indicator\n    if (totalSteps > 1) {\n      const progress = document.createElement('span');\n      progress.className = 'bbt-tooltip__progress';\n      progress.textContent = `${stepIndex + 1} / ${totalSteps}`;\n      footer.appendChild(progress);\n    }\n\n    // Actions\n    const actions = document.createElement('div');\n    actions.className = 'bbt-tooltip__actions';\n\n    if (buttons) {\n      // Custom buttons\n      buttons.forEach((btn) => {\n        const button = document.createElement('button');\n        button.className = `bbt-btn bbt-btn--${btn.variant || 'secondary'}`;\n        button.textContent = btn.text;\n        button.onclick = (e) => {\n          e.preventDefault();\n          if (btn.action === 'next') this.options.onNext();\n          else if (btn.action === 'prev') this.options.onPrev();\n          else if (btn.action === 'skip') this.options.onSkip();\n          else if (btn.action === 'close') this.options.onClose();\n          else if (btn.onClick) btn.onClick();\n        };\n        actions.appendChild(button);\n      });\n    } else {\n      // Default buttons\n      if (showSkipButton && stepIndex < totalSteps - 1) {\n        const skipBtn = document.createElement('button');\n        skipBtn.className = 'bbt-btn bbt-btn--text';\n        skipBtn.textContent = 'Skip';\n        skipBtn.onclick = (e) => {\n          e.preventDefault();\n          this.options.onSkip();\n        };\n        actions.appendChild(skipBtn);\n      }\n\n      if (showBackButton) {\n        const backBtn = document.createElement('button');\n        backBtn.className = 'bbt-btn bbt-btn--secondary';\n        backBtn.textContent = 'Back';\n        backBtn.onclick = (e) => {\n          e.preventDefault();\n          this.options.onPrev();\n        };\n        actions.appendChild(backBtn);\n      }\n\n      const nextBtn = document.createElement('button');\n      nextBtn.className = 'bbt-btn bbt-btn--primary';\n      nextBtn.textContent = stepIndex >= totalSteps - 1 ? 'Done' : 'Next';\n      nextBtn.onclick = (e) => {\n        e.preventDefault();\n        this.options.onNext();\n      };\n      actions.appendChild(nextBtn);\n    }\n\n    footer.appendChild(actions);\n    wrapper.appendChild(footer);\n    this.element.appendChild(wrapper);\n  }\n\n  _createMedia(media) {\n    const container = document.createElement('div');\n    container.className = 'bbt-tooltip__media';\n\n    if (media.type === 'image') {\n      const img = document.createElement('img');\n      img.src = media.src;\n      img.alt = media.alt || '';\n      img.className = 'bbt-tooltip__image';\n      container.appendChild(img);\n    } else if (media.type === 'video') {\n      const video = document.createElement('video');\n      video.src = media.src;\n      video.controls = true;\n      video.autoplay = media.autoplay || false;\n      video.muted = media.muted || true;\n      video.loop = media.loop || false;\n      video.className = 'bbt-tooltip__video';\n      container.appendChild(video);\n    } else if (media.type === 'embed') {\n      const iframe = document.createElement('iframe');\n      iframe.src = media.src;\n      iframe.className = 'bbt-tooltip__embed';\n      iframe.allowFullscreen = true;\n      container.appendChild(iframe);\n    }\n\n    return container;\n  }\n\n  _positionTooltip() {\n    const { targetElement, position } = this.options;\n\n    if (!targetElement) {\n      // Center in viewport if no target\n      this.element.style.position = 'fixed';\n      this.element.style.top = '50%';\n      this.element.style.left = '50%';\n      this.element.style.transform = 'translate(-50%, -50%)';\n      this.arrowElement.style.display = 'none';\n      return;\n    }\n\n    const targetRect = targetElement.getBoundingClientRect();\n    const tooltipRect = this.element.getBoundingClientRect();\n\n    const { top, left, actualPosition } = calculatePosition(\n      targetRect,\n      tooltipRect,\n      position\n    );\n\n    const adjusted = adjustForViewport(\n      { top, left },\n      { width: tooltipRect.width, height: tooltipRect.height }\n    );\n\n    this.element.style.position = 'fixed';\n    this.element.style.top = `${adjusted.top}px`;\n    this.element.style.left = `${adjusted.left}px`;\n\n    // Position arrow\n    const arrowPosition = getArrowPosition(actualPosition);\n    this.arrowElement.className = `bbt-tooltip__arrow bbt-tooltip__arrow--${arrowPosition}`;\n  }\n\n  _setupListeners() {\n    // Reposition on resize and scroll\n    this._resizeHandler = () => this._positionTooltip();\n    this._scrollHandler = () => this._positionTooltip();\n\n    window.addEventListener('resize', this._resizeHandler);\n    window.addEventListener('scroll', this._scrollHandler, true);\n\n    // Keyboard navigation\n    this._keyHandler = (e) => {\n      if (e.key === 'Escape') {\n        this.options.onClose();\n      } else if (e.key === 'ArrowRight' || e.key === 'Enter') {\n        this.options.onNext();\n      } else if (e.key === 'ArrowLeft') {\n        this.options.onPrev();\n      }\n    };\n    document.addEventListener('keydown', this._keyHandler);\n  }\n\n  _removeListeners() {\n    if (this._resizeHandler) {\n      window.removeEventListener('resize', this._resizeHandler);\n    }\n    if (this._scrollHandler) {\n      window.removeEventListener('scroll', this._scrollHandler, true);\n    }\n    if (this._keyHandler) {\n      document.removeEventListener('keydown', this._keyHandler);\n    }\n  }\n\n  _animateIn() {\n    requestAnimationFrame(() => {\n      this.element.classList.add('bbt-tooltip--enter');\n    });\n  }\n}\n","/**\n * Modal Component\n * Displays a centered modal dialog\n */\n\nexport class Modal {\n  constructor(options) {\n    this.options = {\n      title: '',\n      content: '',\n      size: 'medium', // small, medium, large\n      media: null,\n      buttons: null,\n      stepIndex: 0,\n      totalSteps: 1,\n      showBackButton: false,\n      showSkipButton: true,\n      onNext: () => {},\n      onPrev: () => {},\n      onSkip: () => {},\n      onClose: () => {},\n      theme: 'light',\n      primaryColor: null,\n      closeOnBackdrop: true,\n      closeOnEscape: true,\n      ...options,\n    };\n\n    this.element = null;\n    this.backdropElement = null;\n    this._keyHandler = null;\n  }\n\n  render(container) {\n    this._createBackdrop();\n    this._createModal();\n\n    container.appendChild(this.backdropElement);\n    container.appendChild(this.element);\n\n    this._setupListeners();\n    this._animateIn();\n\n    // Focus trap\n    this.element.focus();\n  }\n\n  destroy() {\n    this._removeListeners();\n\n    if (this.element) {\n      this.element.classList.add('bbt-modal--exit');\n    }\n    if (this.backdropElement) {\n      this.backdropElement.classList.add('bbt-modal-backdrop--exit');\n    }\n\n    setTimeout(() => {\n      if (this.element && this.element.parentNode) {\n        this.element.parentNode.removeChild(this.element);\n      }\n      if (this.backdropElement && this.backdropElement.parentNode) {\n        this.backdropElement.parentNode.removeChild(this.backdropElement);\n      }\n    }, 200);\n\n    this.element = null;\n    this.backdropElement = null;\n  }\n\n  _createBackdrop() {\n    this.backdropElement = document.createElement('div');\n    this.backdropElement.className = `bbt-modal-backdrop bbt-modal-backdrop--${this.options.theme}`;\n\n    if (this.options.closeOnBackdrop) {\n      this.backdropElement.onclick = (e) => {\n        if (e.target === this.backdropElement) {\n          this.options.onClose();\n        }\n      };\n    }\n  }\n\n  _createModal() {\n    const {\n      title,\n      content,\n      size,\n      media,\n      buttons,\n      stepIndex,\n      totalSteps,\n      showBackButton,\n      showSkipButton,\n      theme,\n      primaryColor,\n    } = this.options;\n\n    this.element = document.createElement('div');\n    this.element.className = `bbt-modal bbt-modal--${size} bbt-modal--${theme}`;\n    this.element.setAttribute('role', 'dialog');\n    this.element.setAttribute('aria-modal', 'true');\n    this.element.setAttribute('tabindex', '-1');\n\n    if (primaryColor) {\n      this.element.style.setProperty('--bbt-primary-color', primaryColor);\n    }\n\n    // Close button\n    const closeBtn = document.createElement('button');\n    closeBtn.className = 'bbt-modal__close';\n    closeBtn.innerHTML = '&times;';\n    closeBtn.setAttribute('aria-label', 'Close');\n    closeBtn.onclick = (e) => {\n      e.preventDefault();\n      this.options.onClose();\n    };\n    this.element.appendChild(closeBtn);\n\n    // Media\n    if (media) {\n      const mediaEl = this._createMedia(media);\n      this.element.appendChild(mediaEl);\n    }\n\n    // Header\n    if (title) {\n      const header = document.createElement('div');\n      header.className = 'bbt-modal__header';\n\n      const titleEl = document.createElement('h3');\n      titleEl.className = 'bbt-modal__title';\n      titleEl.textContent = title;\n      header.appendChild(titleEl);\n\n      this.element.appendChild(header);\n    }\n\n    // Body\n    if (content) {\n      const body = document.createElement('div');\n      body.className = 'bbt-modal__body';\n      body.innerHTML = content;\n      this.element.appendChild(body);\n    }\n\n    // Footer\n    const footer = document.createElement('div');\n    footer.className = 'bbt-modal__footer';\n\n    // Progress\n    if (totalSteps > 1) {\n      const progress = document.createElement('div');\n      progress.className = 'bbt-modal__progress';\n\n      for (let i = 0; i < totalSteps; i++) {\n        const dot = document.createElement('span');\n        dot.className = `bbt-modal__progress-dot ${i === stepIndex ? 'bbt-modal__progress-dot--active' : ''} ${i < stepIndex ? 'bbt-modal__progress-dot--completed' : ''}`;\n        progress.appendChild(dot);\n      }\n\n      footer.appendChild(progress);\n    }\n\n    // Actions\n    const actions = document.createElement('div');\n    actions.className = 'bbt-modal__actions';\n\n    if (buttons) {\n      buttons.forEach((btn) => {\n        const button = document.createElement('button');\n        button.className = `bbt-btn bbt-btn--${btn.variant || 'secondary'}`;\n        button.textContent = btn.text;\n        button.onclick = (e) => {\n          e.preventDefault();\n          if (btn.action === 'next') this.options.onNext();\n          else if (btn.action === 'prev') this.options.onPrev();\n          else if (btn.action === 'skip') this.options.onSkip();\n          else if (btn.action === 'close') this.options.onClose();\n          else if (btn.onClick) btn.onClick();\n        };\n        actions.appendChild(button);\n      });\n    } else {\n      if (showSkipButton && stepIndex < totalSteps - 1) {\n        const skipBtn = document.createElement('button');\n        skipBtn.className = 'bbt-btn bbt-btn--text';\n        skipBtn.textContent = 'Skip tour';\n        skipBtn.onclick = (e) => {\n          e.preventDefault();\n          this.options.onSkip();\n        };\n        actions.appendChild(skipBtn);\n      }\n\n      if (showBackButton) {\n        const backBtn = document.createElement('button');\n        backBtn.className = 'bbt-btn bbt-btn--secondary';\n        backBtn.textContent = 'Back';\n        backBtn.onclick = (e) => {\n          e.preventDefault();\n          this.options.onPrev();\n        };\n        actions.appendChild(backBtn);\n      }\n\n      const nextBtn = document.createElement('button');\n      nextBtn.className = 'bbt-btn bbt-btn--primary';\n      nextBtn.textContent = stepIndex >= totalSteps - 1 ? 'Get Started' : 'Next';\n      nextBtn.onclick = (e) => {\n        e.preventDefault();\n        this.options.onNext();\n      };\n      actions.appendChild(nextBtn);\n    }\n\n    footer.appendChild(actions);\n    this.element.appendChild(footer);\n  }\n\n  _createMedia(media) {\n    const container = document.createElement('div');\n    container.className = 'bbt-modal__media';\n\n    if (media.type === 'image') {\n      const img = document.createElement('img');\n      img.src = media.src;\n      img.alt = media.alt || '';\n      img.className = 'bbt-modal__image';\n      container.appendChild(img);\n    } else if (media.type === 'video') {\n      const video = document.createElement('video');\n      video.src = media.src;\n      video.controls = true;\n      video.autoplay = media.autoplay || false;\n      video.muted = media.muted !== false;\n      video.loop = media.loop || false;\n      video.className = 'bbt-modal__video';\n      container.appendChild(video);\n    } else if (media.type === 'embed') {\n      const iframe = document.createElement('iframe');\n      iframe.src = media.src;\n      iframe.className = 'bbt-modal__embed';\n      iframe.allowFullscreen = true;\n      container.appendChild(iframe);\n    } else if (media.type === 'lottie') {\n      const lottieContainer = document.createElement('div');\n      lottieContainer.className = 'bbt-modal__lottie';\n      lottieContainer.setAttribute('data-lottie-src', media.src);\n      container.appendChild(lottieContainer);\n    }\n\n    return container;\n  }\n\n  _setupListeners() {\n    if (this.options.closeOnEscape) {\n      this._keyHandler = (e) => {\n        if (e.key === 'Escape') {\n          this.options.onClose();\n        } else if (e.key === 'ArrowRight' || e.key === 'Enter') {\n          this.options.onNext();\n        } else if (e.key === 'ArrowLeft') {\n          this.options.onPrev();\n        }\n      };\n      document.addEventListener('keydown', this._keyHandler);\n    }\n  }\n\n  _removeListeners() {\n    if (this._keyHandler) {\n      document.removeEventListener('keydown', this._keyHandler);\n    }\n  }\n\n  _animateIn() {\n    requestAnimationFrame(() => {\n      this.backdropElement.classList.add('bbt-modal-backdrop--enter');\n      this.element.classList.add('bbt-modal--enter');\n    });\n  }\n}\n","/**\n * Hotspot Component\n * Displays a pulsing dot that reveals a tooltip on click/hover\n */\n\nimport { calculatePosition, adjustForViewport, getArrowPosition } from '../utils/positioning';\n\nexport class Hotspot {\n  constructor(options) {\n    this.options = {\n      targetElement: null,\n      title: '',\n      content: '',\n      position: 'right', // top, bottom, left, right\n      color: null, // Custom color\n      pulse: true,\n      triggerOn: 'click', // click, hover\n      stepIndex: 0,\n      totalSteps: 1,\n      showBackButton: false,\n      showSkipButton: true,\n      onNext: () => {},\n      onPrev: () => {},\n      onSkip: () => {},\n      onClose: () => {},\n      theme: 'light',\n      primaryColor: null,\n      ...options,\n    };\n\n    this.hotspotElement = null;\n    this.tooltipElement = null;\n    this.isTooltipVisible = false;\n    this._resizeHandler = null;\n    this._scrollHandler = null;\n  }\n\n  render(container) {\n    this._createHotspot();\n    this._createTooltip();\n\n    container.appendChild(this.hotspotElement);\n    container.appendChild(this.tooltipElement);\n\n    this._positionHotspot();\n    this._setupListeners();\n    this._animateIn();\n  }\n\n  destroy() {\n    this._removeListeners();\n\n    if (this.hotspotElement) {\n      this.hotspotElement.classList.add('bbt-hotspot--exit');\n    }\n    if (this.tooltipElement) {\n      this.tooltipElement.classList.add('bbt-hotspot-tooltip--exit');\n    }\n\n    setTimeout(() => {\n      if (this.hotspotElement && this.hotspotElement.parentNode) {\n        this.hotspotElement.parentNode.removeChild(this.hotspotElement);\n      }\n      if (this.tooltipElement && this.tooltipElement.parentNode) {\n        this.tooltipElement.parentNode.removeChild(this.tooltipElement);\n      }\n    }, 200);\n\n    this.hotspotElement = null;\n    this.tooltipElement = null;\n  }\n\n  _createHotspot() {\n    const { color, pulse, theme, primaryColor } = this.options;\n\n    this.hotspotElement = document.createElement('div');\n    this.hotspotElement.className = `bbt-hotspot bbt-hotspot--${theme}`;\n\n    if (pulse) {\n      this.hotspotElement.classList.add('bbt-hotspot--pulse');\n    }\n\n    // Inner dot\n    const dot = document.createElement('div');\n    dot.className = 'bbt-hotspot__dot';\n\n    if (color || primaryColor) {\n      dot.style.backgroundColor = color || primaryColor;\n    }\n\n    // Pulse ring\n    const ring = document.createElement('div');\n    ring.className = 'bbt-hotspot__ring';\n\n    if (color || primaryColor) {\n      ring.style.borderColor = color || primaryColor;\n    }\n\n    this.hotspotElement.appendChild(dot);\n    this.hotspotElement.appendChild(ring);\n  }\n\n  _createTooltip() {\n    const {\n      title,\n      content,\n      stepIndex,\n      totalSteps,\n      showBackButton,\n      showSkipButton,\n      theme,\n      primaryColor,\n    } = this.options;\n\n    this.tooltipElement = document.createElement('div');\n    this.tooltipElement.className = `bbt-hotspot-tooltip bbt-hotspot-tooltip--${theme}`;\n    this.tooltipElement.style.display = 'none';\n\n    if (primaryColor) {\n      this.tooltipElement.style.setProperty('--bbt-primary-color', primaryColor);\n    }\n\n    // Arrow\n    const arrow = document.createElement('div');\n    arrow.className = 'bbt-hotspot-tooltip__arrow';\n    this.tooltipElement.appendChild(arrow);\n\n    // Close button\n    const closeBtn = document.createElement('button');\n    closeBtn.className = 'bbt-hotspot-tooltip__close';\n    closeBtn.innerHTML = '&times;';\n    closeBtn.onclick = (e) => {\n      e.preventDefault();\n      e.stopPropagation();\n      this.options.onClose();\n    };\n    this.tooltipElement.appendChild(closeBtn);\n\n    // Content wrapper\n    const wrapper = document.createElement('div');\n    wrapper.className = 'bbt-hotspot-tooltip__wrapper';\n\n    if (title) {\n      const titleEl = document.createElement('h4');\n      titleEl.className = 'bbt-hotspot-tooltip__title';\n      titleEl.textContent = title;\n      wrapper.appendChild(titleEl);\n    }\n\n    if (content) {\n      const contentEl = document.createElement('div');\n      contentEl.className = 'bbt-hotspot-tooltip__content';\n      contentEl.innerHTML = content;\n      wrapper.appendChild(contentEl);\n    }\n\n    // Footer\n    const footer = document.createElement('div');\n    footer.className = 'bbt-hotspot-tooltip__footer';\n\n    if (totalSteps > 1) {\n      const progress = document.createElement('span');\n      progress.className = 'bbt-hotspot-tooltip__progress';\n      progress.textContent = `${stepIndex + 1} / ${totalSteps}`;\n      footer.appendChild(progress);\n    }\n\n    const actions = document.createElement('div');\n    actions.className = 'bbt-hotspot-tooltip__actions';\n\n    if (showSkipButton && stepIndex < totalSteps - 1) {\n      const skipBtn = document.createElement('button');\n      skipBtn.className = 'bbt-btn bbt-btn--text bbt-btn--sm';\n      skipBtn.textContent = 'Skip';\n      skipBtn.onclick = (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        this.options.onSkip();\n      };\n      actions.appendChild(skipBtn);\n    }\n\n    if (showBackButton) {\n      const backBtn = document.createElement('button');\n      backBtn.className = 'bbt-btn bbt-btn--secondary bbt-btn--sm';\n      backBtn.textContent = 'Back';\n      backBtn.onclick = (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        this.options.onPrev();\n      };\n      actions.appendChild(backBtn);\n    }\n\n    const nextBtn = document.createElement('button');\n    nextBtn.className = 'bbt-btn bbt-btn--primary bbt-btn--sm';\n    nextBtn.textContent = stepIndex >= totalSteps - 1 ? 'Done' : 'Next';\n    nextBtn.onclick = (e) => {\n      e.preventDefault();\n      e.stopPropagation();\n      this.options.onNext();\n    };\n    actions.appendChild(nextBtn);\n\n    footer.appendChild(actions);\n    wrapper.appendChild(footer);\n    this.tooltipElement.appendChild(wrapper);\n  }\n\n  _positionHotspot() {\n    const { targetElement, position } = this.options;\n\n    if (!targetElement) return;\n\n    const targetRect = targetElement.getBoundingClientRect();\n\n    // Position hotspot relative to target element\n    let top, left;\n\n    switch (position) {\n      case 'top':\n        top = targetRect.top - 12;\n        left = targetRect.left + targetRect.width / 2;\n        break;\n      case 'bottom':\n        top = targetRect.bottom + 12;\n        left = targetRect.left + targetRect.width / 2;\n        break;\n      case 'left':\n        top = targetRect.top + targetRect.height / 2;\n        left = targetRect.left - 12;\n        break;\n      case 'right':\n      default:\n        top = targetRect.top + targetRect.height / 2;\n        left = targetRect.right + 12;\n        break;\n    }\n\n    this.hotspotElement.style.position = 'fixed';\n    this.hotspotElement.style.top = `${top}px`;\n    this.hotspotElement.style.left = `${left}px`;\n  }\n\n  _positionTooltip() {\n    if (!this.isTooltipVisible) return;\n\n    const hotspotRect = this.hotspotElement.getBoundingClientRect();\n    const tooltipRect = this.tooltipElement.getBoundingClientRect();\n\n    // Position tooltip relative to hotspot\n    const { top, left, actualPosition } = calculatePosition(\n      hotspotRect,\n      tooltipRect,\n      this.options.position === 'right' ? 'right' : 'bottom'\n    );\n\n    const adjusted = adjustForViewport(\n      { top, left },\n      { width: tooltipRect.width, height: tooltipRect.height }\n    );\n\n    this.tooltipElement.style.position = 'fixed';\n    this.tooltipElement.style.top = `${adjusted.top}px`;\n    this.tooltipElement.style.left = `${adjusted.left}px`;\n\n    // Update arrow position\n    const arrow = this.tooltipElement.querySelector('.bbt-hotspot-tooltip__arrow');\n    if (arrow) {\n      arrow.className = `bbt-hotspot-tooltip__arrow bbt-hotspot-tooltip__arrow--${getArrowPosition(actualPosition)}`;\n    }\n  }\n\n  _showTooltip() {\n    if (this.isTooltipVisible) return;\n\n    this.isTooltipVisible = true;\n    this.tooltipElement.style.display = 'block';\n\n    requestAnimationFrame(() => {\n      this._positionTooltip();\n      this.tooltipElement.classList.add('bbt-hotspot-tooltip--enter');\n    });\n  }\n\n  _hideTooltip() {\n    if (!this.isTooltipVisible) return;\n\n    this.isTooltipVisible = false;\n    this.tooltipElement.classList.remove('bbt-hotspot-tooltip--enter');\n    this.tooltipElement.classList.add('bbt-hotspot-tooltip--exit');\n\n    setTimeout(() => {\n      this.tooltipElement.style.display = 'none';\n      this.tooltipElement.classList.remove('bbt-hotspot-tooltip--exit');\n    }, 200);\n  }\n\n  _toggleTooltip() {\n    if (this.isTooltipVisible) {\n      this._hideTooltip();\n    } else {\n      this._showTooltip();\n    }\n  }\n\n  _setupListeners() {\n    const { triggerOn } = this.options;\n\n    // Hotspot click/hover\n    if (triggerOn === 'click') {\n      this.hotspotElement.onclick = (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        this._toggleTooltip();\n      };\n    } else if (triggerOn === 'hover') {\n      this.hotspotElement.onmouseenter = () => this._showTooltip();\n      this.hotspotElement.onmouseleave = () => {\n        // Delay to allow moving to tooltip\n        setTimeout(() => {\n          if (!this.tooltipElement.matches(':hover')) {\n            this._hideTooltip();\n          }\n        }, 100);\n      };\n      this.tooltipElement.onmouseleave = () => this._hideTooltip();\n    }\n\n    // Reposition on resize/scroll\n    this._resizeHandler = () => {\n      this._positionHotspot();\n      this._positionTooltip();\n    };\n    this._scrollHandler = () => {\n      this._positionHotspot();\n      this._positionTooltip();\n    };\n\n    window.addEventListener('resize', this._resizeHandler);\n    window.addEventListener('scroll', this._scrollHandler, true);\n\n    // Click outside to close\n    this._clickOutsideHandler = (e) => {\n      if (\n        this.isTooltipVisible &&\n        !this.tooltipElement.contains(e.target) &&\n        !this.hotspotElement.contains(e.target)\n      ) {\n        this._hideTooltip();\n      }\n    };\n    document.addEventListener('click', this._clickOutsideHandler);\n\n    // Keyboard\n    this._keyHandler = (e) => {\n      if (e.key === 'Escape') {\n        if (this.isTooltipVisible) {\n          this._hideTooltip();\n        } else {\n          this.options.onClose();\n        }\n      }\n    };\n    document.addEventListener('keydown', this._keyHandler);\n\n    // Auto-show tooltip after animation\n    setTimeout(() => {\n      this._showTooltip();\n    }, 500);\n  }\n\n  _removeListeners() {\n    if (this._resizeHandler) {\n      window.removeEventListener('resize', this._resizeHandler);\n    }\n    if (this._scrollHandler) {\n      window.removeEventListener('scroll', this._scrollHandler, true);\n    }\n    if (this._clickOutsideHandler) {\n      document.removeEventListener('click', this._clickOutsideHandler);\n    }\n    if (this._keyHandler) {\n      document.removeEventListener('keydown', this._keyHandler);\n    }\n  }\n\n  _animateIn() {\n    requestAnimationFrame(() => {\n      this.hotspotElement.classList.add('bbt-hotspot--enter');\n    });\n  }\n}\n","/**\n * Slideout Component\n * Displays a side panel that slides in from left or right\n */\n\nexport class Slideout {\n  constructor(options) {\n    this.options = {\n      title: '',\n      content: '',\n      position: 'right', // left, right\n      width: 400, // Width in pixels\n      media: null,\n      buttons: null,\n      stepIndex: 0,\n      totalSteps: 1,\n      showBackButton: false,\n      showSkipButton: true,\n      onNext: () => {},\n      onPrev: () => {},\n      onSkip: () => {},\n      onClose: () => {},\n      theme: 'light',\n      primaryColor: null,\n      showOverlay: true,\n      closeOnOverlay: true,\n      ...options,\n    };\n\n    this.element = null;\n    this.overlayElement = null;\n    this._keyHandler = null;\n  }\n\n  render(container) {\n    if (this.options.showOverlay) {\n      this._createOverlay();\n      container.appendChild(this.overlayElement);\n    }\n\n    this._createSlideout();\n    container.appendChild(this.element);\n\n    this._setupListeners();\n    this._animateIn();\n  }\n\n  destroy() {\n    this._removeListeners();\n\n    if (this.element) {\n      this.element.classList.remove('bbt-slideout--enter');\n      this.element.classList.add('bbt-slideout--exit');\n    }\n    if (this.overlayElement) {\n      this.overlayElement.classList.remove('bbt-slideout-overlay--enter');\n      this.overlayElement.classList.add('bbt-slideout-overlay--exit');\n    }\n\n    setTimeout(() => {\n      if (this.element && this.element.parentNode) {\n        this.element.parentNode.removeChild(this.element);\n      }\n      if (this.overlayElement && this.overlayElement.parentNode) {\n        this.overlayElement.parentNode.removeChild(this.overlayElement);\n      }\n    }, 300);\n\n    this.element = null;\n    this.overlayElement = null;\n  }\n\n  _createOverlay() {\n    this.overlayElement = document.createElement('div');\n    this.overlayElement.className = `bbt-slideout-overlay bbt-slideout-overlay--${this.options.theme}`;\n\n    if (this.options.closeOnOverlay) {\n      this.overlayElement.onclick = () => this.options.onClose();\n    }\n  }\n\n  _createSlideout() {\n    const {\n      title,\n      content,\n      position,\n      width,\n      media,\n      buttons,\n      stepIndex,\n      totalSteps,\n      showBackButton,\n      showSkipButton,\n      theme,\n      primaryColor,\n    } = this.options;\n\n    this.element = document.createElement('div');\n    this.element.className = `bbt-slideout bbt-slideout--${position} bbt-slideout--${theme}`;\n    this.element.style.width = `${width}px`;\n\n    if (primaryColor) {\n      this.element.style.setProperty('--bbt-primary-color', primaryColor);\n    }\n\n    // Header\n    const header = document.createElement('div');\n    header.className = 'bbt-slideout__header';\n\n    if (title) {\n      const titleEl = document.createElement('h3');\n      titleEl.className = 'bbt-slideout__title';\n      titleEl.textContent = title;\n      header.appendChild(titleEl);\n    }\n\n    const closeBtn = document.createElement('button');\n    closeBtn.className = 'bbt-slideout__close';\n    closeBtn.innerHTML = '&times;';\n    closeBtn.setAttribute('aria-label', 'Close');\n    closeBtn.onclick = (e) => {\n      e.preventDefault();\n      this.options.onClose();\n    };\n    header.appendChild(closeBtn);\n\n    this.element.appendChild(header);\n\n    // Body\n    const body = document.createElement('div');\n    body.className = 'bbt-slideout__body';\n\n    // Media\n    if (media) {\n      const mediaEl = this._createMedia(media);\n      body.appendChild(mediaEl);\n    }\n\n    // Content\n    if (content) {\n      const contentEl = document.createElement('div');\n      contentEl.className = 'bbt-slideout__content';\n      contentEl.innerHTML = content;\n      body.appendChild(contentEl);\n    }\n\n    this.element.appendChild(body);\n\n    // Footer\n    const footer = document.createElement('div');\n    footer.className = 'bbt-slideout__footer';\n\n    // Progress\n    if (totalSteps > 1) {\n      const progress = document.createElement('div');\n      progress.className = 'bbt-slideout__progress';\n\n      const progressBar = document.createElement('div');\n      progressBar.className = 'bbt-slideout__progress-bar';\n\n      const progressFill = document.createElement('div');\n      progressFill.className = 'bbt-slideout__progress-fill';\n      progressFill.style.width = `${((stepIndex + 1) / totalSteps) * 100}%`;\n\n      progressBar.appendChild(progressFill);\n      progress.appendChild(progressBar);\n\n      const progressText = document.createElement('span');\n      progressText.className = 'bbt-slideout__progress-text';\n      progressText.textContent = `Step ${stepIndex + 1} of ${totalSteps}`;\n      progress.appendChild(progressText);\n\n      footer.appendChild(progress);\n    }\n\n    // Actions\n    const actions = document.createElement('div');\n    actions.className = 'bbt-slideout__actions';\n\n    if (buttons) {\n      buttons.forEach((btn) => {\n        const button = document.createElement('button');\n        button.className = `bbt-btn bbt-btn--${btn.variant || 'secondary'}`;\n        button.textContent = btn.text;\n        button.onclick = (e) => {\n          e.preventDefault();\n          if (btn.action === 'next') this.options.onNext();\n          else if (btn.action === 'prev') this.options.onPrev();\n          else if (btn.action === 'skip') this.options.onSkip();\n          else if (btn.action === 'close') this.options.onClose();\n          else if (btn.onClick) btn.onClick();\n        };\n        actions.appendChild(button);\n      });\n    } else {\n      if (showSkipButton && stepIndex < totalSteps - 1) {\n        const skipBtn = document.createElement('button');\n        skipBtn.className = 'bbt-btn bbt-btn--text';\n        skipBtn.textContent = 'Skip tour';\n        skipBtn.onclick = (e) => {\n          e.preventDefault();\n          this.options.onSkip();\n        };\n        actions.appendChild(skipBtn);\n      }\n\n      const buttonGroup = document.createElement('div');\n      buttonGroup.className = 'bbt-slideout__button-group';\n\n      if (showBackButton) {\n        const backBtn = document.createElement('button');\n        backBtn.className = 'bbt-btn bbt-btn--secondary';\n        backBtn.textContent = 'Back';\n        backBtn.onclick = (e) => {\n          e.preventDefault();\n          this.options.onPrev();\n        };\n        buttonGroup.appendChild(backBtn);\n      }\n\n      const nextBtn = document.createElement('button');\n      nextBtn.className = 'bbt-btn bbt-btn--primary';\n      nextBtn.textContent = stepIndex >= totalSteps - 1 ? 'Finish' : 'Continue';\n      nextBtn.onclick = (e) => {\n        e.preventDefault();\n        this.options.onNext();\n      };\n      buttonGroup.appendChild(nextBtn);\n\n      actions.appendChild(buttonGroup);\n    }\n\n    footer.appendChild(actions);\n    this.element.appendChild(footer);\n  }\n\n  _createMedia(media) {\n    const container = document.createElement('div');\n    container.className = 'bbt-slideout__media';\n\n    if (media.type === 'image') {\n      const img = document.createElement('img');\n      img.src = media.src;\n      img.alt = media.alt || '';\n      img.className = 'bbt-slideout__image';\n      container.appendChild(img);\n    } else if (media.type === 'video') {\n      const video = document.createElement('video');\n      video.src = media.src;\n      video.controls = true;\n      video.autoplay = media.autoplay || false;\n      video.muted = media.muted !== false;\n      video.loop = media.loop || false;\n      video.className = 'bbt-slideout__video';\n      container.appendChild(video);\n    } else if (media.type === 'embed') {\n      const iframe = document.createElement('iframe');\n      iframe.src = media.src;\n      iframe.className = 'bbt-slideout__embed';\n      iframe.allowFullscreen = true;\n      container.appendChild(iframe);\n    }\n\n    return container;\n  }\n\n  _setupListeners() {\n    this._keyHandler = (e) => {\n      if (e.key === 'Escape') {\n        this.options.onClose();\n      } else if (e.key === 'ArrowRight' || e.key === 'Enter') {\n        this.options.onNext();\n      } else if (e.key === 'ArrowLeft') {\n        this.options.onPrev();\n      }\n    };\n    document.addEventListener('keydown', this._keyHandler);\n  }\n\n  _removeListeners() {\n    if (this._keyHandler) {\n      document.removeEventListener('keydown', this._keyHandler);\n    }\n  }\n\n  _animateIn() {\n    requestAnimationFrame(() => {\n      if (this.overlayElement) {\n        this.overlayElement.classList.add('bbt-slideout-overlay--enter');\n      }\n      this.element.classList.add('bbt-slideout--enter');\n    });\n  }\n}\n","/**\n * Overlay Component\n * Creates a dark overlay with a spotlight on the target element\n */\n\nexport class Overlay {\n  constructor(options) {\n    this.options = {\n      targetElement: null,\n      onClick: null,\n      padding: 8, // Padding around highlighted element\n      opacity: 0.5,\n      theme: 'light',\n      borderRadius: 4,\n      ...options,\n    };\n\n    this.element = null;\n    this.spotlightElement = null;\n    this._resizeHandler = null;\n    this._scrollHandler = null;\n  }\n\n  render(container) {\n    this._createOverlay();\n    container.appendChild(this.element);\n\n    this._updateSpotlight();\n    this._setupListeners();\n    this._animateIn();\n  }\n\n  destroy() {\n    this._removeListeners();\n\n    if (this.element) {\n      this.element.classList.remove('bbt-overlay--enter');\n      this.element.classList.add('bbt-overlay--exit');\n\n      setTimeout(() => {\n        if (this.element && this.element.parentNode) {\n          this.element.parentNode.removeChild(this.element);\n        }\n      }, 200);\n    }\n\n    this.element = null;\n    this.spotlightElement = null;\n  }\n\n  _createOverlay() {\n    const { theme, opacity, onClick } = this.options;\n\n    // SVG-based overlay for smooth spotlight cutout\n    this.element = document.createElement('div');\n    this.element.className = `bbt-overlay bbt-overlay--${theme}`;\n\n    const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n    svg.setAttribute('class', 'bbt-overlay__svg');\n    svg.setAttribute('width', '100%');\n    svg.setAttribute('height', '100%');\n\n    // Defs for the mask\n    const defs = document.createElementNS('http://www.w3.org/2000/svg', 'defs');\n\n    const mask = document.createElementNS('http://www.w3.org/2000/svg', 'mask');\n    mask.setAttribute('id', 'bbt-spotlight-mask');\n\n    // White rectangle (visible area)\n    const maskRect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\n    maskRect.setAttribute('x', '0');\n    maskRect.setAttribute('y', '0');\n    maskRect.setAttribute('width', '100%');\n    maskRect.setAttribute('height', '100%');\n    maskRect.setAttribute('fill', 'white');\n    mask.appendChild(maskRect);\n\n    // Black rectangle for spotlight (cutout)\n    this.spotlightElement = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\n    this.spotlightElement.setAttribute('class', 'bbt-overlay__spotlight');\n    this.spotlightElement.setAttribute('fill', 'black');\n    this.spotlightElement.setAttribute('rx', this.options.borderRadius);\n    this.spotlightElement.setAttribute('ry', this.options.borderRadius);\n    mask.appendChild(this.spotlightElement);\n\n    defs.appendChild(mask);\n    svg.appendChild(defs);\n\n    // Overlay rectangle with mask\n    const overlayRect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\n    overlayRect.setAttribute('x', '0');\n    overlayRect.setAttribute('y', '0');\n    overlayRect.setAttribute('width', '100%');\n    overlayRect.setAttribute('height', '100%');\n    overlayRect.setAttribute('fill', theme === 'dark' ? 'rgba(255, 255, 255, 0.1)' : `rgba(0, 0, 0, ${opacity})`);\n    overlayRect.setAttribute('mask', 'url(#bbt-spotlight-mask)');\n    svg.appendChild(overlayRect);\n\n    this.element.appendChild(svg);\n\n    // Click handler\n    if (onClick) {\n      this.element.onclick = (e) => {\n        if (e.target === this.element || e.target.tagName === 'svg' || e.target.tagName === 'rect') {\n          onClick();\n        }\n      };\n    }\n  }\n\n  _updateSpotlight() {\n    const { targetElement, padding } = this.options;\n\n    if (!targetElement || !this.spotlightElement) {\n      // Hide spotlight if no target\n      this.spotlightElement.setAttribute('width', '0');\n      this.spotlightElement.setAttribute('height', '0');\n      return;\n    }\n\n    const rect = targetElement.getBoundingClientRect();\n\n    this.spotlightElement.setAttribute('x', rect.left - padding);\n    this.spotlightElement.setAttribute('y', rect.top - padding);\n    this.spotlightElement.setAttribute('width', rect.width + padding * 2);\n    this.spotlightElement.setAttribute('height', rect.height + padding * 2);\n  }\n\n  _setupListeners() {\n    this._resizeHandler = () => this._updateSpotlight();\n    this._scrollHandler = () => this._updateSpotlight();\n\n    window.addEventListener('resize', this._resizeHandler);\n    window.addEventListener('scroll', this._scrollHandler, true);\n  }\n\n  _removeListeners() {\n    if (this._resizeHandler) {\n      window.removeEventListener('resize', this._resizeHandler);\n    }\n    if (this._scrollHandler) {\n      window.removeEventListener('scroll', this._scrollHandler, true);\n    }\n  }\n\n  _animateIn() {\n    requestAnimationFrame(() => {\n      this.element.classList.add('bbt-overlay--enter');\n    });\n  }\n}\n\n/**\n * Simple highlight border around element (alternative to overlay)\n */\nexport class Highlight {\n  constructor(options) {\n    this.options = {\n      targetElement: null,\n      color: '#3B82F6',\n      borderWidth: 2,\n      padding: 4,\n      borderRadius: 4,\n      pulse: false,\n      ...options,\n    };\n\n    this.element = null;\n    this._resizeHandler = null;\n    this._scrollHandler = null;\n  }\n\n  render(container) {\n    this._createHighlight();\n    container.appendChild(this.element);\n\n    this._updatePosition();\n    this._setupListeners();\n    this._animateIn();\n  }\n\n  destroy() {\n    this._removeListeners();\n\n    if (this.element && this.element.parentNode) {\n      this.element.parentNode.removeChild(this.element);\n    }\n\n    this.element = null;\n  }\n\n  _createHighlight() {\n    const { color, borderWidth, borderRadius, pulse } = this.options;\n\n    this.element = document.createElement('div');\n    this.element.className = 'bbt-highlight';\n\n    if (pulse) {\n      this.element.classList.add('bbt-highlight--pulse');\n    }\n\n    this.element.style.border = `${borderWidth}px solid ${color}`;\n    this.element.style.borderRadius = `${borderRadius}px`;\n    this.element.style.boxShadow = `0 0 0 4px ${color}33`;\n  }\n\n  _updatePosition() {\n    const { targetElement, padding, borderWidth } = this.options;\n\n    if (!targetElement) return;\n\n    const rect = targetElement.getBoundingClientRect();\n\n    this.element.style.position = 'fixed';\n    this.element.style.top = `${rect.top - padding - borderWidth}px`;\n    this.element.style.left = `${rect.left - padding - borderWidth}px`;\n    this.element.style.width = `${rect.width + padding * 2}px`;\n    this.element.style.height = `${rect.height + padding * 2}px`;\n  }\n\n  _setupListeners() {\n    this._resizeHandler = () => this._updatePosition();\n    this._scrollHandler = () => this._updatePosition();\n\n    window.addEventListener('resize', this._resizeHandler);\n    window.addEventListener('scroll', this._scrollHandler, true);\n  }\n\n  _removeListeners() {\n    if (this._resizeHandler) {\n      window.removeEventListener('resize', this._resizeHandler);\n    }\n    if (this._scrollHandler) {\n      window.removeEventListener('scroll', this._scrollHandler, true);\n    }\n  }\n\n  _animateIn() {\n    requestAnimationFrame(() => {\n      this.element.classList.add('bbt-highlight--enter');\n    });\n  }\n}\n","/**\n * ProgressBar Component\n * Shows tour progress at the bottom of the screen\n */\n\nexport class ProgressBar {\n  constructor(options) {\n    this.options = {\n      current: 0,\n      total: 1,\n      theme: 'light',\n      position: 'bottom', // top, bottom\n      showStepNumbers: true,\n      primaryColor: null,\n      ...options,\n    };\n\n    this.element = null;\n  }\n\n  render(container) {\n    this._createProgressBar();\n    container.appendChild(this.element);\n    this._animateIn();\n  }\n\n  destroy() {\n    if (this.element) {\n      this.element.classList.remove('bbt-progress-bar--enter');\n      this.element.classList.add('bbt-progress-bar--exit');\n\n      setTimeout(() => {\n        if (this.element && this.element.parentNode) {\n          this.element.parentNode.removeChild(this.element);\n        }\n      }, 200);\n    }\n\n    this.element = null;\n  }\n\n  update(current) {\n    this.options.current = current;\n    this._updateProgress();\n  }\n\n  _createProgressBar() {\n    const { current, total, theme, position, showStepNumbers, primaryColor } = this.options;\n\n    this.element = document.createElement('div');\n    this.element.className = `bbt-progress-bar bbt-progress-bar--${position} bbt-progress-bar--${theme}`;\n\n    if (primaryColor) {\n      this.element.style.setProperty('--bbt-primary-color', primaryColor);\n    }\n\n    // Progress track\n    const track = document.createElement('div');\n    track.className = 'bbt-progress-bar__track';\n\n    // Step dots\n    for (let i = 0; i < total; i++) {\n      const step = document.createElement('div');\n      step.className = 'bbt-progress-bar__step';\n\n      if (i < current) {\n        step.classList.add('bbt-progress-bar__step--completed');\n      } else if (i === current) {\n        step.classList.add('bbt-progress-bar__step--active');\n      }\n\n      // Connector line (except for last step)\n      if (i < total - 1) {\n        const connector = document.createElement('div');\n        connector.className = 'bbt-progress-bar__connector';\n\n        if (i < current) {\n          connector.classList.add('bbt-progress-bar__connector--completed');\n        }\n\n        step.appendChild(connector);\n      }\n\n      // Step dot\n      const dot = document.createElement('div');\n      dot.className = 'bbt-progress-bar__dot';\n\n      if (showStepNumbers) {\n        dot.textContent = i + 1;\n      }\n\n      step.appendChild(dot);\n      track.appendChild(step);\n    }\n\n    this.element.appendChild(track);\n\n    // Text indicator\n    const text = document.createElement('div');\n    text.className = 'bbt-progress-bar__text';\n    text.textContent = `Step ${current + 1} of ${total}`;\n    this.element.appendChild(text);\n  }\n\n  _updateProgress() {\n    const { current, total } = this.options;\n\n    // Update steps\n    const steps = this.element.querySelectorAll('.bbt-progress-bar__step');\n    steps.forEach((step, i) => {\n      step.classList.remove('bbt-progress-bar__step--completed', 'bbt-progress-bar__step--active');\n\n      if (i < current) {\n        step.classList.add('bbt-progress-bar__step--completed');\n      } else if (i === current) {\n        step.classList.add('bbt-progress-bar__step--active');\n      }\n    });\n\n    // Update connectors\n    const connectors = this.element.querySelectorAll('.bbt-progress-bar__connector');\n    connectors.forEach((connector, i) => {\n      connector.classList.toggle('bbt-progress-bar__connector--completed', i < current);\n    });\n\n    // Update text\n    const text = this.element.querySelector('.bbt-progress-bar__text');\n    if (text) {\n      text.textContent = `Step ${current + 1} of ${total}`;\n    }\n  }\n\n  _animateIn() {\n    requestAnimationFrame(() => {\n      this.element.classList.add('bbt-progress-bar--enter');\n    });\n  }\n}\n\n/**\n * Minimal progress indicator (dots only)\n */\nexport class ProgressDots {\n  constructor(options) {\n    this.options = {\n      current: 0,\n      total: 1,\n      theme: 'light',\n      primaryColor: null,\n      ...options,\n    };\n\n    this.element = null;\n  }\n\n  render(container) {\n    this._createDots();\n    container.appendChild(this.element);\n  }\n\n  destroy() {\n    if (this.element && this.element.parentNode) {\n      this.element.parentNode.removeChild(this.element);\n    }\n    this.element = null;\n  }\n\n  update(current) {\n    this.options.current = current;\n    this._updateDots();\n  }\n\n  _createDots() {\n    const { current, total, theme, primaryColor } = this.options;\n\n    this.element = document.createElement('div');\n    this.element.className = `bbt-progress-dots bbt-progress-dots--${theme}`;\n\n    if (primaryColor) {\n      this.element.style.setProperty('--bbt-primary-color', primaryColor);\n    }\n\n    for (let i = 0; i < total; i++) {\n      const dot = document.createElement('div');\n      dot.className = 'bbt-progress-dots__dot';\n\n      if (i < current) {\n        dot.classList.add('bbt-progress-dots__dot--completed');\n      } else if (i === current) {\n        dot.classList.add('bbt-progress-dots__dot--active');\n      }\n\n      this.element.appendChild(dot);\n    }\n  }\n\n  _updateDots() {\n    const { current } = this.options;\n\n    const dots = this.element.querySelectorAll('.bbt-progress-dots__dot');\n    dots.forEach((dot, i) => {\n      dot.classList.remove('bbt-progress-dots__dot--completed', 'bbt-progress-dots__dot--active');\n\n      if (i < current) {\n        dot.classList.add('bbt-progress-dots__dot--completed');\n      } else if (i === current) {\n        dot.classList.add('bbt-progress-dots__dot--active');\n      }\n    });\n  }\n}\n","/**\n * DOM Utilities\n * Helper functions for DOM manipulation and element finding\n */\n\n/**\n * Find an element by selector\n * @param {string} selector - CSS selector\n * @returns {Element|null}\n */\nexport function findElement(selector) {\n  if (!selector) return null;\n\n  try {\n    // Handle special selectors\n    if (selector.startsWith('data-tour=')) {\n      const value = selector.replace('data-tour=', '');\n      return document.querySelector(`[data-tour=\"${value}\"]`);\n    }\n\n    if (selector.startsWith('data-tour-id=')) {\n      const value = selector.replace('data-tour-id=', '');\n      return document.querySelector(`[data-tour-id=\"${value}\"]`);\n    }\n\n    return document.querySelector(selector);\n  } catch (error) {\n    console.error('[TourSDK] Invalid selector:', selector, error);\n    return null;\n  }\n}\n\n/**\n * Check if an element is visible in the viewport\n * @param {Element} element - DOM element\n * @returns {boolean}\n */\nexport function isElementVisible(element) {\n  if (!element) return false;\n\n  const rect = element.getBoundingClientRect();\n  const style = window.getComputedStyle(element);\n\n  // Check if element has dimensions\n  if (rect.width === 0 || rect.height === 0) return false;\n\n  // Check CSS visibility\n  if (style.display === 'none') return false;\n  if (style.visibility === 'hidden') return false;\n  if (parseFloat(style.opacity) === 0) return false;\n\n  // Check if in viewport\n  const viewportHeight = window.innerHeight || document.documentElement.clientHeight;\n  const viewportWidth = window.innerWidth || document.documentElement.clientWidth;\n\n  return (\n    rect.top >= -rect.height &&\n    rect.left >= -rect.width &&\n    rect.bottom <= viewportHeight + rect.height &&\n    rect.right <= viewportWidth + rect.width\n  );\n}\n\n/**\n * Check if element is fully visible in viewport\n * @param {Element} element - DOM element\n * @returns {boolean}\n */\nexport function isElementFullyVisible(element) {\n  if (!element) return false;\n\n  const rect = element.getBoundingClientRect();\n  const viewportHeight = window.innerHeight || document.documentElement.clientHeight;\n  const viewportWidth = window.innerWidth || document.documentElement.clientWidth;\n\n  return (\n    rect.top >= 0 &&\n    rect.left >= 0 &&\n    rect.bottom <= viewportHeight &&\n    rect.right <= viewportWidth\n  );\n}\n\n/**\n * Get element position and dimensions\n * @param {Element} element - DOM element\n * @returns {Object}\n */\nexport function getElementPosition(element) {\n  if (!element) return null;\n\n  const rect = element.getBoundingClientRect();\n  const scrollLeft = window.pageXOffset || document.documentElement.scrollLeft;\n  const scrollTop = window.pageYOffset || document.documentElement.scrollTop;\n\n  return {\n    top: rect.top,\n    left: rect.left,\n    right: rect.right,\n    bottom: rect.bottom,\n    width: rect.width,\n    height: rect.height,\n    absoluteTop: rect.top + scrollTop,\n    absoluteLeft: rect.left + scrollLeft,\n    centerX: rect.left + rect.width / 2,\n    centerY: rect.top + rect.height / 2,\n  };\n}\n\n/**\n * Scroll to an element\n * @param {Element} element - DOM element\n * @param {Object} options - Scroll options\n * @returns {Promise}\n */\nexport function scrollToElement(element, options = {}) {\n  return new Promise((resolve) => {\n    if (!element) {\n      resolve();\n      return;\n    }\n\n    const {\n      behavior = 'smooth',\n      block = 'center',\n      inline = 'nearest',\n      offset = 0,\n    } = options;\n\n    // Check if element is already visible\n    if (isElementFullyVisible(element)) {\n      resolve();\n      return;\n    }\n\n    // Use native scrollIntoView\n    element.scrollIntoView({\n      behavior,\n      block,\n      inline,\n    });\n\n    // Apply additional offset if needed\n    if (offset !== 0) {\n      setTimeout(() => {\n        window.scrollBy({\n          top: offset,\n          behavior: 'smooth',\n        });\n      }, 100);\n    }\n\n    // Wait for scroll to complete\n    const scrollTimeout = behavior === 'smooth' ? 500 : 100;\n    setTimeout(resolve, scrollTimeout);\n  });\n}\n\n/**\n * Wait for an element to appear in the DOM\n * @param {string} selector - CSS selector\n * @param {number} timeout - Timeout in milliseconds\n * @returns {Promise<Element|null>}\n */\nexport function waitForElement(selector, timeout = 5000) {\n  return new Promise((resolve) => {\n    // Check if element already exists\n    const existing = findElement(selector);\n    if (existing) {\n      resolve(existing);\n      return;\n    }\n\n    const startTime = Date.now();\n\n    // Use MutationObserver for better performance\n    const observer = new MutationObserver((mutations, obs) => {\n      const element = findElement(selector);\n      if (element) {\n        obs.disconnect();\n        resolve(element);\n      } else if (Date.now() - startTime >= timeout) {\n        obs.disconnect();\n        resolve(null);\n      }\n    });\n\n    observer.observe(document.body, {\n      childList: true,\n      subtree: true,\n      attributes: true,\n    });\n\n    // Fallback timeout\n    setTimeout(() => {\n      observer.disconnect();\n      resolve(findElement(selector));\n    }, timeout);\n  });\n}\n\n/**\n * Wait for element to be visible\n * @param {string} selector - CSS selector\n * @param {number} timeout - Timeout in milliseconds\n * @returns {Promise<Element|null>}\n */\nexport async function waitForElementVisible(selector, timeout = 5000) {\n  const element = await waitForElement(selector, timeout);\n\n  if (!element) return null;\n\n  // Wait for visibility\n  const startTime = Date.now();\n  while (!isElementVisible(element) && Date.now() - startTime < timeout) {\n    await new Promise((resolve) => setTimeout(resolve, 100));\n  }\n\n  return isElementVisible(element) ? element : null;\n}\n\n/**\n * Add highlight effect to an element\n * @param {Element} element - DOM element\n * @param {Object} options - Highlight options\n * @returns {Function} - Cleanup function\n */\nexport function highlightElement(element, options = {}) {\n  if (!element) return () => {};\n\n  const {\n    color = '#3B82F6',\n    duration = 0, // 0 = permanent until cleanup\n    pulse = false,\n  } = options;\n\n  const originalOutline = element.style.outline;\n  const originalTransition = element.style.transition;\n\n  element.style.outline = `3px solid ${color}`;\n  element.style.transition = 'outline 0.3s ease';\n\n  if (pulse) {\n    element.classList.add('bbt-pulse-highlight');\n  }\n\n  const cleanup = () => {\n    element.style.outline = originalOutline;\n    element.style.transition = originalTransition;\n    element.classList.remove('bbt-pulse-highlight');\n  };\n\n  if (duration > 0) {\n    setTimeout(cleanup, duration);\n  }\n\n  return cleanup;\n}\n\n/**\n * Get all focusable elements within a container\n * @param {Element} container - Container element\n * @returns {Element[]}\n */\nexport function getFocusableElements(container) {\n  const focusableSelectors = [\n    'a[href]',\n    'button:not([disabled])',\n    'input:not([disabled])',\n    'select:not([disabled])',\n    'textarea:not([disabled])',\n    '[tabindex]:not([tabindex=\"-1\"])',\n  ].join(', ');\n\n  return Array.from(container.querySelectorAll(focusableSelectors));\n}\n\n/**\n * Create focus trap within a container\n * @param {Element} container - Container element\n * @returns {Function} - Cleanup function\n */\nexport function createFocusTrap(container) {\n  const focusableElements = getFocusableElements(container);\n  const firstElement = focusableElements[0];\n  const lastElement = focusableElements[focusableElements.length - 1];\n\n  const handleKeyDown = (e) => {\n    if (e.key !== 'Tab') return;\n\n    if (e.shiftKey) {\n      if (document.activeElement === firstElement) {\n        e.preventDefault();\n        lastElement?.focus();\n      }\n    } else {\n      if (document.activeElement === lastElement) {\n        e.preventDefault();\n        firstElement?.focus();\n      }\n    }\n  };\n\n  container.addEventListener('keydown', handleKeyDown);\n  firstElement?.focus();\n\n  return () => {\n    container.removeEventListener('keydown', handleKeyDown);\n  };\n}\n\n/**\n * Get the z-index of an element\n * @param {Element} element - DOM element\n * @returns {number}\n */\nexport function getZIndex(element) {\n  let el = element;\n  let zIndex = 0;\n\n  while (el) {\n    const style = window.getComputedStyle(el);\n    const z = parseInt(style.zIndex, 10);\n\n    if (!isNaN(z) && z > zIndex) {\n      zIndex = z;\n    }\n\n    el = el.parentElement;\n  }\n\n  return zIndex;\n}\n","/**\n * TourRenderer - Handles rendering of tour steps and UI components\n */\n\nimport { Tooltip } from './components/Tooltip';\nimport { Modal } from './components/Modal';\nimport { Hotspot } from './components/Hotspot';\nimport { Slideout } from './components/Slideout';\nimport { Overlay } from './components/Overlay';\nimport { ProgressBar } from './components/ProgressBar';\nimport { findElement, waitForElement, scrollToElement, isElementVisible } from './utils/dom';\n\nexport class TourRenderer {\n  constructor(sdk) {\n    this.sdk = sdk;\n    this.container = null;\n    this.currentComponent = null;\n    this.overlay = null;\n    this.progressBar = null;\n    this.hotspots = [];\n\n    this._createContainer();\n  }\n\n  /**\n   * Render a step\n   * @param {Object} step - Step configuration\n   * @param {Object} options - Render options\n   */\n  async renderStep(step, options) {\n    // Cleanup previous step\n    this._cleanup();\n\n    const { tour, stepIndex, totalSteps, onNext, onPrev, onSkip, onClose } = options;\n\n    // Wait for target element if needed\n    let targetElement = null;\n    if (step.targetSelector) {\n      targetElement = await waitForElement(step.targetSelector, step.waitTimeout || 5000);\n\n      if (!targetElement) {\n        console.warn(`[TourRenderer] Target element not found: ${step.targetSelector}`);\n        // Show modal instead if target not found\n        step.type = 'modal';\n      }\n    }\n\n    // Scroll to element if needed\n    if (targetElement && step.scrollTo !== false) {\n      await scrollToElement(targetElement, {\n        behavior: step.scrollBehavior || 'smooth',\n        block: step.scrollBlock || 'center',\n      });\n    }\n\n    // Show overlay if configured\n    if (step.overlay !== false && targetElement) {\n      this.overlay = new Overlay({\n        targetElement,\n        onClick: step.overlayClickClose ? onClose : null,\n        padding: step.overlayPadding || 8,\n        opacity: step.overlayOpacity || 0.5,\n        theme: this.sdk.config.theme,\n      });\n      this.overlay.render(this.container);\n    }\n\n    // Show progress bar if configured\n    if (tour.settings?.showProgress !== false && totalSteps > 1) {\n      this.progressBar = new ProgressBar({\n        current: stepIndex,\n        total: totalSteps,\n        theme: this.sdk.config.theme,\n      });\n      this.progressBar.render(this.container);\n    }\n\n    // Render the appropriate component based on step type\n    const componentOptions = {\n      step,\n      targetElement,\n      stepIndex,\n      totalSteps,\n      onNext,\n      onPrev,\n      onSkip,\n      onClose,\n      showBackButton: stepIndex > 0 && tour.settings?.showBackButton !== false,\n      showSkipButton: tour.settings?.showSkipButton !== false,\n      theme: this.sdk.config.theme,\n      primaryColor: tour.settings?.primaryColor,\n    };\n\n    switch (step.type) {\n      case 'tooltip':\n        this._renderTooltip(componentOptions);\n        break;\n      case 'modal':\n        this._renderModal(componentOptions);\n        break;\n      case 'hotspot':\n        this._renderHotspot(componentOptions);\n        break;\n      case 'slideout':\n        this._renderSlideout(componentOptions);\n        break;\n      default:\n        this._renderTooltip(componentOptions);\n    }\n\n    // Handle step actions/triggers\n    this._setupStepTriggers(step, targetElement, onNext);\n  }\n\n  /**\n   * Render tooltip component\n   */\n  _renderTooltip(options) {\n    const { step, targetElement, ...rest } = options;\n\n    this.currentComponent = new Tooltip({\n      title: step.title,\n      content: step.content,\n      position: step.position || 'bottom',\n      targetElement,\n      media: step.media,\n      buttons: step.buttons,\n      ...rest,\n    });\n\n    this.currentComponent.render(this.container);\n  }\n\n  /**\n   * Render modal component\n   */\n  _renderModal(options) {\n    const { step, ...rest } = options;\n\n    this.currentComponent = new Modal({\n      title: step.title,\n      content: step.content,\n      size: step.size || 'medium',\n      media: step.media,\n      buttons: step.buttons,\n      ...rest,\n    });\n\n    this.currentComponent.render(this.container);\n  }\n\n  /**\n   * Render hotspot component\n   */\n  _renderHotspot(options) {\n    const { step, targetElement, ...rest } = options;\n\n    if (!targetElement) {\n      console.warn('[TourRenderer] Hotspot requires a target element');\n      this._renderModal(options);\n      return;\n    }\n\n    this.currentComponent = new Hotspot({\n      targetElement,\n      title: step.title,\n      content: step.content,\n      position: step.position || 'right',\n      color: step.hotspotColor,\n      pulse: step.pulse !== false,\n      ...rest,\n    });\n\n    this.currentComponent.render(this.container);\n  }\n\n  /**\n   * Render slideout component\n   */\n  _renderSlideout(options) {\n    const { step, ...rest } = options;\n\n    this.currentComponent = new Slideout({\n      title: step.title,\n      content: step.content,\n      position: step.slidePosition || 'right',\n      width: step.slideWidth,\n      media: step.media,\n      buttons: step.buttons,\n      ...rest,\n    });\n\n    this.currentComponent.render(this.container);\n  }\n\n  /**\n   * Setup step-specific triggers\n   */\n  _setupStepTriggers(step, targetElement, onNext) {\n    if (!step.trigger || !targetElement) return;\n\n    const { type, event } = step.trigger;\n\n    switch (type) {\n      case 'click':\n        const clickHandler = () => {\n          targetElement.removeEventListener('click', clickHandler);\n          onNext();\n        };\n        targetElement.addEventListener('click', clickHandler);\n        this._triggerCleanup = () => targetElement.removeEventListener('click', clickHandler);\n        break;\n\n      case 'input':\n        const inputHandler = () => {\n          if (targetElement.value.length > 0) {\n            targetElement.removeEventListener('input', inputHandler);\n            onNext();\n          }\n        };\n        targetElement.addEventListener('input', inputHandler);\n        this._triggerCleanup = () => targetElement.removeEventListener('input', inputHandler);\n        break;\n\n      case 'custom':\n        // Custom event listener\n        if (event) {\n          const customHandler = () => {\n            document.removeEventListener(event, customHandler);\n            onNext();\n          };\n          document.addEventListener(event, customHandler);\n          this._triggerCleanup = () => document.removeEventListener(event, customHandler);\n        }\n        break;\n    }\n  }\n\n  /**\n   * Destroy all rendered components\n   */\n  destroy() {\n    this._cleanup();\n\n    if (this.container && this.container.parentNode) {\n      this.container.parentNode.removeChild(this.container);\n    }\n\n    this.container = null;\n  }\n\n  // Private methods\n\n  _createContainer() {\n    // Remove existing container if any\n    const existing = document.getElementById('botbuilder-tours-container');\n    if (existing) {\n      existing.parentNode.removeChild(existing);\n    }\n\n    this.container = document.createElement('div');\n    this.container.id = 'botbuilder-tours-container';\n    this.container.className = 'botbuilder-tours';\n    document.body.appendChild(this.container);\n  }\n\n  _cleanup() {\n    if (this.currentComponent) {\n      this.currentComponent.destroy();\n      this.currentComponent = null;\n    }\n\n    if (this.overlay) {\n      this.overlay.destroy();\n      this.overlay = null;\n    }\n\n    if (this.progressBar) {\n      this.progressBar.destroy();\n      this.progressBar = null;\n    }\n\n    this.hotspots.forEach((hotspot) => hotspot.destroy());\n    this.hotspots = [];\n\n    if (this._triggerCleanup) {\n      this._triggerCleanup();\n      this._triggerCleanup = null;\n    }\n  }\n}\n","/**\n * Event Emitter\n * Simple event emitter for SDK events\n */\n\nexport class EventEmitter {\n  constructor() {\n    this._events = {};\n    this._onceEvents = {};\n  }\n\n  /**\n   * Add an event listener\n   * @param {string} event - Event name\n   * @param {Function} callback - Callback function\n   * @returns {this}\n   */\n  on(event, callback) {\n    if (typeof callback !== 'function') {\n      throw new Error('Callback must be a function');\n    }\n\n    if (!this._events[event]) {\n      this._events[event] = [];\n    }\n\n    this._events[event].push(callback);\n    return this;\n  }\n\n  /**\n   * Add a one-time event listener\n   * @param {string} event - Event name\n   * @param {Function} callback - Callback function\n   * @returns {this}\n   */\n  once(event, callback) {\n    if (typeof callback !== 'function') {\n      throw new Error('Callback must be a function');\n    }\n\n    if (!this._onceEvents[event]) {\n      this._onceEvents[event] = [];\n    }\n\n    this._onceEvents[event].push(callback);\n    return this;\n  }\n\n  /**\n   * Remove an event listener\n   * @param {string} event - Event name\n   * @param {Function} callback - Callback function to remove\n   * @returns {this}\n   */\n  off(event, callback) {\n    if (this._events[event]) {\n      this._events[event] = this._events[event].filter((cb) => cb !== callback);\n    }\n\n    if (this._onceEvents[event]) {\n      this._onceEvents[event] = this._onceEvents[event].filter((cb) => cb !== callback);\n    }\n\n    return this;\n  }\n\n  /**\n   * Remove all listeners for an event (or all events)\n   * @param {string} [event] - Event name (optional)\n   * @returns {this}\n   */\n  removeAllListeners(event) {\n    if (event) {\n      delete this._events[event];\n      delete this._onceEvents[event];\n    } else {\n      this._events = {};\n      this._onceEvents = {};\n    }\n\n    return this;\n  }\n\n  /**\n   * Emit an event\n   * @param {string} event - Event name\n   * @param {...*} args - Arguments to pass to callbacks\n   * @returns {boolean} - Whether event had listeners\n   */\n  emit(event, ...args) {\n    let hasListeners = false;\n\n    // Regular listeners\n    if (this._events[event]) {\n      hasListeners = true;\n      this._events[event].forEach((callback) => {\n        try {\n          callback(...args);\n        } catch (error) {\n          console.error(`[EventEmitter] Error in ${event} listener:`, error);\n        }\n      });\n    }\n\n    // One-time listeners\n    if (this._onceEvents[event]) {\n      hasListeners = true;\n      const callbacks = [...this._onceEvents[event]];\n      this._onceEvents[event] = [];\n\n      callbacks.forEach((callback) => {\n        try {\n          callback(...args);\n        } catch (error) {\n          console.error(`[EventEmitter] Error in ${event} once listener:`, error);\n        }\n      });\n    }\n\n    // Wildcard listeners\n    if (this._events['*']) {\n      this._events['*'].forEach((callback) => {\n        try {\n          callback(event, ...args);\n        } catch (error) {\n          console.error(`[EventEmitter] Error in wildcard listener:`, error);\n        }\n      });\n    }\n\n    return hasListeners;\n  }\n\n  /**\n   * Get listener count for an event\n   * @param {string} event - Event name\n   * @returns {number}\n   */\n  listenerCount(event) {\n    const regular = this._events[event]?.length || 0;\n    const once = this._onceEvents[event]?.length || 0;\n    return regular + once;\n  }\n\n  /**\n   * Get all event names\n   * @returns {string[]}\n   */\n  eventNames() {\n    const events = new Set([\n      ...Object.keys(this._events),\n      ...Object.keys(this._onceEvents),\n    ]);\n    return Array.from(events);\n  }\n\n  /**\n   * Get listeners for an event\n   * @param {string} event - Event name\n   * @returns {Function[]}\n   */\n  listeners(event) {\n    return [\n      ...(this._events[event] || []),\n      ...(this._onceEvents[event] || []),\n    ];\n  }\n}\n\n/**\n * SDK Event Types\n */\nexport const EVENTS = {\n  // SDK lifecycle\n  SDK_INITIALIZED: 'sdk:initialized',\n  SDK_DESTROYED: 'sdk:destroyed',\n\n  // User events\n  USER_IDENTIFIED: 'user:identified',\n\n  // Tour events\n  TOUR_STARTED: 'tour:started',\n  TOUR_COMPLETED: 'tour:completed',\n  TOUR_DISMISSED: 'tour:dismissed',\n  TOUR_ERROR: 'tour:error',\n\n  // Step events\n  STEP_VIEWED: 'step:viewed',\n  STEP_COMPLETED: 'step:completed',\n  STEP_SKIPPED: 'step:skipped',\n\n  // Progress events\n  PROGRESS_SAVED: 'progress:saved',\n  PROGRESS_RESET: 'progress:reset',\n};\n\n/**\n * Create a typed event emitter with predefined events\n */\nexport function createTypedEmitter() {\n  const emitter = new EventEmitter();\n\n  // Add type hints for IDE autocomplete\n  return {\n    on: (event, callback) => emitter.on(event, callback),\n    once: (event, callback) => emitter.once(event, callback),\n    off: (event, callback) => emitter.off(event, callback),\n    emit: (event, ...args) => emitter.emit(event, ...args),\n    removeAllListeners: (event) => emitter.removeAllListeners(event),\n    EVENTS,\n  };\n}\n\n/**\n * Debounce helper\n * @param {Function} func - Function to debounce\n * @param {number} wait - Wait time in milliseconds\n * @returns {Function}\n */\nexport function debounce(func, wait) {\n  let timeout;\n\n  return function executedFunction(...args) {\n    const later = () => {\n      clearTimeout(timeout);\n      func(...args);\n    };\n\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n  };\n}\n\n/**\n * Throttle helper\n * @param {Function} func - Function to throttle\n * @param {number} limit - Time limit in milliseconds\n * @returns {Function}\n */\nexport function throttle(func, limit) {\n  let inThrottle;\n\n  return function executedFunction(...args) {\n    if (!inThrottle) {\n      func(...args);\n      inThrottle = true;\n      setTimeout(() => (inThrottle = false), limit);\n    }\n  };\n}\n","/**\n * BotBuilder Tours SDK\n * Product tours for customer websites\n */\n\nimport { TourEngine } from './TourEngine';\nimport { TourRenderer } from './TourRenderer';\nimport { EventEmitter } from './utils/events';\nimport { getVisitorId, setVisitorId, getProgress, setProgress, clearProgress } from './utils/storage';\nimport { initApi } from './utils/api';\n\nclass TourSDK extends EventEmitter {\n  constructor() {\n    super();\n    this.config = null;\n    this.engine = null;\n    this.renderer = null;\n    this.currentTour = null;\n    this.currentStepIndex = 0;\n    this.initialized = false;\n    this.visitorId = null;\n    this.userId = null;\n    this.userTraits = {};\n  }\n\n  /**\n   * Initialize the SDK\n   * @param {Object} config - Configuration object\n   * @param {string} config.workspaceId - Workspace ID (required)\n   * @param {string} [config.userId] - User ID (optional)\n   * @param {string} [config.visitorId] - Visitor ID (optional, auto-generated if not provided)\n   * @param {string} [config.apiUrl] - API URL (optional, defaults to production)\n   * @param {boolean} [config.autoStart=true] - Auto start tours based on targeting\n   * @param {string} [config.theme='light'] - Theme: 'light' or 'dark'\n   */\n  init(config) {\n    if (this.initialized) {\n      console.warn('[BotBuilderTours] SDK already initialized');\n      return this;\n    }\n\n    if (!config.workspaceId) {\n      throw new Error('[BotBuilderTours] workspaceId is required');\n    }\n\n    this.config = {\n      workspaceId: config.workspaceId,\n      userId: config.userId || null,\n      visitorId: config.visitorId || getVisitorId(),\n      apiUrl: config.apiUrl || 'https://api.botbuilder.app',\n      autoStart: config.autoStart !== false,\n      theme: config.theme || 'light',\n    };\n\n    // Save visitor ID\n    this.visitorId = this.config.visitorId;\n    setVisitorId(this.visitorId);\n\n    if (this.config.userId) {\n      this.userId = this.config.userId;\n    }\n\n    // Initialize API\n    initApi(this.config.apiUrl, this.config.workspaceId);\n\n    // Initialize engine and renderer\n    this.engine = new TourEngine(this);\n    this.renderer = new TourRenderer(this);\n\n    // Apply theme\n    this._applyTheme(this.config.theme);\n\n    this.initialized = true;\n    this.emit('sdk:initialized', { config: this.config });\n\n    // Auto-load and start tours if enabled\n    if (this.config.autoStart) {\n      this._autoStartTours();\n    }\n\n    return this;\n  }\n\n  /**\n   * Identify a user\n   * @param {string} userId - User ID\n   * @param {Object} [traits] - User traits for targeting\n   */\n  identify(userId, traits = {}) {\n    if (!this.initialized) {\n      throw new Error('[BotBuilderTours] SDK not initialized. Call init() first.');\n    }\n\n    this.userId = userId;\n    this.userTraits = { ...this.userTraits, ...traits };\n\n    this.emit('user:identified', { userId, traits: this.userTraits });\n\n    // Re-check targeting after identification\n    if (this.config.autoStart) {\n      this._autoStartTours();\n    }\n\n    return this;\n  }\n\n  /**\n   * Manually start a tour\n   * @param {string} tourId - Tour ID\n   */\n  async startTour(tourId) {\n    if (!this.initialized) {\n      throw new Error('[BotBuilderTours] SDK not initialized. Call init() first.');\n    }\n\n    if (this.currentTour) {\n      console.warn('[BotBuilderTours] A tour is already running. End it first.');\n      return;\n    }\n\n    try {\n      const tour = await this.engine.loadTour(tourId);\n      if (!tour) {\n        console.error(`[BotBuilderTours] Tour ${tourId} not found`);\n        return;\n      }\n\n      this.currentTour = tour;\n      this.currentStepIndex = 0;\n\n      // Check for saved progress\n      const progress = getProgress(tourId);\n      if (progress && progress.currentStep > 0) {\n        this.currentStepIndex = progress.currentStep;\n      }\n\n      this.emit('tour:started', { tour: this.currentTour, stepIndex: this.currentStepIndex });\n      this.engine.trackEvent('tour_started', { tourId });\n\n      this._showCurrentStep();\n    } catch (error) {\n      console.error('[BotBuilderTours] Failed to start tour:', error);\n      this.emit('tour:error', { tourId, error });\n    }\n  }\n\n  /**\n   * End the current tour\n   * @param {boolean} [completed=true] - Whether tour was completed or dismissed\n   */\n  endTour(completed = true) {\n    if (!this.currentTour) {\n      return;\n    }\n\n    const tour = this.currentTour;\n    const eventType = completed ? 'tour:completed' : 'tour:dismissed';\n\n    this.renderer.destroy();\n\n    this.engine.trackEvent(completed ? 'tour_completed' : 'tour_dismissed', {\n      tourId: tour.id,\n      completedSteps: this.currentStepIndex + 1,\n      totalSteps: tour.steps.length,\n    });\n\n    if (completed) {\n      this.engine.saveProgress(tour.id, tour.steps.length - 1, 'completed');\n    }\n\n    this.emit(eventType, { tour, completedSteps: this.currentStepIndex + 1 });\n\n    this.currentTour = null;\n    this.currentStepIndex = 0;\n  }\n\n  /**\n   * Go to next step\n   */\n  nextStep() {\n    if (!this.currentTour) {\n      return;\n    }\n\n    const tour = this.currentTour;\n\n    if (this.currentStepIndex >= tour.steps.length - 1) {\n      // Last step, complete the tour\n      this.endTour(true);\n      return;\n    }\n\n    this.emit('step:completed', {\n      tour,\n      step: tour.steps[this.currentStepIndex],\n      stepIndex: this.currentStepIndex,\n    });\n\n    this.currentStepIndex++;\n    this.engine.saveProgress(tour.id, this.currentStepIndex, 'in_progress');\n\n    this._showCurrentStep();\n  }\n\n  /**\n   * Go to previous step\n   */\n  prevStep() {\n    if (!this.currentTour || this.currentStepIndex === 0) {\n      return;\n    }\n\n    this.currentStepIndex--;\n    this._showCurrentStep();\n  }\n\n  /**\n   * Skip the current tour\n   */\n  skipTour() {\n    if (!this.currentTour) {\n      return;\n    }\n\n    this.engine.saveProgress(this.currentTour.id, this.currentStepIndex, 'skipped');\n    this.endTour(false);\n  }\n\n  /**\n   * Go to a specific step\n   * @param {number} stepIndex - Step index (0-based)\n   */\n  goToStep(stepIndex) {\n    if (!this.currentTour) {\n      return;\n    }\n\n    if (stepIndex < 0 || stepIndex >= this.currentTour.steps.length) {\n      console.warn('[BotBuilderTours] Invalid step index');\n      return;\n    }\n\n    this.currentStepIndex = stepIndex;\n    this._showCurrentStep();\n  }\n\n  /**\n   * Get current tour state\n   */\n  getState() {\n    return {\n      initialized: this.initialized,\n      currentTour: this.currentTour,\n      currentStepIndex: this.currentStepIndex,\n      totalSteps: this.currentTour?.steps.length || 0,\n      userId: this.userId,\n      visitorId: this.visitorId,\n    };\n  }\n\n  /**\n   * Reset progress for a tour\n   * @param {string} tourId - Tour ID\n   */\n  resetProgress(tourId) {\n    clearProgress(tourId);\n    this.emit('progress:reset', { tourId });\n  }\n\n  /**\n   * Destroy the SDK instance\n   */\n  destroy() {\n    if (this.currentTour) {\n      this.endTour(false);\n    }\n\n    if (this.renderer) {\n      this.renderer.destroy();\n    }\n\n    this.removeAllListeners();\n    this.initialized = false;\n    this.config = null;\n    this.engine = null;\n    this.renderer = null;\n\n    this.emit('sdk:destroyed');\n  }\n\n  // Private methods\n\n  _showCurrentStep() {\n    const step = this.currentTour.steps[this.currentStepIndex];\n\n    this.renderer.renderStep(step, {\n      tour: this.currentTour,\n      stepIndex: this.currentStepIndex,\n      totalSteps: this.currentTour.steps.length,\n      onNext: () => this.nextStep(),\n      onPrev: () => this.prevStep(),\n      onSkip: () => this.skipTour(),\n      onClose: () => this.endTour(false),\n    });\n\n    this.emit('step:viewed', {\n      tour: this.currentTour,\n      step,\n      stepIndex: this.currentStepIndex,\n    });\n\n    this.engine.trackEvent('step_viewed', {\n      tourId: this.currentTour.id,\n      stepId: step.id,\n      stepIndex: this.currentStepIndex,\n    });\n  }\n\n  async _autoStartTours() {\n    try {\n      const tours = await this.engine.loadActiveTours();\n\n      for (const tour of tours) {\n        const context = {\n          url: window.location.href,\n          pathname: window.location.pathname,\n          userId: this.userId,\n          visitorId: this.visitorId,\n          userTraits: this.userTraits,\n        };\n\n        if (this.engine.shouldShowTour(tour, context)) {\n          await this.startTour(tour.id);\n          break; // Only start one tour at a time\n        }\n      }\n    } catch (error) {\n      console.error('[BotBuilderTours] Failed to auto-start tours:', error);\n    }\n  }\n\n  _applyTheme(theme) {\n    document.documentElement.setAttribute('data-botbuilder-theme', theme);\n  }\n}\n\n// Create singleton instance\nconst instance = new TourSDK();\n\n// Export as global for UMD\nif (typeof window !== 'undefined') {\n  window.BotBuilderTours = instance;\n}\n\nexport default instance;\nexport { TourSDK };\n","/**\n * BotBuilder Tours SDK\n * Entry point for the SDK\n *\n * Usage:\n * <script src=\"https://yourdomain.com/tours-sdk.min.js\"></script>\n * <script>\n *   BotBuilderTours.init({ apiKey: 'xxx' });\n *   BotBuilderTours.startTour('tour-id');\n * </script>\n *\n * SDK Methods:\n * - init(config)        Initialize the SDK\n * - startTour(tourId)   Start a specific tour\n * - stopTour()          Stop the current tour\n * - nextStep()          Go to next step\n * - prevStep()          Go to previous step\n * - goToStep(index)     Go to a specific step\n * - onComplete(cb)      Register completion callback\n * - onSkip(cb)          Register skip callback\n */\n\nimport TourSDKInstance, { TourSDK } from './TourSDK';\nimport { TourEngine } from './TourEngine';\nimport { TourRenderer } from './TourRenderer';\nimport { EventEmitter, EVENTS } from './utils/events';\n\n// SDK instance (singleton)\nconst sdk = TourSDKInstance;\n\n// ==========================================\n// PUBLIC API METHODS\n// ==========================================\n\n/**\n * Initialize the SDK\n * @param {Object} config - Configuration object\n * @param {string} config.apiKey - API key (alias for workspaceId)\n * @param {string} [config.workspaceId] - Workspace ID\n * @param {string} [config.userId] - User ID for targeting\n * @param {boolean} [config.autoStart=true] - Auto start tours\n * @param {string} [config.theme='light'] - Theme: 'light' or 'dark'\n */\nfunction init(config) {\n  // Support apiKey as alias for workspaceId\n  const normalizedConfig = {\n    ...config,\n    workspaceId: config.workspaceId || config.apiKey\n  };\n  return sdk.init(normalizedConfig);\n}\n\n/**\n * Start a specific tour\n * @param {string} tourId - Tour ID to start\n */\nfunction startTour(tourId) {\n  return sdk.startTour(tourId);\n}\n\n/**\n * Stop the current tour\n * Alias for endTour(false)\n */\nfunction stopTour() {\n  return sdk.endTour(false);\n}\n\n/**\n * Go to the next step\n */\nfunction nextStep() {\n  return sdk.nextStep();\n}\n\n/**\n * Go to the previous step\n */\nfunction prevStep() {\n  return sdk.prevStep();\n}\n\n/**\n * Go to a specific step\n * @param {number} index - Step index (0-based)\n */\nfunction goToStep(index) {\n  return sdk.goToStep(index);\n}\n\n/**\n * Register a callback for tour completion\n * @param {Function} callback - Callback function\n */\nfunction onComplete(callback) {\n  sdk.on('tour:completed', callback);\n  return sdk;\n}\n\n/**\n * Register a callback for tour skip\n * @param {Function} callback - Callback function\n */\nfunction onSkip(callback) {\n  sdk.on('tour:dismissed', callback);\n  return sdk;\n}\n\n/**\n * Register a callback for step viewed\n * @param {Function} callback - Callback function\n */\nfunction onStepViewed(callback) {\n  sdk.on('step:viewed', callback);\n  return sdk;\n}\n\n/**\n * Register a callback for step completed\n * @param {Function} callback - Callback function\n */\nfunction onStepComplete(callback) {\n  sdk.on('step:completed', callback);\n  return sdk;\n}\n\n/**\n * Register a callback for tour started\n * @param {Function} callback - Callback function\n */\nfunction onStart(callback) {\n  sdk.on('tour:started', callback);\n  return sdk;\n}\n\n/**\n * Identify a user\n * @param {string} userId - User ID\n * @param {Object} [traits] - User traits for targeting\n */\nfunction identify(userId, traits) {\n  return sdk.identify(userId, traits);\n}\n\n/**\n * Get current tour state\n */\nfunction getState() {\n  return sdk.getState();\n}\n\n/**\n * Reset progress for a tour\n * @param {string} tourId - Tour ID\n */\nfunction resetProgress(tourId) {\n  return sdk.resetProgress(tourId);\n}\n\n/**\n * Destroy the SDK instance\n */\nfunction destroy() {\n  return sdk.destroy();\n}\n\n/**\n * End tour (alias with completion status)\n * @param {boolean} [completed=true] - Whether tour was completed\n */\nfunction endTour(completed = true) {\n  return sdk.endTour(completed);\n}\n\n/**\n * Skip current tour\n */\nfunction skipTour() {\n  return sdk.skipTour();\n}\n\n// ==========================================\n// EXPORTS\n// ==========================================\n\n// Named exports for direct access\nexport {\n  // Core API methods\n  init,\n  startTour,\n  stopTour,\n  nextStep,\n  prevStep,\n  goToStep,\n  onComplete,\n  onSkip,\n  onStepViewed,\n  onStepComplete,\n  onStart,\n  identify,\n  getState,\n  resetProgress,\n  destroy,\n  endTour,\n  skipTour,\n\n  // Classes for advanced usage\n  TourSDK,\n  TourEngine,\n  TourRenderer,\n  EventEmitter,\n  EVENTS\n};\n\n// Export utilities for custom implementations\nexport * from './utils/dom';\nexport * from './utils/positioning';\nexport * from './utils/storage';\nexport * from './utils/api';\nexport * from './utils/events';\n\n// Export components for custom rendering\nexport { Tooltip } from './components/Tooltip';\nexport { Modal } from './components/Modal';\nexport { Hotspot } from './components/Hotspot';\nexport { Slideout } from './components/Slideout';\nexport { Overlay, Highlight } from './components/Overlay';\nexport { ProgressBar, ProgressDots } from './components/ProgressBar';\n\n// Default export - SDK instance with all methods\nexport default {\n  // SDK instance\n  sdk,\n\n  // Public API methods\n  init,\n  startTour,\n  stopTour,\n  nextStep,\n  prevStep,\n  goToStep,\n  onComplete,\n  onSkip,\n  onStepViewed,\n  onStepComplete,\n  onStart,\n  identify,\n  getState,\n  resetProgress,\n  destroy,\n  endTour,\n  skipTour,\n\n  // Classes\n  TourSDK,\n  TourEngine,\n  TourRenderer,\n  EventEmitter,\n  EVENTS\n};\n"],"names":["API_URL","WORKSPACE_ID","initApi","apiUrl","workspaceId","request","endpoint","options","url","defaultHeaders","response","fetch","headers","ok","errorData","json","catch","Error","message","status","error","console","initSession","visitorId","userId","method","body","JSON","stringify","window","location","href","referrer","document","userAgent","navigator","timestamp","Date","toISOString","fetchActiveTours","params","URLSearchParams","pathname","append","toString","tours","fetchTour","tourId","tour","trackEvent","eventData","payload","sessionId","getSessionId","pageUrl","pageTitle","title","sendBeacon","blob","Blob","type","syncProgress","progressData","fetchProgress","batchTrackEvents","events","reportError","now","Math","random","substring","eventQueue","isOnline","onLine","addEventListener","flushEventQueue","queueEvent","push","queuedAt","length","STORAGE_PREFIX","VISITOR_ID_KEY","PROGRESS_KEY","SESSION_KEY","generateVisitorId","randomPart","getVisitorId","localStorage","getItem","setItem","warn","setVisitorId","getProgress","data","parse","setProgress","clearProgress","removeItem","clearAllProgress","keys","Object","forEach","key","startsWith","getAllProgress","progress","replace","getSession","sessionStorage","setSession","existing","clearSession","isTourCompleted","isTourSkipped","getCurrentStep","currentStep","markTourAsSeen","seen","seenAt","hasTourBeenSeen","dismissTourForSession","session","dismissed","includes","isTourDismissedForSession","getStorageInfo","totalSize","tourDataSize","hasOwnProperty","size","totalSizeKB","toFixed","tourDataSizeKB","TourEngine","constructor","sdk","toursCache","Map","activeToursCache","lastFetch","cacheDuration","loadActiveTours","config","set","id","loadTour","has","get","checkTargeting","targeting","rules","context","hostname","search","hash","userTraits","device","_getDeviceInfo","operator","every","rule","_evaluateRule","some","shouldShowTour","startDate","endDate","getUserProgress","settings","allowReplay","skipCooldown","cooldownEnd","updatedAt","getTime","currentUrl","pageUrlMatch","regex","RegExp","test","eventType","apiTrackEvent","saveProgress","clearCache","clear","field","value","fieldValue","_getUrlField","_getUserField","_compareValues","targetValue","undefined","strValue","String","toLowerCase","strTarget","endsWith","Number","list","Array","isArray","split","map","v","trim","notList","ua","_getDeviceType","browser","_getBrowser","os","_getOS","screenWidth","screen","width","screenHeight","height","language","SPACING","calculatePosition","targetRect","tooltipRect","preferredPosition","positions","top","left","bottom","right","viewportWidth","innerWidth","viewportHeight","innerHeight","fits","position","actualPosition","adjustForViewport","dimensions","padding","getArrowPosition","arrowPositions","calculateArrowOffset","tooltipCenter","targetCenter","offset","direction","getOptimalPosition","tooltipSize","spaceAbove","spaceBelow","spaceLeft","spaceRight","spaces","space","fittingPositions","entries","filter","sort","a","b","allPositions","calculateModalPosition","modalSize","alignment","calculateSlideoutPosition","side","checkOverflow","overflowTop","overflowRight","overflowBottom","overflowLeft","getCenteredPosition","Tooltip","content","targetElement","media","buttons","stepIndex","totalSteps","showBackButton","showSkipButton","onNext","onPrev","onSkip","onClose","theme","primaryColor","element","arrowElement","_resizeHandler","_scrollHandler","render","container","_createTooltip","appendChild","_positionTooltip","_setupListeners","_animateIn","destroy","_removeListeners","parentNode","classList","add","setTimeout","removeChild","createElement","className","style","setProperty","wrapper","closeBtn","innerHTML","setAttribute","onclick","e","preventDefault","mediaEl","_createMedia","header","titleEl","textContent","contentEl","footer","actions","btn","button","variant","text","action","onClick","skipBtn","backBtn","nextBtn","img","src","alt","video","controls","autoplay","muted","loop","iframe","allowFullscreen","transform","display","getBoundingClientRect","adjusted","arrowPosition","_keyHandler","removeEventListener","requestAnimationFrame","Modal","closeOnBackdrop","closeOnEscape","backdropElement","_createBackdrop","_createModal","focus","target","i","dot","lottieContainer","Hotspot","color","pulse","triggerOn","hotspotElement","tooltipElement","isTooltipVisible","_createHotspot","_positionHotspot","backgroundColor","ring","borderColor","arrow","stopPropagation","hotspotRect","querySelector","_showTooltip","_hideTooltip","remove","_toggleTooltip","onmouseenter","onmouseleave","matches","_clickOutsideHandler","contains","Slideout","showOverlay","closeOnOverlay","overlayElement","_createOverlay","_createSlideout","progressBar","progressFill","progressText","buttonGroup","Overlay","opacity","borderRadius","spotlightElement","_updateSpotlight","svg","createElementNS","defs","mask","maskRect","overlayRect","tagName","rect","Highlight","borderWidth","_createHighlight","_updatePosition","border","boxShadow","ProgressBar","current","total","showStepNumbers","_createProgressBar","update","_updateProgress","track","step","connector","steps","querySelectorAll","connectors","toggle","ProgressDots","_createDots","_updateDots","dots","findElement","selector","isElementVisible","getComputedStyle","visibility","parseFloat","documentElement","clientHeight","clientWidth","isElementFullyVisible","getElementPosition","scrollLeft","pageXOffset","scrollTop","pageYOffset","absoluteTop","absoluteLeft","centerX","centerY","scrollToElement","Promise","resolve","behavior","block","inline","scrollIntoView","scrollBy","scrollTimeout","waitForElement","timeout","startTime","observer","MutationObserver","mutations","obs","disconnect","observe","childList","subtree","attributes","waitForElementVisible","highlightElement","duration","originalOutline","outline","originalTransition","transition","cleanup","getFocusableElements","focusableSelectors","join","from","createFocusTrap","focusableElements","firstElement","lastElement","handleKeyDown","shiftKey","activeElement","getZIndex","el","zIndex","z","parseInt","isNaN","parentElement","TourRenderer","currentComponent","overlay","hotspots","_createContainer","renderStep","_cleanup","targetSelector","waitTimeout","scrollTo","scrollBehavior","scrollBlock","overlayClickClose","overlayPadding","overlayOpacity","showProgress","componentOptions","_renderTooltip","_renderModal","_renderHotspot","_renderSlideout","_setupStepTriggers","rest","hotspotColor","slidePosition","slideWidth","trigger","event","clickHandler","_triggerCleanup","inputHandler","customHandler","getElementById","hotspot","EventEmitter","_events","_onceEvents","on","callback","once","off","cb","removeAllListeners","emit","args","hasListeners","callbacks","listenerCount","regular","eventNames","Set","listeners","EVENTS","SDK_INITIALIZED","SDK_DESTROYED","USER_IDENTIFIED","TOUR_STARTED","TOUR_COMPLETED","TOUR_DISMISSED","TOUR_ERROR","STEP_VIEWED","STEP_COMPLETED","STEP_SKIPPED","PROGRESS_SAVED","PROGRESS_RESET","createTypedEmitter","emitter","debounce","func","wait","executedFunction","later","clearTimeout","throttle","limit","inThrottle","TourSDK","engine","renderer","currentTour","currentStepIndex","initialized","init","autoStart","_applyTheme","_autoStartTours","identify","traits","startTour","_showCurrentStep","endTour","completed","completedSteps","nextStep","prevStep","skipTour","goToStep","getState","resetProgress","stepId","instance","BotBuilderTours","TourSDKInstance","normalizedConfig","apiKey","stopTour","index","onComplete","onStepViewed","onStepComplete","onStart"],"mappings":"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"}