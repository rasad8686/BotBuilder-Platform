{"version":3,"file":"tours-sdk.esm.js","sources":["../src/sdk/tours/utils/api.js","../src/sdk/tours/utils/storage.js","../src/sdk/tours/TourEngine.js","../src/sdk/tours/utils/positioning.js","../src/sdk/tours/components/Tooltip.js","../src/sdk/tours/components/Modal.js","../src/sdk/tours/components/Hotspot.js","../src/sdk/tours/components/Slideout.js","../src/sdk/tours/components/Overlay.js","../src/sdk/tours/components/ProgressBar.js","../src/sdk/tours/utils/dom.js","../src/sdk/tours/TourRenderer.js","../src/sdk/tours/utils/events.js","../src/sdk/tours/TourSDK.js","../src/sdk/tours/index.js"],"sourcesContent":["/**\n * API Utilities\n * Handles communication with the BotBuilder Tours API\n */\n\nlet API_URL = 'https://api.botbuilder.app';\nlet WORKSPACE_ID = null;\n\n/**\n * Initialize API configuration\n * @param {string} apiUrl - API base URL\n * @param {string} workspaceId - Workspace ID\n */\nexport function initApi(apiUrl, workspaceId) {\n  API_URL = apiUrl;\n  WORKSPACE_ID = workspaceId;\n}\n\n/**\n * Make an API request\n * @param {string} endpoint - API endpoint\n * @param {Object} options - Fetch options\n * @returns {Promise<Object>}\n */\nasync function request(endpoint, options = {}) {\n  const url = `${API_URL}${endpoint}`;\n\n  const defaultHeaders = {\n    'Content-Type': 'application/json',\n    'X-Workspace-ID': WORKSPACE_ID,\n  };\n\n  try {\n    const response = await fetch(url, {\n      ...options,\n      headers: {\n        ...defaultHeaders,\n        ...options.headers,\n      },\n    });\n\n    if (!response.ok) {\n      const errorData = await response.json().catch(() => ({}));\n      throw new Error(errorData.message || `HTTP ${response.status}`);\n    }\n\n    return await response.json();\n  } catch (error) {\n    console.error(`[TourSDK API] Request failed: ${endpoint}`, error);\n    throw error;\n  }\n}\n\n/**\n * Initialize session and fetch active tours\n * @param {string} workspaceId - Workspace ID\n * @param {Object} options - Options\n * @returns {Promise<Object>}\n */\nexport async function initSession(workspaceId, options = {}) {\n  const { visitorId, userId } = options;\n\n  return request('/api/public/tours/init', {\n    method: 'POST',\n    body: JSON.stringify({\n      workspaceId,\n      visitorId,\n      userId,\n      url: window.location.href,\n      referrer: document.referrer,\n      userAgent: navigator.userAgent,\n      timestamp: new Date().toISOString(),\n    }),\n  });\n}\n\n/**\n * Fetch active tours for a workspace\n * @param {string} workspaceId - Workspace ID\n * @param {Object} options - Options\n * @returns {Promise<Array>}\n */\nexport async function fetchActiveTours(workspaceId, options = {}) {\n  const { visitorId, userId } = options;\n\n  const params = new URLSearchParams({\n    workspaceId,\n    url: window.location.pathname,\n  });\n\n  if (visitorId) params.append('visitorId', visitorId);\n  if (userId) params.append('userId', userId);\n\n  const response = await request(`/api/public/tours?${params.toString()}`);\n  return response.tours || [];\n}\n\n/**\n * Fetch a specific tour\n * @param {string} tourId - Tour ID\n * @returns {Promise<Object>}\n */\nexport async function fetchTour(tourId) {\n  const response = await request(`/api/public/tours/${tourId}`);\n  return response.tour || response;\n}\n\n/**\n * Track an analytics event\n * @param {Object} eventData - Event data\n * @returns {Promise}\n */\nexport async function trackEvent(eventData) {\n  const payload = {\n    ...eventData,\n    workspaceId: WORKSPACE_ID,\n    timestamp: eventData.timestamp || new Date().toISOString(),\n    sessionId: getSessionId(),\n    pageUrl: window.location.href,\n    pageTitle: document.title,\n  };\n\n  // Use sendBeacon for reliability (especially on page unload)\n  if (navigator.sendBeacon) {\n    const blob = new Blob([JSON.stringify(payload)], { type: 'application/json' });\n    navigator.sendBeacon(`${API_URL}/api/public/tours/event`, blob);\n    return;\n  }\n\n  // Fallback to fetch\n  return request('/api/public/tours/event', {\n    method: 'POST',\n    body: JSON.stringify(payload),\n  });\n}\n\n/**\n * Sync progress with server\n * @param {Object} progressData - Progress data\n * @returns {Promise}\n */\nexport async function syncProgress(progressData) {\n  return request('/api/public/tours/progress', {\n    method: 'POST',\n    body: JSON.stringify({\n      ...progressData,\n      workspaceId: WORKSPACE_ID,\n    }),\n  });\n}\n\n/**\n * Get user progress from server\n * @param {string} tourId - Tour ID\n * @param {string} visitorId - Visitor ID\n * @returns {Promise<Object>}\n */\nexport async function fetchProgress(tourId, visitorId) {\n  const params = new URLSearchParams({\n    tourId,\n    visitorId,\n  });\n\n  return request(`/api/public/tours/progress?${params.toString()}`);\n}\n\n/**\n * Batch track multiple events\n * @param {Array} events - Array of event data\n * @returns {Promise}\n */\nexport async function batchTrackEvents(events) {\n  return request('/api/public/tours/events/batch', {\n    method: 'POST',\n    body: JSON.stringify({\n      events,\n      workspaceId: WORKSPACE_ID,\n    }),\n  });\n}\n\n/**\n * Report an error\n * @param {Object} errorData - Error data\n * @returns {Promise}\n */\nexport async function reportError(errorData) {\n  try {\n    return request('/api/public/tours/error', {\n      method: 'POST',\n      body: JSON.stringify({\n        ...errorData,\n        workspaceId: WORKSPACE_ID,\n        url: window.location.href,\n        userAgent: navigator.userAgent,\n        timestamp: new Date().toISOString(),\n      }),\n    });\n  } catch (error) {\n    // Silently fail - don't want error reporting to cause more errors\n    console.error('[TourSDK] Failed to report error:', error);\n  }\n}\n\n// Session management\n\nlet sessionId = null;\n\nfunction getSessionId() {\n  if (!sessionId) {\n    sessionId = `s_${Date.now().toString(36)}_${Math.random().toString(36).substring(2, 8)}`;\n  }\n  return sessionId;\n}\n\n/**\n * Event queue for offline support\n */\nconst eventQueue = [];\nlet isOnline = navigator.onLine;\n\n// Monitor online status\nif (typeof window !== 'undefined') {\n  window.addEventListener('online', () => {\n    isOnline = true;\n    flushEventQueue();\n  });\n\n  window.addEventListener('offline', () => {\n    isOnline = false;\n  });\n}\n\n/**\n * Queue an event for later sending\n * @param {Object} eventData\n */\nexport function queueEvent(eventData) {\n  eventQueue.push({\n    ...eventData,\n    queuedAt: new Date().toISOString(),\n  });\n\n  // Try to flush immediately if online\n  if (isOnline) {\n    flushEventQueue();\n  }\n}\n\n/**\n * Flush the event queue\n */\nasync function flushEventQueue() {\n  if (eventQueue.length === 0 || !isOnline) return;\n\n  const events = [...eventQueue];\n  eventQueue.length = 0;\n\n  try {\n    await batchTrackEvents(events);\n  } catch (error) {\n    // Re-queue failed events\n    eventQueue.push(...events);\n    console.error('[TourSDK] Failed to flush event queue:', error);\n  }\n}\n\n// Flush queue before page unload\nif (typeof window !== 'undefined') {\n  window.addEventListener('beforeunload', () => {\n    if (eventQueue.length > 0 && navigator.sendBeacon) {\n      const blob = new Blob(\n        [JSON.stringify({ events: eventQueue, workspaceId: WORKSPACE_ID })],\n        { type: 'application/json' }\n      );\n      navigator.sendBeacon(`${API_URL}/api/public/tours/events/batch`, blob);\n    }\n  });\n}\n","/**\n * Storage Utilities\n * Handles localStorage operations for visitor ID and progress\n */\n\nconst STORAGE_PREFIX = 'bbt_tours_';\nconst VISITOR_ID_KEY = `${STORAGE_PREFIX}visitor_id`;\nconst PROGRESS_KEY = `${STORAGE_PREFIX}progress_`;\nconst SESSION_KEY = `${STORAGE_PREFIX}session`;\n\n/**\n * Generate a unique visitor ID\n * @returns {string}\n */\nfunction generateVisitorId() {\n  const timestamp = Date.now().toString(36);\n  const randomPart = Math.random().toString(36).substring(2, 10);\n  return `v_${timestamp}_${randomPart}`;\n}\n\n/**\n * Get or generate visitor ID\n * @returns {string}\n */\nexport function getVisitorId() {\n  try {\n    let visitorId = localStorage.getItem(VISITOR_ID_KEY);\n\n    if (!visitorId) {\n      visitorId = generateVisitorId();\n      localStorage.setItem(VISITOR_ID_KEY, visitorId);\n    }\n\n    return visitorId;\n  } catch (error) {\n    // localStorage might be disabled\n    console.warn('[TourSDK] localStorage not available, using session visitor ID');\n    return generateVisitorId();\n  }\n}\n\n/**\n * Set visitor ID\n * @param {string} visitorId\n */\nexport function setVisitorId(visitorId) {\n  try {\n    localStorage.setItem(VISITOR_ID_KEY, visitorId);\n  } catch (error) {\n    console.warn('[TourSDK] Failed to save visitor ID');\n  }\n}\n\n/**\n * Get progress for a tour\n * @param {string} tourId\n * @returns {Object|null}\n */\nexport function getProgress(tourId) {\n  try {\n    const data = localStorage.getItem(`${PROGRESS_KEY}${tourId}`);\n    return data ? JSON.parse(data) : null;\n  } catch (error) {\n    console.warn('[TourSDK] Failed to get progress');\n    return null;\n  }\n}\n\n/**\n * Set progress for a tour\n * @param {string} tourId\n * @param {Object} data\n */\nexport function setProgress(tourId, data) {\n  try {\n    localStorage.setItem(`${PROGRESS_KEY}${tourId}`, JSON.stringify(data));\n  } catch (error) {\n    console.warn('[TourSDK] Failed to save progress');\n  }\n}\n\n/**\n * Clear progress for a tour\n * @param {string} tourId\n */\nexport function clearProgress(tourId) {\n  try {\n    localStorage.removeItem(`${PROGRESS_KEY}${tourId}`);\n  } catch (error) {\n    console.warn('[TourSDK] Failed to clear progress');\n  }\n}\n\n/**\n * Clear all tour progress\n */\nexport function clearAllProgress() {\n  try {\n    const keys = Object.keys(localStorage);\n    keys.forEach((key) => {\n      if (key.startsWith(PROGRESS_KEY)) {\n        localStorage.removeItem(key);\n      }\n    });\n  } catch (error) {\n    console.warn('[TourSDK] Failed to clear all progress');\n  }\n}\n\n/**\n * Get all tour progress\n * @returns {Object}\n */\nexport function getAllProgress() {\n  try {\n    const progress = {};\n    const keys = Object.keys(localStorage);\n\n    keys.forEach((key) => {\n      if (key.startsWith(PROGRESS_KEY)) {\n        const tourId = key.replace(PROGRESS_KEY, '');\n        const data = localStorage.getItem(key);\n        if (data) {\n          progress[tourId] = JSON.parse(data);\n        }\n      }\n    });\n\n    return progress;\n  } catch (error) {\n    console.warn('[TourSDK] Failed to get all progress');\n    return {};\n  }\n}\n\n/**\n * Get session data\n * @returns {Object}\n */\nexport function getSession() {\n  try {\n    const data = sessionStorage.getItem(SESSION_KEY);\n    return data ? JSON.parse(data) : {};\n  } catch (error) {\n    return {};\n  }\n}\n\n/**\n * Set session data\n * @param {Object} data\n */\nexport function setSession(data) {\n  try {\n    const existing = getSession();\n    sessionStorage.setItem(SESSION_KEY, JSON.stringify({ ...existing, ...data }));\n  } catch (error) {\n    console.warn('[TourSDK] Failed to save session data');\n  }\n}\n\n/**\n * Clear session data\n */\nexport function clearSession() {\n  try {\n    sessionStorage.removeItem(SESSION_KEY);\n  } catch (error) {\n    console.warn('[TourSDK] Failed to clear session');\n  }\n}\n\n/**\n * Check if a tour has been completed\n * @param {string} tourId\n * @returns {boolean}\n */\nexport function isTourCompleted(tourId) {\n  const progress = getProgress(tourId);\n  return progress?.status === 'completed';\n}\n\n/**\n * Check if a tour has been skipped\n * @param {string} tourId\n * @returns {boolean}\n */\nexport function isTourSkipped(tourId) {\n  const progress = getProgress(tourId);\n  return progress?.status === 'skipped';\n}\n\n/**\n * Get the current step for a tour\n * @param {string} tourId\n * @returns {number}\n */\nexport function getCurrentStep(tourId) {\n  const progress = getProgress(tourId);\n  return progress?.currentStep ?? 0;\n}\n\n/**\n * Mark a tour as seen (started at least once)\n * @param {string} tourId\n */\nexport function markTourAsSeen(tourId) {\n  const progress = getProgress(tourId) || {};\n  setProgress(tourId, {\n    ...progress,\n    seen: true,\n    seenAt: new Date().toISOString(),\n  });\n}\n\n/**\n * Check if a tour has been seen\n * @param {string} tourId\n * @returns {boolean}\n */\nexport function hasTourBeenSeen(tourId) {\n  const progress = getProgress(tourId);\n  return !!progress?.seen;\n}\n\n/**\n * Store dismissed tours for the session\n * @param {string} tourId\n */\nexport function dismissTourForSession(tourId) {\n  const session = getSession();\n  const dismissed = session.dismissed || [];\n\n  if (!dismissed.includes(tourId)) {\n    dismissed.push(tourId);\n    setSession({ dismissed });\n  }\n}\n\n/**\n * Check if a tour is dismissed for this session\n * @param {string} tourId\n * @returns {boolean}\n */\nexport function isTourDismissedForSession(tourId) {\n  const session = getSession();\n  return session.dismissed?.includes(tourId) || false;\n}\n\n/**\n * Get storage usage info\n * @returns {Object}\n */\nexport function getStorageInfo() {\n  try {\n    let totalSize = 0;\n    let tourDataSize = 0;\n\n    for (const key in localStorage) {\n      if (localStorage.hasOwnProperty(key)) {\n        const size = localStorage[key].length * 2; // UTF-16\n        totalSize += size;\n\n        if (key.startsWith(STORAGE_PREFIX)) {\n          tourDataSize += size;\n        }\n      }\n    }\n\n    return {\n      totalSize,\n      tourDataSize,\n      totalSizeKB: (totalSize / 1024).toFixed(2),\n      tourDataSizeKB: (tourDataSize / 1024).toFixed(2),\n    };\n  } catch (error) {\n    return { error: 'Unable to calculate storage info' };\n  }\n}\n","/**\n * TourEngine - Handles tour logic, targeting, and API communication\n */\n\nimport { fetchActiveTours, fetchTour, trackEvent as apiTrackEvent, syncProgress } from './utils/api';\nimport { getProgress, setProgress } from './utils/storage';\n\nexport class TourEngine {\n  constructor(sdk) {\n    this.sdk = sdk;\n    this.toursCache = new Map();\n    this.activeToursCache = null;\n    this.lastFetch = 0;\n    this.cacheDuration = 5 * 60 * 1000; // 5 minutes\n  }\n\n  /**\n   * Load all active tours for the workspace\n   */\n  async loadActiveTours() {\n    const now = Date.now();\n\n    // Use cache if valid\n    if (this.activeToursCache && now - this.lastFetch < this.cacheDuration) {\n      return this.activeToursCache;\n    }\n\n    try {\n      const tours = await fetchActiveTours(this.sdk.config.workspaceId, {\n        visitorId: this.sdk.visitorId,\n        userId: this.sdk.userId,\n      });\n\n      this.activeToursCache = tours;\n      this.lastFetch = now;\n\n      // Cache individual tours\n      tours.forEach((tour) => {\n        this.toursCache.set(tour.id, tour);\n      });\n\n      return tours;\n    } catch (error) {\n      console.error('[TourEngine] Failed to load active tours:', error);\n      return [];\n    }\n  }\n\n  /**\n   * Load a specific tour by ID\n   * @param {string} tourId - Tour ID\n   */\n  async loadTour(tourId) {\n    // Check cache first\n    if (this.toursCache.has(tourId)) {\n      return this.toursCache.get(tourId);\n    }\n\n    try {\n      const tour = await fetchTour(tourId);\n      this.toursCache.set(tourId, tour);\n      return tour;\n    } catch (error) {\n      console.error(`[TourEngine] Failed to load tour ${tourId}:`, error);\n      return null;\n    }\n  }\n\n  /**\n   * Check if targeting rules match current context\n   * @param {Object} tour - Tour object\n   * @returns {boolean}\n   */\n  checkTargeting(tour) {\n    if (!tour.targeting || !tour.targeting.rules || tour.targeting.rules.length === 0) {\n      return true; // No targeting rules = show to everyone\n    }\n\n    const context = {\n      url: window.location.href,\n      pathname: window.location.pathname,\n      hostname: window.location.hostname,\n      search: window.location.search,\n      hash: window.location.hash,\n      referrer: document.referrer,\n      userId: this.sdk.userId,\n      visitorId: this.sdk.visitorId,\n      userTraits: this.sdk.userTraits,\n      device: this._getDeviceInfo(),\n      timestamp: Date.now(),\n    };\n\n    const { operator = 'AND', rules } = tour.targeting;\n\n    if (operator === 'AND') {\n      return rules.every((rule) => this._evaluateRule(rule, context));\n    } else if (operator === 'OR') {\n      return rules.some((rule) => this._evaluateRule(rule, context));\n    }\n\n    return true;\n  }\n\n  /**\n   * Determine if a tour should be shown\n   * @param {Object} tour - Tour object\n   * @param {Object} context - Current context\n   * @returns {boolean}\n   */\n  shouldShowTour(tour, context) {\n    // Check if tour is active\n    if (tour.status !== 'active') {\n      return false;\n    }\n\n    // Check date range\n    if (tour.startDate && new Date(tour.startDate) > new Date()) {\n      return false;\n    }\n    if (tour.endDate && new Date(tour.endDate) < new Date()) {\n      return false;\n    }\n\n    // Check frequency limits\n    const progress = this.getUserProgress(tour.id);\n    if (progress) {\n      // Already completed\n      if (progress.status === 'completed' && !tour.settings?.allowReplay) {\n        return false;\n      }\n\n      // Skipped and skip cooldown not passed\n      if (progress.status === 'skipped' && tour.settings?.skipCooldown) {\n        const cooldownEnd = new Date(progress.updatedAt).getTime() + tour.settings.skipCooldown;\n        if (Date.now() < cooldownEnd) {\n          return false;\n        }\n      }\n    }\n\n    // Check targeting rules\n    if (!this.checkTargeting(tour)) {\n      return false;\n    }\n\n    // Check page URL matching\n    if (tour.pageUrl) {\n      const currentUrl = window.location.pathname;\n      if (tour.pageUrlMatch === 'exact') {\n        if (currentUrl !== tour.pageUrl) return false;\n      } else if (tour.pageUrlMatch === 'contains') {\n        if (!currentUrl.includes(tour.pageUrl)) return false;\n      } else if (tour.pageUrlMatch === 'regex') {\n        try {\n          const regex = new RegExp(tour.pageUrl);\n          if (!regex.test(currentUrl)) return false;\n        } catch {\n          return false;\n        }\n      }\n    }\n\n    return true;\n  }\n\n  /**\n   * Track an analytics event\n   * @param {string} eventType - Event type\n   * @param {Object} data - Event data\n   */\n  async trackEvent(eventType, data) {\n    try {\n      await apiTrackEvent({\n        eventType,\n        ...data,\n        visitorId: this.sdk.visitorId,\n        userId: this.sdk.userId,\n        timestamp: new Date().toISOString(),\n        url: window.location.href,\n        userAgent: navigator.userAgent,\n      });\n    } catch (error) {\n      console.error('[TourEngine] Failed to track event:', error);\n    }\n  }\n\n  /**\n   * Get user progress for a tour\n   * @param {string} tourId - Tour ID\n   * @returns {Object|null}\n   */\n  getUserProgress(tourId) {\n    return getProgress(tourId);\n  }\n\n  /**\n   * Save user progress\n   * @param {string} tourId - Tour ID\n   * @param {number} currentStep - Current step index\n   * @param {string} status - Status: 'in_progress', 'completed', 'skipped'\n   */\n  async saveProgress(tourId, currentStep, status) {\n    const data = {\n      tourId,\n      currentStep,\n      status,\n      visitorId: this.sdk.visitorId,\n      userId: this.sdk.userId,\n      updatedAt: new Date().toISOString(),\n    };\n\n    // Save locally\n    setProgress(tourId, data);\n\n    // Sync with server\n    try {\n      await syncProgress(data);\n    } catch (error) {\n      console.error('[TourEngine] Failed to sync progress:', error);\n    }\n  }\n\n  /**\n   * Clear cache\n   */\n  clearCache() {\n    this.toursCache.clear();\n    this.activeToursCache = null;\n    this.lastFetch = 0;\n  }\n\n  // Private methods\n\n  _evaluateRule(rule, context) {\n    const { type, field, operator, value } = rule;\n\n    let fieldValue;\n\n    switch (type) {\n      case 'url':\n        fieldValue = this._getUrlField(field, context);\n        break;\n      case 'user':\n        fieldValue = this._getUserField(field, context);\n        break;\n      case 'device':\n        fieldValue = context.device[field];\n        break;\n      case 'custom':\n        fieldValue = context.userTraits[field];\n        break;\n      default:\n        return true;\n    }\n\n    return this._compareValues(fieldValue, operator, value);\n  }\n\n  _getUrlField(field, context) {\n    switch (field) {\n      case 'pathname':\n        return context.pathname;\n      case 'hostname':\n        return context.hostname;\n      case 'search':\n        return context.search;\n      case 'hash':\n        return context.hash;\n      case 'full':\n        return context.url;\n      case 'referrer':\n        return context.referrer;\n      default:\n        return context.url;\n    }\n  }\n\n  _getUserField(field, context) {\n    switch (field) {\n      case 'id':\n        return context.userId;\n      case 'visitorId':\n        return context.visitorId;\n      default:\n        return context.userTraits[field];\n    }\n  }\n\n  _compareValues(fieldValue, operator, targetValue) {\n    if (fieldValue === undefined || fieldValue === null) {\n      return operator === 'not_exists' || operator === 'is_empty';\n    }\n\n    const strValue = String(fieldValue).toLowerCase();\n    const strTarget = String(targetValue).toLowerCase();\n\n    switch (operator) {\n      case 'equals':\n        return strValue === strTarget;\n      case 'not_equals':\n        return strValue !== strTarget;\n      case 'contains':\n        return strValue.includes(strTarget);\n      case 'not_contains':\n        return !strValue.includes(strTarget);\n      case 'starts_with':\n        return strValue.startsWith(strTarget);\n      case 'ends_with':\n        return strValue.endsWith(strTarget);\n      case 'matches_regex':\n        try {\n          return new RegExp(targetValue, 'i').test(fieldValue);\n        } catch {\n          return false;\n        }\n      case 'greater_than':\n        return Number(fieldValue) > Number(targetValue);\n      case 'less_than':\n        return Number(fieldValue) < Number(targetValue);\n      case 'exists':\n        return fieldValue !== undefined && fieldValue !== null;\n      case 'not_exists':\n        return fieldValue === undefined || fieldValue === null;\n      case 'is_empty':\n        return strValue === '';\n      case 'is_not_empty':\n        return strValue !== '';\n      case 'in_list':\n        const list = Array.isArray(targetValue) ? targetValue : targetValue.split(',');\n        return list.map((v) => v.trim().toLowerCase()).includes(strValue);\n      case 'not_in_list':\n        const notList = Array.isArray(targetValue) ? targetValue : targetValue.split(',');\n        return !notList.map((v) => v.trim().toLowerCase()).includes(strValue);\n      default:\n        return true;\n    }\n  }\n\n  _getDeviceInfo() {\n    const ua = navigator.userAgent;\n\n    return {\n      type: this._getDeviceType(ua),\n      browser: this._getBrowser(ua),\n      os: this._getOS(ua),\n      screenWidth: window.screen.width,\n      screenHeight: window.screen.height,\n      language: navigator.language,\n    };\n  }\n\n  _getDeviceType(ua) {\n    if (/tablet|ipad|playbook|silk/i.test(ua)) {\n      return 'tablet';\n    }\n    if (/mobile|iphone|ipod|android|blackberry|opera mini|iemobile/i.test(ua)) {\n      return 'mobile';\n    }\n    return 'desktop';\n  }\n\n  _getBrowser(ua) {\n    if (/edge/i.test(ua)) return 'edge';\n    if (/chrome/i.test(ua)) return 'chrome';\n    if (/firefox/i.test(ua)) return 'firefox';\n    if (/safari/i.test(ua)) return 'safari';\n    if (/msie|trident/i.test(ua)) return 'ie';\n    return 'unknown';\n  }\n\n  _getOS(ua) {\n    if (/windows/i.test(ua)) return 'windows';\n    if (/macintosh|mac os x/i.test(ua)) return 'macos';\n    if (/linux/i.test(ua)) return 'linux';\n    if (/android/i.test(ua)) return 'android';\n    if (/ios|iphone|ipad|ipod/i.test(ua)) return 'ios';\n    return 'unknown';\n  }\n}\n","/**\n * Positioning Utilities\n * Handles tooltip/modal positioning and viewport adjustments\n */\n\nconst ARROW_SIZE = 8;\nconst SPACING = 12;\n\n/**\n * Calculate position for tooltip relative to target element\n * @param {DOMRect} targetRect - Target element bounding rect\n * @param {DOMRect} tooltipRect - Tooltip element bounding rect\n * @param {string} preferredPosition - Preferred position (top, bottom, left, right, auto)\n * @returns {Object} - { top, left, actualPosition }\n */\nexport function calculatePosition(targetRect, tooltipRect, preferredPosition = 'bottom') {\n  const positions = {\n    top: {\n      top: targetRect.top - tooltipRect.height - SPACING,\n      left: targetRect.left + targetRect.width / 2 - tooltipRect.width / 2,\n    },\n    bottom: {\n      top: targetRect.bottom + SPACING,\n      left: targetRect.left + targetRect.width / 2 - tooltipRect.width / 2,\n    },\n    left: {\n      top: targetRect.top + targetRect.height / 2 - tooltipRect.height / 2,\n      left: targetRect.left - tooltipRect.width - SPACING,\n    },\n    right: {\n      top: targetRect.top + targetRect.height / 2 - tooltipRect.height / 2,\n      left: targetRect.right + SPACING,\n    },\n  };\n\n  // Auto position - find best fit\n  if (preferredPosition === 'auto') {\n    const viewportWidth = window.innerWidth;\n    const viewportHeight = window.innerHeight;\n\n    // Check which positions fit in viewport\n    const fits = {\n      top: positions.top.top >= 0,\n      bottom: positions.bottom.top + tooltipRect.height <= viewportHeight,\n      left: positions.left.left >= 0,\n      right: positions.right.left + tooltipRect.width <= viewportWidth,\n    };\n\n    // Priority: bottom > top > right > left\n    if (fits.bottom) preferredPosition = 'bottom';\n    else if (fits.top) preferredPosition = 'top';\n    else if (fits.right) preferredPosition = 'right';\n    else if (fits.left) preferredPosition = 'left';\n    else preferredPosition = 'bottom'; // Default fallback\n  }\n\n  const position = positions[preferredPosition] || positions.bottom;\n\n  return {\n    top: position.top,\n    left: position.left,\n    actualPosition: preferredPosition,\n  };\n}\n\n/**\n * Adjust position to fit within viewport\n * @param {Object} position - { top, left }\n * @param {Object} dimensions - { width, height }\n * @returns {Object} - Adjusted { top, left }\n */\nexport function adjustForViewport(position, dimensions) {\n  const viewportWidth = window.innerWidth;\n  const viewportHeight = window.innerHeight;\n  const padding = 10; // Minimum distance from viewport edge\n\n  let { top, left } = position;\n  const { width, height } = dimensions;\n\n  // Horizontal adjustment\n  if (left < padding) {\n    left = padding;\n  } else if (left + width > viewportWidth - padding) {\n    left = viewportWidth - width - padding;\n  }\n\n  // Vertical adjustment\n  if (top < padding) {\n    top = padding;\n  } else if (top + height > viewportHeight - padding) {\n    top = viewportHeight - height - padding;\n  }\n\n  return { top, left };\n}\n\n/**\n * Get arrow position class based on tooltip position\n * @param {string} position - Tooltip position (top, bottom, left, right)\n * @returns {string} - Arrow position class\n */\nexport function getArrowPosition(position) {\n  // Arrow points opposite to tooltip position\n  const arrowPositions = {\n    top: 'bottom',\n    bottom: 'top',\n    left: 'right',\n    right: 'left',\n  };\n\n  return arrowPositions[position] || 'top';\n}\n\n/**\n * Calculate arrow offset for centered alignment\n * @param {DOMRect} targetRect - Target element rect\n * @param {DOMRect} tooltipRect - Tooltip element rect\n * @param {string} position - Tooltip position\n * @returns {Object} - { offset, direction }\n */\nexport function calculateArrowOffset(targetRect, tooltipRect, position) {\n  const tooltipCenter =\n    position === 'top' || position === 'bottom'\n      ? tooltipRect.left + tooltipRect.width / 2\n      : tooltipRect.top + tooltipRect.height / 2;\n\n  const targetCenter =\n    position === 'top' || position === 'bottom'\n      ? targetRect.left + targetRect.width / 2\n      : targetRect.top + targetRect.height / 2;\n\n  return {\n    offset: targetCenter - tooltipCenter,\n    direction: position === 'top' || position === 'bottom' ? 'horizontal' : 'vertical',\n  };\n}\n\n/**\n * Get optimal position based on available space\n * @param {DOMRect} targetRect - Target element rect\n * @param {Object} tooltipSize - { width, height }\n * @returns {string} - Best position\n */\nexport function getOptimalPosition(targetRect, tooltipSize) {\n  const viewportWidth = window.innerWidth;\n  const viewportHeight = window.innerHeight;\n\n  const spaceAbove = targetRect.top;\n  const spaceBelow = viewportHeight - targetRect.bottom;\n  const spaceLeft = targetRect.left;\n  const spaceRight = viewportWidth - targetRect.right;\n\n  const spaces = {\n    top: { space: spaceAbove, fits: spaceAbove >= tooltipSize.height + SPACING },\n    bottom: { space: spaceBelow, fits: spaceBelow >= tooltipSize.height + SPACING },\n    left: { space: spaceLeft, fits: spaceLeft >= tooltipSize.width + SPACING },\n    right: { space: spaceRight, fits: spaceRight >= tooltipSize.width + SPACING },\n  };\n\n  // Find positions that fit\n  const fittingPositions = Object.entries(spaces)\n    .filter(([, data]) => data.fits)\n    .sort(([, a], [, b]) => b.space - a.space);\n\n  if (fittingPositions.length > 0) {\n    return fittingPositions[0][0];\n  }\n\n  // If nothing fits perfectly, return position with most space\n  const allPositions = Object.entries(spaces).sort(([, a], [, b]) => b.space - a.space);\n\n  return allPositions[0][0];\n}\n\n/**\n * Calculate position for modal dialog\n * @param {Object} modalSize - { width, height }\n * @param {string} alignment - 'center', 'top', 'bottom'\n * @returns {Object} - { top, left }\n */\nexport function calculateModalPosition(modalSize, alignment = 'center') {\n  const viewportWidth = window.innerWidth;\n  const viewportHeight = window.innerHeight;\n\n  const left = (viewportWidth - modalSize.width) / 2;\n\n  let top;\n  switch (alignment) {\n    case 'top':\n      top = 60;\n      break;\n    case 'bottom':\n      top = viewportHeight - modalSize.height - 60;\n      break;\n    case 'center':\n    default:\n      top = (viewportHeight - modalSize.height) / 2;\n      break;\n  }\n\n  return { top, left };\n}\n\n/**\n * Calculate position for slideout panel\n * @param {number} width - Panel width\n * @param {string} side - 'left' or 'right'\n * @returns {Object} - CSS properties\n */\nexport function calculateSlideoutPosition(width, side = 'right') {\n  return {\n    top: 0,\n    bottom: 0,\n    [side]: 0,\n    width: `${width}px`,\n    [side === 'right' ? 'left' : 'right']: 'auto',\n  };\n}\n\n/**\n * Check if position would cause overflow\n * @param {Object} position - { top, left }\n * @param {Object} dimensions - { width, height }\n * @returns {Object} - { overflowTop, overflowRight, overflowBottom, overflowLeft }\n */\nexport function checkOverflow(position, dimensions) {\n  const viewportWidth = window.innerWidth;\n  const viewportHeight = window.innerHeight;\n\n  return {\n    overflowTop: position.top < 0,\n    overflowRight: position.left + dimensions.width > viewportWidth,\n    overflowBottom: position.top + dimensions.height > viewportHeight,\n    overflowLeft: position.left < 0,\n  };\n}\n\n/**\n * Get centered position in viewport\n * @param {Object} dimensions - { width, height }\n * @returns {Object} - { top, left }\n */\nexport function getCenteredPosition(dimensions) {\n  const viewportWidth = window.innerWidth;\n  const viewportHeight = window.innerHeight;\n\n  return {\n    top: (viewportHeight - dimensions.height) / 2,\n    left: (viewportWidth - dimensions.width) / 2,\n  };\n}\n","/**\n * Tooltip Component\n * Displays a tooltip attached to a target element\n */\n\nimport { calculatePosition, adjustForViewport, getArrowPosition } from '../utils/positioning';\n\nexport class Tooltip {\n  constructor(options) {\n    this.options = {\n      title: '',\n      content: '',\n      position: 'bottom', // top, bottom, left, right, auto\n      targetElement: null,\n      media: null, // { type: 'image'|'video', src: '...', alt: '...' }\n      buttons: null, // Custom buttons\n      stepIndex: 0,\n      totalSteps: 1,\n      showBackButton: false,\n      showSkipButton: true,\n      onNext: () => {},\n      onPrev: () => {},\n      onSkip: () => {},\n      onClose: () => {},\n      theme: 'light',\n      primaryColor: null,\n      ...options,\n    };\n\n    this.element = null;\n    this.arrowElement = null;\n    this._resizeHandler = null;\n    this._scrollHandler = null;\n  }\n\n  render(container) {\n    this._createTooltip();\n    container.appendChild(this.element);\n    this._positionTooltip();\n    this._setupListeners();\n    this._animateIn();\n  }\n\n  destroy() {\n    this._removeListeners();\n\n    if (this.element && this.element.parentNode) {\n      this.element.classList.add('bbt-tooltip--exit');\n      setTimeout(() => {\n        if (this.element && this.element.parentNode) {\n          this.element.parentNode.removeChild(this.element);\n        }\n      }, 200);\n    }\n\n    this.element = null;\n    this.arrowElement = null;\n  }\n\n  _createTooltip() {\n    const {\n      title,\n      content,\n      media,\n      buttons,\n      stepIndex,\n      totalSteps,\n      showBackButton,\n      showSkipButton,\n      theme,\n      primaryColor,\n    } = this.options;\n\n    this.element = document.createElement('div');\n    this.element.className = `bbt-tooltip bbt-tooltip--${theme}`;\n\n    if (primaryColor) {\n      this.element.style.setProperty('--bbt-primary-color', primaryColor);\n    }\n\n    // Arrow\n    this.arrowElement = document.createElement('div');\n    this.arrowElement.className = 'bbt-tooltip__arrow';\n    this.element.appendChild(this.arrowElement);\n\n    // Content wrapper\n    const wrapper = document.createElement('div');\n    wrapper.className = 'bbt-tooltip__wrapper';\n\n    // Close button\n    const closeBtn = document.createElement('button');\n    closeBtn.className = 'bbt-tooltip__close';\n    closeBtn.innerHTML = '&times;';\n    closeBtn.setAttribute('aria-label', 'Close');\n    closeBtn.onclick = (e) => {\n      e.preventDefault();\n      this.options.onClose();\n    };\n    wrapper.appendChild(closeBtn);\n\n    // Media\n    if (media) {\n      const mediaEl = this._createMedia(media);\n      wrapper.appendChild(mediaEl);\n    }\n\n    // Header with title\n    if (title) {\n      const header = document.createElement('div');\n      header.className = 'bbt-tooltip__header';\n\n      const titleEl = document.createElement('h4');\n      titleEl.className = 'bbt-tooltip__title';\n      titleEl.textContent = title;\n      header.appendChild(titleEl);\n\n      wrapper.appendChild(header);\n    }\n\n    // Content\n    if (content) {\n      const contentEl = document.createElement('div');\n      contentEl.className = 'bbt-tooltip__content';\n      contentEl.innerHTML = content;\n      wrapper.appendChild(contentEl);\n    }\n\n    // Footer with actions\n    const footer = document.createElement('div');\n    footer.className = 'bbt-tooltip__footer';\n\n    // Progress indicator\n    if (totalSteps > 1) {\n      const progress = document.createElement('span');\n      progress.className = 'bbt-tooltip__progress';\n      progress.textContent = `${stepIndex + 1} / ${totalSteps}`;\n      footer.appendChild(progress);\n    }\n\n    // Actions\n    const actions = document.createElement('div');\n    actions.className = 'bbt-tooltip__actions';\n\n    if (buttons) {\n      // Custom buttons\n      buttons.forEach((btn) => {\n        const button = document.createElement('button');\n        button.className = `bbt-btn bbt-btn--${btn.variant || 'secondary'}`;\n        button.textContent = btn.text;\n        button.onclick = (e) => {\n          e.preventDefault();\n          if (btn.action === 'next') this.options.onNext();\n          else if (btn.action === 'prev') this.options.onPrev();\n          else if (btn.action === 'skip') this.options.onSkip();\n          else if (btn.action === 'close') this.options.onClose();\n          else if (btn.onClick) btn.onClick();\n        };\n        actions.appendChild(button);\n      });\n    } else {\n      // Default buttons\n      if (showSkipButton && stepIndex < totalSteps - 1) {\n        const skipBtn = document.createElement('button');\n        skipBtn.className = 'bbt-btn bbt-btn--text';\n        skipBtn.textContent = 'Skip';\n        skipBtn.onclick = (e) => {\n          e.preventDefault();\n          this.options.onSkip();\n        };\n        actions.appendChild(skipBtn);\n      }\n\n      if (showBackButton) {\n        const backBtn = document.createElement('button');\n        backBtn.className = 'bbt-btn bbt-btn--secondary';\n        backBtn.textContent = 'Back';\n        backBtn.onclick = (e) => {\n          e.preventDefault();\n          this.options.onPrev();\n        };\n        actions.appendChild(backBtn);\n      }\n\n      const nextBtn = document.createElement('button');\n      nextBtn.className = 'bbt-btn bbt-btn--primary';\n      nextBtn.textContent = stepIndex >= totalSteps - 1 ? 'Done' : 'Next';\n      nextBtn.onclick = (e) => {\n        e.preventDefault();\n        this.options.onNext();\n      };\n      actions.appendChild(nextBtn);\n    }\n\n    footer.appendChild(actions);\n    wrapper.appendChild(footer);\n    this.element.appendChild(wrapper);\n  }\n\n  _createMedia(media) {\n    const container = document.createElement('div');\n    container.className = 'bbt-tooltip__media';\n\n    if (media.type === 'image') {\n      const img = document.createElement('img');\n      img.src = media.src;\n      img.alt = media.alt || '';\n      img.className = 'bbt-tooltip__image';\n      container.appendChild(img);\n    } else if (media.type === 'video') {\n      const video = document.createElement('video');\n      video.src = media.src;\n      video.controls = true;\n      video.autoplay = media.autoplay || false;\n      video.muted = media.muted || true;\n      video.loop = media.loop || false;\n      video.className = 'bbt-tooltip__video';\n      container.appendChild(video);\n    } else if (media.type === 'embed') {\n      const iframe = document.createElement('iframe');\n      iframe.src = media.src;\n      iframe.className = 'bbt-tooltip__embed';\n      iframe.allowFullscreen = true;\n      container.appendChild(iframe);\n    }\n\n    return container;\n  }\n\n  _positionTooltip() {\n    const { targetElement, position } = this.options;\n\n    if (!targetElement) {\n      // Center in viewport if no target\n      this.element.style.position = 'fixed';\n      this.element.style.top = '50%';\n      this.element.style.left = '50%';\n      this.element.style.transform = 'translate(-50%, -50%)';\n      this.arrowElement.style.display = 'none';\n      return;\n    }\n\n    const targetRect = targetElement.getBoundingClientRect();\n    const tooltipRect = this.element.getBoundingClientRect();\n\n    const { top, left, actualPosition } = calculatePosition(\n      targetRect,\n      tooltipRect,\n      position\n    );\n\n    const adjusted = adjustForViewport(\n      { top, left },\n      { width: tooltipRect.width, height: tooltipRect.height }\n    );\n\n    this.element.style.position = 'fixed';\n    this.element.style.top = `${adjusted.top}px`;\n    this.element.style.left = `${adjusted.left}px`;\n\n    // Position arrow\n    const arrowPosition = getArrowPosition(actualPosition);\n    this.arrowElement.className = `bbt-tooltip__arrow bbt-tooltip__arrow--${arrowPosition}`;\n  }\n\n  _setupListeners() {\n    // Reposition on resize and scroll\n    this._resizeHandler = () => this._positionTooltip();\n    this._scrollHandler = () => this._positionTooltip();\n\n    window.addEventListener('resize', this._resizeHandler);\n    window.addEventListener('scroll', this._scrollHandler, true);\n\n    // Keyboard navigation\n    this._keyHandler = (e) => {\n      if (e.key === 'Escape') {\n        this.options.onClose();\n      } else if (e.key === 'ArrowRight' || e.key === 'Enter') {\n        this.options.onNext();\n      } else if (e.key === 'ArrowLeft') {\n        this.options.onPrev();\n      }\n    };\n    document.addEventListener('keydown', this._keyHandler);\n  }\n\n  _removeListeners() {\n    if (this._resizeHandler) {\n      window.removeEventListener('resize', this._resizeHandler);\n    }\n    if (this._scrollHandler) {\n      window.removeEventListener('scroll', this._scrollHandler, true);\n    }\n    if (this._keyHandler) {\n      document.removeEventListener('keydown', this._keyHandler);\n    }\n  }\n\n  _animateIn() {\n    requestAnimationFrame(() => {\n      this.element.classList.add('bbt-tooltip--enter');\n    });\n  }\n}\n","/**\n * Modal Component\n * Displays a centered modal dialog\n */\n\nexport class Modal {\n  constructor(options) {\n    this.options = {\n      title: '',\n      content: '',\n      size: 'medium', // small, medium, large\n      media: null,\n      buttons: null,\n      stepIndex: 0,\n      totalSteps: 1,\n      showBackButton: false,\n      showSkipButton: true,\n      onNext: () => {},\n      onPrev: () => {},\n      onSkip: () => {},\n      onClose: () => {},\n      theme: 'light',\n      primaryColor: null,\n      closeOnBackdrop: true,\n      closeOnEscape: true,\n      ...options,\n    };\n\n    this.element = null;\n    this.backdropElement = null;\n    this._keyHandler = null;\n  }\n\n  render(container) {\n    this._createBackdrop();\n    this._createModal();\n\n    container.appendChild(this.backdropElement);\n    container.appendChild(this.element);\n\n    this._setupListeners();\n    this._animateIn();\n\n    // Focus trap\n    this.element.focus();\n  }\n\n  destroy() {\n    this._removeListeners();\n\n    if (this.element) {\n      this.element.classList.add('bbt-modal--exit');\n    }\n    if (this.backdropElement) {\n      this.backdropElement.classList.add('bbt-modal-backdrop--exit');\n    }\n\n    setTimeout(() => {\n      if (this.element && this.element.parentNode) {\n        this.element.parentNode.removeChild(this.element);\n      }\n      if (this.backdropElement && this.backdropElement.parentNode) {\n        this.backdropElement.parentNode.removeChild(this.backdropElement);\n      }\n    }, 200);\n\n    this.element = null;\n    this.backdropElement = null;\n  }\n\n  _createBackdrop() {\n    this.backdropElement = document.createElement('div');\n    this.backdropElement.className = `bbt-modal-backdrop bbt-modal-backdrop--${this.options.theme}`;\n\n    if (this.options.closeOnBackdrop) {\n      this.backdropElement.onclick = (e) => {\n        if (e.target === this.backdropElement) {\n          this.options.onClose();\n        }\n      };\n    }\n  }\n\n  _createModal() {\n    const {\n      title,\n      content,\n      size,\n      media,\n      buttons,\n      stepIndex,\n      totalSteps,\n      showBackButton,\n      showSkipButton,\n      theme,\n      primaryColor,\n    } = this.options;\n\n    this.element = document.createElement('div');\n    this.element.className = `bbt-modal bbt-modal--${size} bbt-modal--${theme}`;\n    this.element.setAttribute('role', 'dialog');\n    this.element.setAttribute('aria-modal', 'true');\n    this.element.setAttribute('tabindex', '-1');\n\n    if (primaryColor) {\n      this.element.style.setProperty('--bbt-primary-color', primaryColor);\n    }\n\n    // Close button\n    const closeBtn = document.createElement('button');\n    closeBtn.className = 'bbt-modal__close';\n    closeBtn.innerHTML = '&times;';\n    closeBtn.setAttribute('aria-label', 'Close');\n    closeBtn.onclick = (e) => {\n      e.preventDefault();\n      this.options.onClose();\n    };\n    this.element.appendChild(closeBtn);\n\n    // Media\n    if (media) {\n      const mediaEl = this._createMedia(media);\n      this.element.appendChild(mediaEl);\n    }\n\n    // Header\n    if (title) {\n      const header = document.createElement('div');\n      header.className = 'bbt-modal__header';\n\n      const titleEl = document.createElement('h3');\n      titleEl.className = 'bbt-modal__title';\n      titleEl.textContent = title;\n      header.appendChild(titleEl);\n\n      this.element.appendChild(header);\n    }\n\n    // Body\n    if (content) {\n      const body = document.createElement('div');\n      body.className = 'bbt-modal__body';\n      body.innerHTML = content;\n      this.element.appendChild(body);\n    }\n\n    // Footer\n    const footer = document.createElement('div');\n    footer.className = 'bbt-modal__footer';\n\n    // Progress\n    if (totalSteps > 1) {\n      const progress = document.createElement('div');\n      progress.className = 'bbt-modal__progress';\n\n      for (let i = 0; i < totalSteps; i++) {\n        const dot = document.createElement('span');\n        dot.className = `bbt-modal__progress-dot ${i === stepIndex ? 'bbt-modal__progress-dot--active' : ''} ${i < stepIndex ? 'bbt-modal__progress-dot--completed' : ''}`;\n        progress.appendChild(dot);\n      }\n\n      footer.appendChild(progress);\n    }\n\n    // Actions\n    const actions = document.createElement('div');\n    actions.className = 'bbt-modal__actions';\n\n    if (buttons) {\n      buttons.forEach((btn) => {\n        const button = document.createElement('button');\n        button.className = `bbt-btn bbt-btn--${btn.variant || 'secondary'}`;\n        button.textContent = btn.text;\n        button.onclick = (e) => {\n          e.preventDefault();\n          if (btn.action === 'next') this.options.onNext();\n          else if (btn.action === 'prev') this.options.onPrev();\n          else if (btn.action === 'skip') this.options.onSkip();\n          else if (btn.action === 'close') this.options.onClose();\n          else if (btn.onClick) btn.onClick();\n        };\n        actions.appendChild(button);\n      });\n    } else {\n      if (showSkipButton && stepIndex < totalSteps - 1) {\n        const skipBtn = document.createElement('button');\n        skipBtn.className = 'bbt-btn bbt-btn--text';\n        skipBtn.textContent = 'Skip tour';\n        skipBtn.onclick = (e) => {\n          e.preventDefault();\n          this.options.onSkip();\n        };\n        actions.appendChild(skipBtn);\n      }\n\n      if (showBackButton) {\n        const backBtn = document.createElement('button');\n        backBtn.className = 'bbt-btn bbt-btn--secondary';\n        backBtn.textContent = 'Back';\n        backBtn.onclick = (e) => {\n          e.preventDefault();\n          this.options.onPrev();\n        };\n        actions.appendChild(backBtn);\n      }\n\n      const nextBtn = document.createElement('button');\n      nextBtn.className = 'bbt-btn bbt-btn--primary';\n      nextBtn.textContent = stepIndex >= totalSteps - 1 ? 'Get Started' : 'Next';\n      nextBtn.onclick = (e) => {\n        e.preventDefault();\n        this.options.onNext();\n      };\n      actions.appendChild(nextBtn);\n    }\n\n    footer.appendChild(actions);\n    this.element.appendChild(footer);\n  }\n\n  _createMedia(media) {\n    const container = document.createElement('div');\n    container.className = 'bbt-modal__media';\n\n    if (media.type === 'image') {\n      const img = document.createElement('img');\n      img.src = media.src;\n      img.alt = media.alt || '';\n      img.className = 'bbt-modal__image';\n      container.appendChild(img);\n    } else if (media.type === 'video') {\n      const video = document.createElement('video');\n      video.src = media.src;\n      video.controls = true;\n      video.autoplay = media.autoplay || false;\n      video.muted = media.muted !== false;\n      video.loop = media.loop || false;\n      video.className = 'bbt-modal__video';\n      container.appendChild(video);\n    } else if (media.type === 'embed') {\n      const iframe = document.createElement('iframe');\n      iframe.src = media.src;\n      iframe.className = 'bbt-modal__embed';\n      iframe.allowFullscreen = true;\n      container.appendChild(iframe);\n    } else if (media.type === 'lottie') {\n      const lottieContainer = document.createElement('div');\n      lottieContainer.className = 'bbt-modal__lottie';\n      lottieContainer.setAttribute('data-lottie-src', media.src);\n      container.appendChild(lottieContainer);\n    }\n\n    return container;\n  }\n\n  _setupListeners() {\n    if (this.options.closeOnEscape) {\n      this._keyHandler = (e) => {\n        if (e.key === 'Escape') {\n          this.options.onClose();\n        } else if (e.key === 'ArrowRight' || e.key === 'Enter') {\n          this.options.onNext();\n        } else if (e.key === 'ArrowLeft') {\n          this.options.onPrev();\n        }\n      };\n      document.addEventListener('keydown', this._keyHandler);\n    }\n  }\n\n  _removeListeners() {\n    if (this._keyHandler) {\n      document.removeEventListener('keydown', this._keyHandler);\n    }\n  }\n\n  _animateIn() {\n    requestAnimationFrame(() => {\n      this.backdropElement.classList.add('bbt-modal-backdrop--enter');\n      this.element.classList.add('bbt-modal--enter');\n    });\n  }\n}\n","/**\n * Hotspot Component\n * Displays a pulsing dot that reveals a tooltip on click/hover\n */\n\nimport { calculatePosition, adjustForViewport, getArrowPosition } from '../utils/positioning';\n\nexport class Hotspot {\n  constructor(options) {\n    this.options = {\n      targetElement: null,\n      title: '',\n      content: '',\n      position: 'right', // top, bottom, left, right\n      color: null, // Custom color\n      pulse: true,\n      triggerOn: 'click', // click, hover\n      stepIndex: 0,\n      totalSteps: 1,\n      showBackButton: false,\n      showSkipButton: true,\n      onNext: () => {},\n      onPrev: () => {},\n      onSkip: () => {},\n      onClose: () => {},\n      theme: 'light',\n      primaryColor: null,\n      ...options,\n    };\n\n    this.hotspotElement = null;\n    this.tooltipElement = null;\n    this.isTooltipVisible = false;\n    this._resizeHandler = null;\n    this._scrollHandler = null;\n  }\n\n  render(container) {\n    this._createHotspot();\n    this._createTooltip();\n\n    container.appendChild(this.hotspotElement);\n    container.appendChild(this.tooltipElement);\n\n    this._positionHotspot();\n    this._setupListeners();\n    this._animateIn();\n  }\n\n  destroy() {\n    this._removeListeners();\n\n    if (this.hotspotElement) {\n      this.hotspotElement.classList.add('bbt-hotspot--exit');\n    }\n    if (this.tooltipElement) {\n      this.tooltipElement.classList.add('bbt-hotspot-tooltip--exit');\n    }\n\n    setTimeout(() => {\n      if (this.hotspotElement && this.hotspotElement.parentNode) {\n        this.hotspotElement.parentNode.removeChild(this.hotspotElement);\n      }\n      if (this.tooltipElement && this.tooltipElement.parentNode) {\n        this.tooltipElement.parentNode.removeChild(this.tooltipElement);\n      }\n    }, 200);\n\n    this.hotspotElement = null;\n    this.tooltipElement = null;\n  }\n\n  _createHotspot() {\n    const { color, pulse, theme, primaryColor } = this.options;\n\n    this.hotspotElement = document.createElement('div');\n    this.hotspotElement.className = `bbt-hotspot bbt-hotspot--${theme}`;\n\n    if (pulse) {\n      this.hotspotElement.classList.add('bbt-hotspot--pulse');\n    }\n\n    // Inner dot\n    const dot = document.createElement('div');\n    dot.className = 'bbt-hotspot__dot';\n\n    if (color || primaryColor) {\n      dot.style.backgroundColor = color || primaryColor;\n    }\n\n    // Pulse ring\n    const ring = document.createElement('div');\n    ring.className = 'bbt-hotspot__ring';\n\n    if (color || primaryColor) {\n      ring.style.borderColor = color || primaryColor;\n    }\n\n    this.hotspotElement.appendChild(dot);\n    this.hotspotElement.appendChild(ring);\n  }\n\n  _createTooltip() {\n    const {\n      title,\n      content,\n      stepIndex,\n      totalSteps,\n      showBackButton,\n      showSkipButton,\n      theme,\n      primaryColor,\n    } = this.options;\n\n    this.tooltipElement = document.createElement('div');\n    this.tooltipElement.className = `bbt-hotspot-tooltip bbt-hotspot-tooltip--${theme}`;\n    this.tooltipElement.style.display = 'none';\n\n    if (primaryColor) {\n      this.tooltipElement.style.setProperty('--bbt-primary-color', primaryColor);\n    }\n\n    // Arrow\n    const arrow = document.createElement('div');\n    arrow.className = 'bbt-hotspot-tooltip__arrow';\n    this.tooltipElement.appendChild(arrow);\n\n    // Close button\n    const closeBtn = document.createElement('button');\n    closeBtn.className = 'bbt-hotspot-tooltip__close';\n    closeBtn.innerHTML = '&times;';\n    closeBtn.onclick = (e) => {\n      e.preventDefault();\n      e.stopPropagation();\n      this.options.onClose();\n    };\n    this.tooltipElement.appendChild(closeBtn);\n\n    // Content wrapper\n    const wrapper = document.createElement('div');\n    wrapper.className = 'bbt-hotspot-tooltip__wrapper';\n\n    if (title) {\n      const titleEl = document.createElement('h4');\n      titleEl.className = 'bbt-hotspot-tooltip__title';\n      titleEl.textContent = title;\n      wrapper.appendChild(titleEl);\n    }\n\n    if (content) {\n      const contentEl = document.createElement('div');\n      contentEl.className = 'bbt-hotspot-tooltip__content';\n      contentEl.innerHTML = content;\n      wrapper.appendChild(contentEl);\n    }\n\n    // Footer\n    const footer = document.createElement('div');\n    footer.className = 'bbt-hotspot-tooltip__footer';\n\n    if (totalSteps > 1) {\n      const progress = document.createElement('span');\n      progress.className = 'bbt-hotspot-tooltip__progress';\n      progress.textContent = `${stepIndex + 1} / ${totalSteps}`;\n      footer.appendChild(progress);\n    }\n\n    const actions = document.createElement('div');\n    actions.className = 'bbt-hotspot-tooltip__actions';\n\n    if (showSkipButton && stepIndex < totalSteps - 1) {\n      const skipBtn = document.createElement('button');\n      skipBtn.className = 'bbt-btn bbt-btn--text bbt-btn--sm';\n      skipBtn.textContent = 'Skip';\n      skipBtn.onclick = (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        this.options.onSkip();\n      };\n      actions.appendChild(skipBtn);\n    }\n\n    if (showBackButton) {\n      const backBtn = document.createElement('button');\n      backBtn.className = 'bbt-btn bbt-btn--secondary bbt-btn--sm';\n      backBtn.textContent = 'Back';\n      backBtn.onclick = (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        this.options.onPrev();\n      };\n      actions.appendChild(backBtn);\n    }\n\n    const nextBtn = document.createElement('button');\n    nextBtn.className = 'bbt-btn bbt-btn--primary bbt-btn--sm';\n    nextBtn.textContent = stepIndex >= totalSteps - 1 ? 'Done' : 'Next';\n    nextBtn.onclick = (e) => {\n      e.preventDefault();\n      e.stopPropagation();\n      this.options.onNext();\n    };\n    actions.appendChild(nextBtn);\n\n    footer.appendChild(actions);\n    wrapper.appendChild(footer);\n    this.tooltipElement.appendChild(wrapper);\n  }\n\n  _positionHotspot() {\n    const { targetElement, position } = this.options;\n\n    if (!targetElement) return;\n\n    const targetRect = targetElement.getBoundingClientRect();\n\n    // Position hotspot relative to target element\n    let top, left;\n\n    switch (position) {\n      case 'top':\n        top = targetRect.top - 12;\n        left = targetRect.left + targetRect.width / 2;\n        break;\n      case 'bottom':\n        top = targetRect.bottom + 12;\n        left = targetRect.left + targetRect.width / 2;\n        break;\n      case 'left':\n        top = targetRect.top + targetRect.height / 2;\n        left = targetRect.left - 12;\n        break;\n      case 'right':\n      default:\n        top = targetRect.top + targetRect.height / 2;\n        left = targetRect.right + 12;\n        break;\n    }\n\n    this.hotspotElement.style.position = 'fixed';\n    this.hotspotElement.style.top = `${top}px`;\n    this.hotspotElement.style.left = `${left}px`;\n  }\n\n  _positionTooltip() {\n    if (!this.isTooltipVisible) return;\n\n    const hotspotRect = this.hotspotElement.getBoundingClientRect();\n    const tooltipRect = this.tooltipElement.getBoundingClientRect();\n\n    // Position tooltip relative to hotspot\n    const { top, left, actualPosition } = calculatePosition(\n      hotspotRect,\n      tooltipRect,\n      this.options.position === 'right' ? 'right' : 'bottom'\n    );\n\n    const adjusted = adjustForViewport(\n      { top, left },\n      { width: tooltipRect.width, height: tooltipRect.height }\n    );\n\n    this.tooltipElement.style.position = 'fixed';\n    this.tooltipElement.style.top = `${adjusted.top}px`;\n    this.tooltipElement.style.left = `${adjusted.left}px`;\n\n    // Update arrow position\n    const arrow = this.tooltipElement.querySelector('.bbt-hotspot-tooltip__arrow');\n    if (arrow) {\n      arrow.className = `bbt-hotspot-tooltip__arrow bbt-hotspot-tooltip__arrow--${getArrowPosition(actualPosition)}`;\n    }\n  }\n\n  _showTooltip() {\n    if (this.isTooltipVisible) return;\n\n    this.isTooltipVisible = true;\n    this.tooltipElement.style.display = 'block';\n\n    requestAnimationFrame(() => {\n      this._positionTooltip();\n      this.tooltipElement.classList.add('bbt-hotspot-tooltip--enter');\n    });\n  }\n\n  _hideTooltip() {\n    if (!this.isTooltipVisible) return;\n\n    this.isTooltipVisible = false;\n    this.tooltipElement.classList.remove('bbt-hotspot-tooltip--enter');\n    this.tooltipElement.classList.add('bbt-hotspot-tooltip--exit');\n\n    setTimeout(() => {\n      this.tooltipElement.style.display = 'none';\n      this.tooltipElement.classList.remove('bbt-hotspot-tooltip--exit');\n    }, 200);\n  }\n\n  _toggleTooltip() {\n    if (this.isTooltipVisible) {\n      this._hideTooltip();\n    } else {\n      this._showTooltip();\n    }\n  }\n\n  _setupListeners() {\n    const { triggerOn } = this.options;\n\n    // Hotspot click/hover\n    if (triggerOn === 'click') {\n      this.hotspotElement.onclick = (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        this._toggleTooltip();\n      };\n    } else if (triggerOn === 'hover') {\n      this.hotspotElement.onmouseenter = () => this._showTooltip();\n      this.hotspotElement.onmouseleave = () => {\n        // Delay to allow moving to tooltip\n        setTimeout(() => {\n          if (!this.tooltipElement.matches(':hover')) {\n            this._hideTooltip();\n          }\n        }, 100);\n      };\n      this.tooltipElement.onmouseleave = () => this._hideTooltip();\n    }\n\n    // Reposition on resize/scroll\n    this._resizeHandler = () => {\n      this._positionHotspot();\n      this._positionTooltip();\n    };\n    this._scrollHandler = () => {\n      this._positionHotspot();\n      this._positionTooltip();\n    };\n\n    window.addEventListener('resize', this._resizeHandler);\n    window.addEventListener('scroll', this._scrollHandler, true);\n\n    // Click outside to close\n    this._clickOutsideHandler = (e) => {\n      if (\n        this.isTooltipVisible &&\n        !this.tooltipElement.contains(e.target) &&\n        !this.hotspotElement.contains(e.target)\n      ) {\n        this._hideTooltip();\n      }\n    };\n    document.addEventListener('click', this._clickOutsideHandler);\n\n    // Keyboard\n    this._keyHandler = (e) => {\n      if (e.key === 'Escape') {\n        if (this.isTooltipVisible) {\n          this._hideTooltip();\n        } else {\n          this.options.onClose();\n        }\n      }\n    };\n    document.addEventListener('keydown', this._keyHandler);\n\n    // Auto-show tooltip after animation\n    setTimeout(() => {\n      this._showTooltip();\n    }, 500);\n  }\n\n  _removeListeners() {\n    if (this._resizeHandler) {\n      window.removeEventListener('resize', this._resizeHandler);\n    }\n    if (this._scrollHandler) {\n      window.removeEventListener('scroll', this._scrollHandler, true);\n    }\n    if (this._clickOutsideHandler) {\n      document.removeEventListener('click', this._clickOutsideHandler);\n    }\n    if (this._keyHandler) {\n      document.removeEventListener('keydown', this._keyHandler);\n    }\n  }\n\n  _animateIn() {\n    requestAnimationFrame(() => {\n      this.hotspotElement.classList.add('bbt-hotspot--enter');\n    });\n  }\n}\n","/**\n * Slideout Component\n * Displays a side panel that slides in from left or right\n */\n\nexport class Slideout {\n  constructor(options) {\n    this.options = {\n      title: '',\n      content: '',\n      position: 'right', // left, right\n      width: 400, // Width in pixels\n      media: null,\n      buttons: null,\n      stepIndex: 0,\n      totalSteps: 1,\n      showBackButton: false,\n      showSkipButton: true,\n      onNext: () => {},\n      onPrev: () => {},\n      onSkip: () => {},\n      onClose: () => {},\n      theme: 'light',\n      primaryColor: null,\n      showOverlay: true,\n      closeOnOverlay: true,\n      ...options,\n    };\n\n    this.element = null;\n    this.overlayElement = null;\n    this._keyHandler = null;\n  }\n\n  render(container) {\n    if (this.options.showOverlay) {\n      this._createOverlay();\n      container.appendChild(this.overlayElement);\n    }\n\n    this._createSlideout();\n    container.appendChild(this.element);\n\n    this._setupListeners();\n    this._animateIn();\n  }\n\n  destroy() {\n    this._removeListeners();\n\n    if (this.element) {\n      this.element.classList.remove('bbt-slideout--enter');\n      this.element.classList.add('bbt-slideout--exit');\n    }\n    if (this.overlayElement) {\n      this.overlayElement.classList.remove('bbt-slideout-overlay--enter');\n      this.overlayElement.classList.add('bbt-slideout-overlay--exit');\n    }\n\n    setTimeout(() => {\n      if (this.element && this.element.parentNode) {\n        this.element.parentNode.removeChild(this.element);\n      }\n      if (this.overlayElement && this.overlayElement.parentNode) {\n        this.overlayElement.parentNode.removeChild(this.overlayElement);\n      }\n    }, 300);\n\n    this.element = null;\n    this.overlayElement = null;\n  }\n\n  _createOverlay() {\n    this.overlayElement = document.createElement('div');\n    this.overlayElement.className = `bbt-slideout-overlay bbt-slideout-overlay--${this.options.theme}`;\n\n    if (this.options.closeOnOverlay) {\n      this.overlayElement.onclick = () => this.options.onClose();\n    }\n  }\n\n  _createSlideout() {\n    const {\n      title,\n      content,\n      position,\n      width,\n      media,\n      buttons,\n      stepIndex,\n      totalSteps,\n      showBackButton,\n      showSkipButton,\n      theme,\n      primaryColor,\n    } = this.options;\n\n    this.element = document.createElement('div');\n    this.element.className = `bbt-slideout bbt-slideout--${position} bbt-slideout--${theme}`;\n    this.element.style.width = `${width}px`;\n\n    if (primaryColor) {\n      this.element.style.setProperty('--bbt-primary-color', primaryColor);\n    }\n\n    // Header\n    const header = document.createElement('div');\n    header.className = 'bbt-slideout__header';\n\n    if (title) {\n      const titleEl = document.createElement('h3');\n      titleEl.className = 'bbt-slideout__title';\n      titleEl.textContent = title;\n      header.appendChild(titleEl);\n    }\n\n    const closeBtn = document.createElement('button');\n    closeBtn.className = 'bbt-slideout__close';\n    closeBtn.innerHTML = '&times;';\n    closeBtn.setAttribute('aria-label', 'Close');\n    closeBtn.onclick = (e) => {\n      e.preventDefault();\n      this.options.onClose();\n    };\n    header.appendChild(closeBtn);\n\n    this.element.appendChild(header);\n\n    // Body\n    const body = document.createElement('div');\n    body.className = 'bbt-slideout__body';\n\n    // Media\n    if (media) {\n      const mediaEl = this._createMedia(media);\n      body.appendChild(mediaEl);\n    }\n\n    // Content\n    if (content) {\n      const contentEl = document.createElement('div');\n      contentEl.className = 'bbt-slideout__content';\n      contentEl.innerHTML = content;\n      body.appendChild(contentEl);\n    }\n\n    this.element.appendChild(body);\n\n    // Footer\n    const footer = document.createElement('div');\n    footer.className = 'bbt-slideout__footer';\n\n    // Progress\n    if (totalSteps > 1) {\n      const progress = document.createElement('div');\n      progress.className = 'bbt-slideout__progress';\n\n      const progressBar = document.createElement('div');\n      progressBar.className = 'bbt-slideout__progress-bar';\n\n      const progressFill = document.createElement('div');\n      progressFill.className = 'bbt-slideout__progress-fill';\n      progressFill.style.width = `${((stepIndex + 1) / totalSteps) * 100}%`;\n\n      progressBar.appendChild(progressFill);\n      progress.appendChild(progressBar);\n\n      const progressText = document.createElement('span');\n      progressText.className = 'bbt-slideout__progress-text';\n      progressText.textContent = `Step ${stepIndex + 1} of ${totalSteps}`;\n      progress.appendChild(progressText);\n\n      footer.appendChild(progress);\n    }\n\n    // Actions\n    const actions = document.createElement('div');\n    actions.className = 'bbt-slideout__actions';\n\n    if (buttons) {\n      buttons.forEach((btn) => {\n        const button = document.createElement('button');\n        button.className = `bbt-btn bbt-btn--${btn.variant || 'secondary'}`;\n        button.textContent = btn.text;\n        button.onclick = (e) => {\n          e.preventDefault();\n          if (btn.action === 'next') this.options.onNext();\n          else if (btn.action === 'prev') this.options.onPrev();\n          else if (btn.action === 'skip') this.options.onSkip();\n          else if (btn.action === 'close') this.options.onClose();\n          else if (btn.onClick) btn.onClick();\n        };\n        actions.appendChild(button);\n      });\n    } else {\n      if (showSkipButton && stepIndex < totalSteps - 1) {\n        const skipBtn = document.createElement('button');\n        skipBtn.className = 'bbt-btn bbt-btn--text';\n        skipBtn.textContent = 'Skip tour';\n        skipBtn.onclick = (e) => {\n          e.preventDefault();\n          this.options.onSkip();\n        };\n        actions.appendChild(skipBtn);\n      }\n\n      const buttonGroup = document.createElement('div');\n      buttonGroup.className = 'bbt-slideout__button-group';\n\n      if (showBackButton) {\n        const backBtn = document.createElement('button');\n        backBtn.className = 'bbt-btn bbt-btn--secondary';\n        backBtn.textContent = 'Back';\n        backBtn.onclick = (e) => {\n          e.preventDefault();\n          this.options.onPrev();\n        };\n        buttonGroup.appendChild(backBtn);\n      }\n\n      const nextBtn = document.createElement('button');\n      nextBtn.className = 'bbt-btn bbt-btn--primary';\n      nextBtn.textContent = stepIndex >= totalSteps - 1 ? 'Finish' : 'Continue';\n      nextBtn.onclick = (e) => {\n        e.preventDefault();\n        this.options.onNext();\n      };\n      buttonGroup.appendChild(nextBtn);\n\n      actions.appendChild(buttonGroup);\n    }\n\n    footer.appendChild(actions);\n    this.element.appendChild(footer);\n  }\n\n  _createMedia(media) {\n    const container = document.createElement('div');\n    container.className = 'bbt-slideout__media';\n\n    if (media.type === 'image') {\n      const img = document.createElement('img');\n      img.src = media.src;\n      img.alt = media.alt || '';\n      img.className = 'bbt-slideout__image';\n      container.appendChild(img);\n    } else if (media.type === 'video') {\n      const video = document.createElement('video');\n      video.src = media.src;\n      video.controls = true;\n      video.autoplay = media.autoplay || false;\n      video.muted = media.muted !== false;\n      video.loop = media.loop || false;\n      video.className = 'bbt-slideout__video';\n      container.appendChild(video);\n    } else if (media.type === 'embed') {\n      const iframe = document.createElement('iframe');\n      iframe.src = media.src;\n      iframe.className = 'bbt-slideout__embed';\n      iframe.allowFullscreen = true;\n      container.appendChild(iframe);\n    }\n\n    return container;\n  }\n\n  _setupListeners() {\n    this._keyHandler = (e) => {\n      if (e.key === 'Escape') {\n        this.options.onClose();\n      } else if (e.key === 'ArrowRight' || e.key === 'Enter') {\n        this.options.onNext();\n      } else if (e.key === 'ArrowLeft') {\n        this.options.onPrev();\n      }\n    };\n    document.addEventListener('keydown', this._keyHandler);\n  }\n\n  _removeListeners() {\n    if (this._keyHandler) {\n      document.removeEventListener('keydown', this._keyHandler);\n    }\n  }\n\n  _animateIn() {\n    requestAnimationFrame(() => {\n      if (this.overlayElement) {\n        this.overlayElement.classList.add('bbt-slideout-overlay--enter');\n      }\n      this.element.classList.add('bbt-slideout--enter');\n    });\n  }\n}\n","/**\n * Overlay Component\n * Creates a dark overlay with a spotlight on the target element\n */\n\nexport class Overlay {\n  constructor(options) {\n    this.options = {\n      targetElement: null,\n      onClick: null,\n      padding: 8, // Padding around highlighted element\n      opacity: 0.5,\n      theme: 'light',\n      borderRadius: 4,\n      ...options,\n    };\n\n    this.element = null;\n    this.spotlightElement = null;\n    this._resizeHandler = null;\n    this._scrollHandler = null;\n  }\n\n  render(container) {\n    this._createOverlay();\n    container.appendChild(this.element);\n\n    this._updateSpotlight();\n    this._setupListeners();\n    this._animateIn();\n  }\n\n  destroy() {\n    this._removeListeners();\n\n    if (this.element) {\n      this.element.classList.remove('bbt-overlay--enter');\n      this.element.classList.add('bbt-overlay--exit');\n\n      setTimeout(() => {\n        if (this.element && this.element.parentNode) {\n          this.element.parentNode.removeChild(this.element);\n        }\n      }, 200);\n    }\n\n    this.element = null;\n    this.spotlightElement = null;\n  }\n\n  _createOverlay() {\n    const { theme, opacity, onClick } = this.options;\n\n    // SVG-based overlay for smooth spotlight cutout\n    this.element = document.createElement('div');\n    this.element.className = `bbt-overlay bbt-overlay--${theme}`;\n\n    const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n    svg.setAttribute('class', 'bbt-overlay__svg');\n    svg.setAttribute('width', '100%');\n    svg.setAttribute('height', '100%');\n\n    // Defs for the mask\n    const defs = document.createElementNS('http://www.w3.org/2000/svg', 'defs');\n\n    const mask = document.createElementNS('http://www.w3.org/2000/svg', 'mask');\n    mask.setAttribute('id', 'bbt-spotlight-mask');\n\n    // White rectangle (visible area)\n    const maskRect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\n    maskRect.setAttribute('x', '0');\n    maskRect.setAttribute('y', '0');\n    maskRect.setAttribute('width', '100%');\n    maskRect.setAttribute('height', '100%');\n    maskRect.setAttribute('fill', 'white');\n    mask.appendChild(maskRect);\n\n    // Black rectangle for spotlight (cutout)\n    this.spotlightElement = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\n    this.spotlightElement.setAttribute('class', 'bbt-overlay__spotlight');\n    this.spotlightElement.setAttribute('fill', 'black');\n    this.spotlightElement.setAttribute('rx', this.options.borderRadius);\n    this.spotlightElement.setAttribute('ry', this.options.borderRadius);\n    mask.appendChild(this.spotlightElement);\n\n    defs.appendChild(mask);\n    svg.appendChild(defs);\n\n    // Overlay rectangle with mask\n    const overlayRect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\n    overlayRect.setAttribute('x', '0');\n    overlayRect.setAttribute('y', '0');\n    overlayRect.setAttribute('width', '100%');\n    overlayRect.setAttribute('height', '100%');\n    overlayRect.setAttribute('fill', theme === 'dark' ? 'rgba(255, 255, 255, 0.1)' : `rgba(0, 0, 0, ${opacity})`);\n    overlayRect.setAttribute('mask', 'url(#bbt-spotlight-mask)');\n    svg.appendChild(overlayRect);\n\n    this.element.appendChild(svg);\n\n    // Click handler\n    if (onClick) {\n      this.element.onclick = (e) => {\n        if (e.target === this.element || e.target.tagName === 'svg' || e.target.tagName === 'rect') {\n          onClick();\n        }\n      };\n    }\n  }\n\n  _updateSpotlight() {\n    const { targetElement, padding } = this.options;\n\n    if (!targetElement || !this.spotlightElement) {\n      // Hide spotlight if no target\n      this.spotlightElement.setAttribute('width', '0');\n      this.spotlightElement.setAttribute('height', '0');\n      return;\n    }\n\n    const rect = targetElement.getBoundingClientRect();\n\n    this.spotlightElement.setAttribute('x', rect.left - padding);\n    this.spotlightElement.setAttribute('y', rect.top - padding);\n    this.spotlightElement.setAttribute('width', rect.width + padding * 2);\n    this.spotlightElement.setAttribute('height', rect.height + padding * 2);\n  }\n\n  _setupListeners() {\n    this._resizeHandler = () => this._updateSpotlight();\n    this._scrollHandler = () => this._updateSpotlight();\n\n    window.addEventListener('resize', this._resizeHandler);\n    window.addEventListener('scroll', this._scrollHandler, true);\n  }\n\n  _removeListeners() {\n    if (this._resizeHandler) {\n      window.removeEventListener('resize', this._resizeHandler);\n    }\n    if (this._scrollHandler) {\n      window.removeEventListener('scroll', this._scrollHandler, true);\n    }\n  }\n\n  _animateIn() {\n    requestAnimationFrame(() => {\n      this.element.classList.add('bbt-overlay--enter');\n    });\n  }\n}\n\n/**\n * Simple highlight border around element (alternative to overlay)\n */\nexport class Highlight {\n  constructor(options) {\n    this.options = {\n      targetElement: null,\n      color: '#3B82F6',\n      borderWidth: 2,\n      padding: 4,\n      borderRadius: 4,\n      pulse: false,\n      ...options,\n    };\n\n    this.element = null;\n    this._resizeHandler = null;\n    this._scrollHandler = null;\n  }\n\n  render(container) {\n    this._createHighlight();\n    container.appendChild(this.element);\n\n    this._updatePosition();\n    this._setupListeners();\n    this._animateIn();\n  }\n\n  destroy() {\n    this._removeListeners();\n\n    if (this.element && this.element.parentNode) {\n      this.element.parentNode.removeChild(this.element);\n    }\n\n    this.element = null;\n  }\n\n  _createHighlight() {\n    const { color, borderWidth, borderRadius, pulse } = this.options;\n\n    this.element = document.createElement('div');\n    this.element.className = 'bbt-highlight';\n\n    if (pulse) {\n      this.element.classList.add('bbt-highlight--pulse');\n    }\n\n    this.element.style.border = `${borderWidth}px solid ${color}`;\n    this.element.style.borderRadius = `${borderRadius}px`;\n    this.element.style.boxShadow = `0 0 0 4px ${color}33`;\n  }\n\n  _updatePosition() {\n    const { targetElement, padding, borderWidth } = this.options;\n\n    if (!targetElement) return;\n\n    const rect = targetElement.getBoundingClientRect();\n\n    this.element.style.position = 'fixed';\n    this.element.style.top = `${rect.top - padding - borderWidth}px`;\n    this.element.style.left = `${rect.left - padding - borderWidth}px`;\n    this.element.style.width = `${rect.width + padding * 2}px`;\n    this.element.style.height = `${rect.height + padding * 2}px`;\n  }\n\n  _setupListeners() {\n    this._resizeHandler = () => this._updatePosition();\n    this._scrollHandler = () => this._updatePosition();\n\n    window.addEventListener('resize', this._resizeHandler);\n    window.addEventListener('scroll', this._scrollHandler, true);\n  }\n\n  _removeListeners() {\n    if (this._resizeHandler) {\n      window.removeEventListener('resize', this._resizeHandler);\n    }\n    if (this._scrollHandler) {\n      window.removeEventListener('scroll', this._scrollHandler, true);\n    }\n  }\n\n  _animateIn() {\n    requestAnimationFrame(() => {\n      this.element.classList.add('bbt-highlight--enter');\n    });\n  }\n}\n","/**\n * ProgressBar Component\n * Shows tour progress at the bottom of the screen\n */\n\nexport class ProgressBar {\n  constructor(options) {\n    this.options = {\n      current: 0,\n      total: 1,\n      theme: 'light',\n      position: 'bottom', // top, bottom\n      showStepNumbers: true,\n      primaryColor: null,\n      ...options,\n    };\n\n    this.element = null;\n  }\n\n  render(container) {\n    this._createProgressBar();\n    container.appendChild(this.element);\n    this._animateIn();\n  }\n\n  destroy() {\n    if (this.element) {\n      this.element.classList.remove('bbt-progress-bar--enter');\n      this.element.classList.add('bbt-progress-bar--exit');\n\n      setTimeout(() => {\n        if (this.element && this.element.parentNode) {\n          this.element.parentNode.removeChild(this.element);\n        }\n      }, 200);\n    }\n\n    this.element = null;\n  }\n\n  update(current) {\n    this.options.current = current;\n    this._updateProgress();\n  }\n\n  _createProgressBar() {\n    const { current, total, theme, position, showStepNumbers, primaryColor } = this.options;\n\n    this.element = document.createElement('div');\n    this.element.className = `bbt-progress-bar bbt-progress-bar--${position} bbt-progress-bar--${theme}`;\n\n    if (primaryColor) {\n      this.element.style.setProperty('--bbt-primary-color', primaryColor);\n    }\n\n    // Progress track\n    const track = document.createElement('div');\n    track.className = 'bbt-progress-bar__track';\n\n    // Step dots\n    for (let i = 0; i < total; i++) {\n      const step = document.createElement('div');\n      step.className = 'bbt-progress-bar__step';\n\n      if (i < current) {\n        step.classList.add('bbt-progress-bar__step--completed');\n      } else if (i === current) {\n        step.classList.add('bbt-progress-bar__step--active');\n      }\n\n      // Connector line (except for last step)\n      if (i < total - 1) {\n        const connector = document.createElement('div');\n        connector.className = 'bbt-progress-bar__connector';\n\n        if (i < current) {\n          connector.classList.add('bbt-progress-bar__connector--completed');\n        }\n\n        step.appendChild(connector);\n      }\n\n      // Step dot\n      const dot = document.createElement('div');\n      dot.className = 'bbt-progress-bar__dot';\n\n      if (showStepNumbers) {\n        dot.textContent = i + 1;\n      }\n\n      step.appendChild(dot);\n      track.appendChild(step);\n    }\n\n    this.element.appendChild(track);\n\n    // Text indicator\n    const text = document.createElement('div');\n    text.className = 'bbt-progress-bar__text';\n    text.textContent = `Step ${current + 1} of ${total}`;\n    this.element.appendChild(text);\n  }\n\n  _updateProgress() {\n    const { current, total } = this.options;\n\n    // Update steps\n    const steps = this.element.querySelectorAll('.bbt-progress-bar__step');\n    steps.forEach((step, i) => {\n      step.classList.remove('bbt-progress-bar__step--completed', 'bbt-progress-bar__step--active');\n\n      if (i < current) {\n        step.classList.add('bbt-progress-bar__step--completed');\n      } else if (i === current) {\n        step.classList.add('bbt-progress-bar__step--active');\n      }\n    });\n\n    // Update connectors\n    const connectors = this.element.querySelectorAll('.bbt-progress-bar__connector');\n    connectors.forEach((connector, i) => {\n      connector.classList.toggle('bbt-progress-bar__connector--completed', i < current);\n    });\n\n    // Update text\n    const text = this.element.querySelector('.bbt-progress-bar__text');\n    if (text) {\n      text.textContent = `Step ${current + 1} of ${total}`;\n    }\n  }\n\n  _animateIn() {\n    requestAnimationFrame(() => {\n      this.element.classList.add('bbt-progress-bar--enter');\n    });\n  }\n}\n\n/**\n * Minimal progress indicator (dots only)\n */\nexport class ProgressDots {\n  constructor(options) {\n    this.options = {\n      current: 0,\n      total: 1,\n      theme: 'light',\n      primaryColor: null,\n      ...options,\n    };\n\n    this.element = null;\n  }\n\n  render(container) {\n    this._createDots();\n    container.appendChild(this.element);\n  }\n\n  destroy() {\n    if (this.element && this.element.parentNode) {\n      this.element.parentNode.removeChild(this.element);\n    }\n    this.element = null;\n  }\n\n  update(current) {\n    this.options.current = current;\n    this._updateDots();\n  }\n\n  _createDots() {\n    const { current, total, theme, primaryColor } = this.options;\n\n    this.element = document.createElement('div');\n    this.element.className = `bbt-progress-dots bbt-progress-dots--${theme}`;\n\n    if (primaryColor) {\n      this.element.style.setProperty('--bbt-primary-color', primaryColor);\n    }\n\n    for (let i = 0; i < total; i++) {\n      const dot = document.createElement('div');\n      dot.className = 'bbt-progress-dots__dot';\n\n      if (i < current) {\n        dot.classList.add('bbt-progress-dots__dot--completed');\n      } else if (i === current) {\n        dot.classList.add('bbt-progress-dots__dot--active');\n      }\n\n      this.element.appendChild(dot);\n    }\n  }\n\n  _updateDots() {\n    const { current } = this.options;\n\n    const dots = this.element.querySelectorAll('.bbt-progress-dots__dot');\n    dots.forEach((dot, i) => {\n      dot.classList.remove('bbt-progress-dots__dot--completed', 'bbt-progress-dots__dot--active');\n\n      if (i < current) {\n        dot.classList.add('bbt-progress-dots__dot--completed');\n      } else if (i === current) {\n        dot.classList.add('bbt-progress-dots__dot--active');\n      }\n    });\n  }\n}\n","/**\n * DOM Utilities\n * Helper functions for DOM manipulation and element finding\n */\n\n/**\n * Find an element by selector\n * @param {string} selector - CSS selector\n * @returns {Element|null}\n */\nexport function findElement(selector) {\n  if (!selector) return null;\n\n  try {\n    // Handle special selectors\n    if (selector.startsWith('data-tour=')) {\n      const value = selector.replace('data-tour=', '');\n      return document.querySelector(`[data-tour=\"${value}\"]`);\n    }\n\n    if (selector.startsWith('data-tour-id=')) {\n      const value = selector.replace('data-tour-id=', '');\n      return document.querySelector(`[data-tour-id=\"${value}\"]`);\n    }\n\n    return document.querySelector(selector);\n  } catch (error) {\n    console.error('[TourSDK] Invalid selector:', selector, error);\n    return null;\n  }\n}\n\n/**\n * Check if an element is visible in the viewport\n * @param {Element} element - DOM element\n * @returns {boolean}\n */\nexport function isElementVisible(element) {\n  if (!element) return false;\n\n  const rect = element.getBoundingClientRect();\n  const style = window.getComputedStyle(element);\n\n  // Check if element has dimensions\n  if (rect.width === 0 || rect.height === 0) return false;\n\n  // Check CSS visibility\n  if (style.display === 'none') return false;\n  if (style.visibility === 'hidden') return false;\n  if (parseFloat(style.opacity) === 0) return false;\n\n  // Check if in viewport\n  const viewportHeight = window.innerHeight || document.documentElement.clientHeight;\n  const viewportWidth = window.innerWidth || document.documentElement.clientWidth;\n\n  return (\n    rect.top >= -rect.height &&\n    rect.left >= -rect.width &&\n    rect.bottom <= viewportHeight + rect.height &&\n    rect.right <= viewportWidth + rect.width\n  );\n}\n\n/**\n * Check if element is fully visible in viewport\n * @param {Element} element - DOM element\n * @returns {boolean}\n */\nexport function isElementFullyVisible(element) {\n  if (!element) return false;\n\n  const rect = element.getBoundingClientRect();\n  const viewportHeight = window.innerHeight || document.documentElement.clientHeight;\n  const viewportWidth = window.innerWidth || document.documentElement.clientWidth;\n\n  return (\n    rect.top >= 0 &&\n    rect.left >= 0 &&\n    rect.bottom <= viewportHeight &&\n    rect.right <= viewportWidth\n  );\n}\n\n/**\n * Get element position and dimensions\n * @param {Element} element - DOM element\n * @returns {Object}\n */\nexport function getElementPosition(element) {\n  if (!element) return null;\n\n  const rect = element.getBoundingClientRect();\n  const scrollLeft = window.pageXOffset || document.documentElement.scrollLeft;\n  const scrollTop = window.pageYOffset || document.documentElement.scrollTop;\n\n  return {\n    top: rect.top,\n    left: rect.left,\n    right: rect.right,\n    bottom: rect.bottom,\n    width: rect.width,\n    height: rect.height,\n    absoluteTop: rect.top + scrollTop,\n    absoluteLeft: rect.left + scrollLeft,\n    centerX: rect.left + rect.width / 2,\n    centerY: rect.top + rect.height / 2,\n  };\n}\n\n/**\n * Scroll to an element\n * @param {Element} element - DOM element\n * @param {Object} options - Scroll options\n * @returns {Promise}\n */\nexport function scrollToElement(element, options = {}) {\n  return new Promise((resolve) => {\n    if (!element) {\n      resolve();\n      return;\n    }\n\n    const {\n      behavior = 'smooth',\n      block = 'center',\n      inline = 'nearest',\n      offset = 0,\n    } = options;\n\n    // Check if element is already visible\n    if (isElementFullyVisible(element)) {\n      resolve();\n      return;\n    }\n\n    // Use native scrollIntoView\n    element.scrollIntoView({\n      behavior,\n      block,\n      inline,\n    });\n\n    // Apply additional offset if needed\n    if (offset !== 0) {\n      setTimeout(() => {\n        window.scrollBy({\n          top: offset,\n          behavior: 'smooth',\n        });\n      }, 100);\n    }\n\n    // Wait for scroll to complete\n    const scrollTimeout = behavior === 'smooth' ? 500 : 100;\n    setTimeout(resolve, scrollTimeout);\n  });\n}\n\n/**\n * Wait for an element to appear in the DOM\n * @param {string} selector - CSS selector\n * @param {number} timeout - Timeout in milliseconds\n * @returns {Promise<Element|null>}\n */\nexport function waitForElement(selector, timeout = 5000) {\n  return new Promise((resolve) => {\n    // Check if element already exists\n    const existing = findElement(selector);\n    if (existing) {\n      resolve(existing);\n      return;\n    }\n\n    const startTime = Date.now();\n\n    // Use MutationObserver for better performance\n    const observer = new MutationObserver((mutations, obs) => {\n      const element = findElement(selector);\n      if (element) {\n        obs.disconnect();\n        resolve(element);\n      } else if (Date.now() - startTime >= timeout) {\n        obs.disconnect();\n        resolve(null);\n      }\n    });\n\n    observer.observe(document.body, {\n      childList: true,\n      subtree: true,\n      attributes: true,\n    });\n\n    // Fallback timeout\n    setTimeout(() => {\n      observer.disconnect();\n      resolve(findElement(selector));\n    }, timeout);\n  });\n}\n\n/**\n * Wait for element to be visible\n * @param {string} selector - CSS selector\n * @param {number} timeout - Timeout in milliseconds\n * @returns {Promise<Element|null>}\n */\nexport async function waitForElementVisible(selector, timeout = 5000) {\n  const element = await waitForElement(selector, timeout);\n\n  if (!element) return null;\n\n  // Wait for visibility\n  const startTime = Date.now();\n  while (!isElementVisible(element) && Date.now() - startTime < timeout) {\n    await new Promise((resolve) => setTimeout(resolve, 100));\n  }\n\n  return isElementVisible(element) ? element : null;\n}\n\n/**\n * Add highlight effect to an element\n * @param {Element} element - DOM element\n * @param {Object} options - Highlight options\n * @returns {Function} - Cleanup function\n */\nexport function highlightElement(element, options = {}) {\n  if (!element) return () => {};\n\n  const {\n    color = '#3B82F6',\n    duration = 0, // 0 = permanent until cleanup\n    pulse = false,\n  } = options;\n\n  const originalOutline = element.style.outline;\n  const originalTransition = element.style.transition;\n\n  element.style.outline = `3px solid ${color}`;\n  element.style.transition = 'outline 0.3s ease';\n\n  if (pulse) {\n    element.classList.add('bbt-pulse-highlight');\n  }\n\n  const cleanup = () => {\n    element.style.outline = originalOutline;\n    element.style.transition = originalTransition;\n    element.classList.remove('bbt-pulse-highlight');\n  };\n\n  if (duration > 0) {\n    setTimeout(cleanup, duration);\n  }\n\n  return cleanup;\n}\n\n/**\n * Get all focusable elements within a container\n * @param {Element} container - Container element\n * @returns {Element[]}\n */\nexport function getFocusableElements(container) {\n  const focusableSelectors = [\n    'a[href]',\n    'button:not([disabled])',\n    'input:not([disabled])',\n    'select:not([disabled])',\n    'textarea:not([disabled])',\n    '[tabindex]:not([tabindex=\"-1\"])',\n  ].join(', ');\n\n  return Array.from(container.querySelectorAll(focusableSelectors));\n}\n\n/**\n * Create focus trap within a container\n * @param {Element} container - Container element\n * @returns {Function} - Cleanup function\n */\nexport function createFocusTrap(container) {\n  const focusableElements = getFocusableElements(container);\n  const firstElement = focusableElements[0];\n  const lastElement = focusableElements[focusableElements.length - 1];\n\n  const handleKeyDown = (e) => {\n    if (e.key !== 'Tab') return;\n\n    if (e.shiftKey) {\n      if (document.activeElement === firstElement) {\n        e.preventDefault();\n        lastElement?.focus();\n      }\n    } else {\n      if (document.activeElement === lastElement) {\n        e.preventDefault();\n        firstElement?.focus();\n      }\n    }\n  };\n\n  container.addEventListener('keydown', handleKeyDown);\n  firstElement?.focus();\n\n  return () => {\n    container.removeEventListener('keydown', handleKeyDown);\n  };\n}\n\n/**\n * Get the z-index of an element\n * @param {Element} element - DOM element\n * @returns {number}\n */\nexport function getZIndex(element) {\n  let el = element;\n  let zIndex = 0;\n\n  while (el) {\n    const style = window.getComputedStyle(el);\n    const z = parseInt(style.zIndex, 10);\n\n    if (!isNaN(z) && z > zIndex) {\n      zIndex = z;\n    }\n\n    el = el.parentElement;\n  }\n\n  return zIndex;\n}\n","/**\n * TourRenderer - Handles rendering of tour steps and UI components\n */\n\nimport { Tooltip } from './components/Tooltip';\nimport { Modal } from './components/Modal';\nimport { Hotspot } from './components/Hotspot';\nimport { Slideout } from './components/Slideout';\nimport { Overlay } from './components/Overlay';\nimport { ProgressBar } from './components/ProgressBar';\nimport { findElement, waitForElement, scrollToElement, isElementVisible } from './utils/dom';\n\nexport class TourRenderer {\n  constructor(sdk) {\n    this.sdk = sdk;\n    this.container = null;\n    this.currentComponent = null;\n    this.overlay = null;\n    this.progressBar = null;\n    this.hotspots = [];\n\n    this._createContainer();\n  }\n\n  /**\n   * Render a step\n   * @param {Object} step - Step configuration\n   * @param {Object} options - Render options\n   */\n  async renderStep(step, options) {\n    // Cleanup previous step\n    this._cleanup();\n\n    const { tour, stepIndex, totalSteps, onNext, onPrev, onSkip, onClose } = options;\n\n    // Wait for target element if needed\n    let targetElement = null;\n    if (step.targetSelector) {\n      targetElement = await waitForElement(step.targetSelector, step.waitTimeout || 5000);\n\n      if (!targetElement) {\n        console.warn(`[TourRenderer] Target element not found: ${step.targetSelector}`);\n        // Show modal instead if target not found\n        step.type = 'modal';\n      }\n    }\n\n    // Scroll to element if needed\n    if (targetElement && step.scrollTo !== false) {\n      await scrollToElement(targetElement, {\n        behavior: step.scrollBehavior || 'smooth',\n        block: step.scrollBlock || 'center',\n      });\n    }\n\n    // Show overlay if configured\n    if (step.overlay !== false && targetElement) {\n      this.overlay = new Overlay({\n        targetElement,\n        onClick: step.overlayClickClose ? onClose : null,\n        padding: step.overlayPadding || 8,\n        opacity: step.overlayOpacity || 0.5,\n        theme: this.sdk.config.theme,\n      });\n      this.overlay.render(this.container);\n    }\n\n    // Show progress bar if configured\n    if (tour.settings?.showProgress !== false && totalSteps > 1) {\n      this.progressBar = new ProgressBar({\n        current: stepIndex,\n        total: totalSteps,\n        theme: this.sdk.config.theme,\n      });\n      this.progressBar.render(this.container);\n    }\n\n    // Render the appropriate component based on step type\n    const componentOptions = {\n      step,\n      targetElement,\n      stepIndex,\n      totalSteps,\n      onNext,\n      onPrev,\n      onSkip,\n      onClose,\n      showBackButton: stepIndex > 0 && tour.settings?.showBackButton !== false,\n      showSkipButton: tour.settings?.showSkipButton !== false,\n      theme: this.sdk.config.theme,\n      primaryColor: tour.settings?.primaryColor,\n    };\n\n    switch (step.type) {\n      case 'tooltip':\n        this._renderTooltip(componentOptions);\n        break;\n      case 'modal':\n        this._renderModal(componentOptions);\n        break;\n      case 'hotspot':\n        this._renderHotspot(componentOptions);\n        break;\n      case 'slideout':\n        this._renderSlideout(componentOptions);\n        break;\n      default:\n        this._renderTooltip(componentOptions);\n    }\n\n    // Handle step actions/triggers\n    this._setupStepTriggers(step, targetElement, onNext);\n  }\n\n  /**\n   * Render tooltip component\n   */\n  _renderTooltip(options) {\n    const { step, targetElement, ...rest } = options;\n\n    this.currentComponent = new Tooltip({\n      title: step.title,\n      content: step.content,\n      position: step.position || 'bottom',\n      targetElement,\n      media: step.media,\n      buttons: step.buttons,\n      ...rest,\n    });\n\n    this.currentComponent.render(this.container);\n  }\n\n  /**\n   * Render modal component\n   */\n  _renderModal(options) {\n    const { step, ...rest } = options;\n\n    this.currentComponent = new Modal({\n      title: step.title,\n      content: step.content,\n      size: step.size || 'medium',\n      media: step.media,\n      buttons: step.buttons,\n      ...rest,\n    });\n\n    this.currentComponent.render(this.container);\n  }\n\n  /**\n   * Render hotspot component\n   */\n  _renderHotspot(options) {\n    const { step, targetElement, ...rest } = options;\n\n    if (!targetElement) {\n      console.warn('[TourRenderer] Hotspot requires a target element');\n      this._renderModal(options);\n      return;\n    }\n\n    this.currentComponent = new Hotspot({\n      targetElement,\n      title: step.title,\n      content: step.content,\n      position: step.position || 'right',\n      color: step.hotspotColor,\n      pulse: step.pulse !== false,\n      ...rest,\n    });\n\n    this.currentComponent.render(this.container);\n  }\n\n  /**\n   * Render slideout component\n   */\n  _renderSlideout(options) {\n    const { step, ...rest } = options;\n\n    this.currentComponent = new Slideout({\n      title: step.title,\n      content: step.content,\n      position: step.slidePosition || 'right',\n      width: step.slideWidth,\n      media: step.media,\n      buttons: step.buttons,\n      ...rest,\n    });\n\n    this.currentComponent.render(this.container);\n  }\n\n  /**\n   * Setup step-specific triggers\n   */\n  _setupStepTriggers(step, targetElement, onNext) {\n    if (!step.trigger || !targetElement) return;\n\n    const { type, event } = step.trigger;\n\n    switch (type) {\n      case 'click':\n        const clickHandler = () => {\n          targetElement.removeEventListener('click', clickHandler);\n          onNext();\n        };\n        targetElement.addEventListener('click', clickHandler);\n        this._triggerCleanup = () => targetElement.removeEventListener('click', clickHandler);\n        break;\n\n      case 'input':\n        const inputHandler = () => {\n          if (targetElement.value.length > 0) {\n            targetElement.removeEventListener('input', inputHandler);\n            onNext();\n          }\n        };\n        targetElement.addEventListener('input', inputHandler);\n        this._triggerCleanup = () => targetElement.removeEventListener('input', inputHandler);\n        break;\n\n      case 'custom':\n        // Custom event listener\n        if (event) {\n          const customHandler = () => {\n            document.removeEventListener(event, customHandler);\n            onNext();\n          };\n          document.addEventListener(event, customHandler);\n          this._triggerCleanup = () => document.removeEventListener(event, customHandler);\n        }\n        break;\n    }\n  }\n\n  /**\n   * Destroy all rendered components\n   */\n  destroy() {\n    this._cleanup();\n\n    if (this.container && this.container.parentNode) {\n      this.container.parentNode.removeChild(this.container);\n    }\n\n    this.container = null;\n  }\n\n  // Private methods\n\n  _createContainer() {\n    // Remove existing container if any\n    const existing = document.getElementById('botbuilder-tours-container');\n    if (existing) {\n      existing.parentNode.removeChild(existing);\n    }\n\n    this.container = document.createElement('div');\n    this.container.id = 'botbuilder-tours-container';\n    this.container.className = 'botbuilder-tours';\n    document.body.appendChild(this.container);\n  }\n\n  _cleanup() {\n    if (this.currentComponent) {\n      this.currentComponent.destroy();\n      this.currentComponent = null;\n    }\n\n    if (this.overlay) {\n      this.overlay.destroy();\n      this.overlay = null;\n    }\n\n    if (this.progressBar) {\n      this.progressBar.destroy();\n      this.progressBar = null;\n    }\n\n    this.hotspots.forEach((hotspot) => hotspot.destroy());\n    this.hotspots = [];\n\n    if (this._triggerCleanup) {\n      this._triggerCleanup();\n      this._triggerCleanup = null;\n    }\n  }\n}\n","/**\n * Event Emitter\n * Simple event emitter for SDK events\n */\n\nexport class EventEmitter {\n  constructor() {\n    this._events = {};\n    this._onceEvents = {};\n  }\n\n  /**\n   * Add an event listener\n   * @param {string} event - Event name\n   * @param {Function} callback - Callback function\n   * @returns {this}\n   */\n  on(event, callback) {\n    if (typeof callback !== 'function') {\n      throw new Error('Callback must be a function');\n    }\n\n    if (!this._events[event]) {\n      this._events[event] = [];\n    }\n\n    this._events[event].push(callback);\n    return this;\n  }\n\n  /**\n   * Add a one-time event listener\n   * @param {string} event - Event name\n   * @param {Function} callback - Callback function\n   * @returns {this}\n   */\n  once(event, callback) {\n    if (typeof callback !== 'function') {\n      throw new Error('Callback must be a function');\n    }\n\n    if (!this._onceEvents[event]) {\n      this._onceEvents[event] = [];\n    }\n\n    this._onceEvents[event].push(callback);\n    return this;\n  }\n\n  /**\n   * Remove an event listener\n   * @param {string} event - Event name\n   * @param {Function} callback - Callback function to remove\n   * @returns {this}\n   */\n  off(event, callback) {\n    if (this._events[event]) {\n      this._events[event] = this._events[event].filter((cb) => cb !== callback);\n    }\n\n    if (this._onceEvents[event]) {\n      this._onceEvents[event] = this._onceEvents[event].filter((cb) => cb !== callback);\n    }\n\n    return this;\n  }\n\n  /**\n   * Remove all listeners for an event (or all events)\n   * @param {string} [event] - Event name (optional)\n   * @returns {this}\n   */\n  removeAllListeners(event) {\n    if (event) {\n      delete this._events[event];\n      delete this._onceEvents[event];\n    } else {\n      this._events = {};\n      this._onceEvents = {};\n    }\n\n    return this;\n  }\n\n  /**\n   * Emit an event\n   * @param {string} event - Event name\n   * @param {...*} args - Arguments to pass to callbacks\n   * @returns {boolean} - Whether event had listeners\n   */\n  emit(event, ...args) {\n    let hasListeners = false;\n\n    // Regular listeners\n    if (this._events[event]) {\n      hasListeners = true;\n      this._events[event].forEach((callback) => {\n        try {\n          callback(...args);\n        } catch (error) {\n          console.error(`[EventEmitter] Error in ${event} listener:`, error);\n        }\n      });\n    }\n\n    // One-time listeners\n    if (this._onceEvents[event]) {\n      hasListeners = true;\n      const callbacks = [...this._onceEvents[event]];\n      this._onceEvents[event] = [];\n\n      callbacks.forEach((callback) => {\n        try {\n          callback(...args);\n        } catch (error) {\n          console.error(`[EventEmitter] Error in ${event} once listener:`, error);\n        }\n      });\n    }\n\n    // Wildcard listeners\n    if (this._events['*']) {\n      this._events['*'].forEach((callback) => {\n        try {\n          callback(event, ...args);\n        } catch (error) {\n          console.error(`[EventEmitter] Error in wildcard listener:`, error);\n        }\n      });\n    }\n\n    return hasListeners;\n  }\n\n  /**\n   * Get listener count for an event\n   * @param {string} event - Event name\n   * @returns {number}\n   */\n  listenerCount(event) {\n    const regular = this._events[event]?.length || 0;\n    const once = this._onceEvents[event]?.length || 0;\n    return regular + once;\n  }\n\n  /**\n   * Get all event names\n   * @returns {string[]}\n   */\n  eventNames() {\n    const events = new Set([\n      ...Object.keys(this._events),\n      ...Object.keys(this._onceEvents),\n    ]);\n    return Array.from(events);\n  }\n\n  /**\n   * Get listeners for an event\n   * @param {string} event - Event name\n   * @returns {Function[]}\n   */\n  listeners(event) {\n    return [\n      ...(this._events[event] || []),\n      ...(this._onceEvents[event] || []),\n    ];\n  }\n}\n\n/**\n * SDK Event Types\n */\nexport const EVENTS = {\n  // SDK lifecycle\n  SDK_INITIALIZED: 'sdk:initialized',\n  SDK_DESTROYED: 'sdk:destroyed',\n\n  // User events\n  USER_IDENTIFIED: 'user:identified',\n\n  // Tour events\n  TOUR_STARTED: 'tour:started',\n  TOUR_COMPLETED: 'tour:completed',\n  TOUR_DISMISSED: 'tour:dismissed',\n  TOUR_ERROR: 'tour:error',\n\n  // Step events\n  STEP_VIEWED: 'step:viewed',\n  STEP_COMPLETED: 'step:completed',\n  STEP_SKIPPED: 'step:skipped',\n\n  // Progress events\n  PROGRESS_SAVED: 'progress:saved',\n  PROGRESS_RESET: 'progress:reset',\n};\n\n/**\n * Create a typed event emitter with predefined events\n */\nexport function createTypedEmitter() {\n  const emitter = new EventEmitter();\n\n  // Add type hints for IDE autocomplete\n  return {\n    on: (event, callback) => emitter.on(event, callback),\n    once: (event, callback) => emitter.once(event, callback),\n    off: (event, callback) => emitter.off(event, callback),\n    emit: (event, ...args) => emitter.emit(event, ...args),\n    removeAllListeners: (event) => emitter.removeAllListeners(event),\n    EVENTS,\n  };\n}\n\n/**\n * Debounce helper\n * @param {Function} func - Function to debounce\n * @param {number} wait - Wait time in milliseconds\n * @returns {Function}\n */\nexport function debounce(func, wait) {\n  let timeout;\n\n  return function executedFunction(...args) {\n    const later = () => {\n      clearTimeout(timeout);\n      func(...args);\n    };\n\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n  };\n}\n\n/**\n * Throttle helper\n * @param {Function} func - Function to throttle\n * @param {number} limit - Time limit in milliseconds\n * @returns {Function}\n */\nexport function throttle(func, limit) {\n  let inThrottle;\n\n  return function executedFunction(...args) {\n    if (!inThrottle) {\n      func(...args);\n      inThrottle = true;\n      setTimeout(() => (inThrottle = false), limit);\n    }\n  };\n}\n","/**\n * BotBuilder Tours SDK\n * Product tours for customer websites\n */\n\nimport { TourEngine } from './TourEngine';\nimport { TourRenderer } from './TourRenderer';\nimport { EventEmitter } from './utils/events';\nimport { getVisitorId, setVisitorId, getProgress, setProgress, clearProgress } from './utils/storage';\nimport { initApi } from './utils/api';\n\nclass TourSDK extends EventEmitter {\n  constructor() {\n    super();\n    this.config = null;\n    this.engine = null;\n    this.renderer = null;\n    this.currentTour = null;\n    this.currentStepIndex = 0;\n    this.initialized = false;\n    this.visitorId = null;\n    this.userId = null;\n    this.userTraits = {};\n  }\n\n  /**\n   * Initialize the SDK\n   * @param {Object} config - Configuration object\n   * @param {string} config.workspaceId - Workspace ID (required)\n   * @param {string} [config.userId] - User ID (optional)\n   * @param {string} [config.visitorId] - Visitor ID (optional, auto-generated if not provided)\n   * @param {string} [config.apiUrl] - API URL (optional, defaults to production)\n   * @param {boolean} [config.autoStart=true] - Auto start tours based on targeting\n   * @param {string} [config.theme='light'] - Theme: 'light' or 'dark'\n   */\n  init(config) {\n    if (this.initialized) {\n      console.warn('[BotBuilderTours] SDK already initialized');\n      return this;\n    }\n\n    if (!config.workspaceId) {\n      throw new Error('[BotBuilderTours] workspaceId is required');\n    }\n\n    this.config = {\n      workspaceId: config.workspaceId,\n      userId: config.userId || null,\n      visitorId: config.visitorId || getVisitorId(),\n      apiUrl: config.apiUrl || 'https://api.botbuilder.app',\n      autoStart: config.autoStart !== false,\n      theme: config.theme || 'light',\n    };\n\n    // Save visitor ID\n    this.visitorId = this.config.visitorId;\n    setVisitorId(this.visitorId);\n\n    if (this.config.userId) {\n      this.userId = this.config.userId;\n    }\n\n    // Initialize API\n    initApi(this.config.apiUrl, this.config.workspaceId);\n\n    // Initialize engine and renderer\n    this.engine = new TourEngine(this);\n    this.renderer = new TourRenderer(this);\n\n    // Apply theme\n    this._applyTheme(this.config.theme);\n\n    this.initialized = true;\n    this.emit('sdk:initialized', { config: this.config });\n\n    // Auto-load and start tours if enabled\n    if (this.config.autoStart) {\n      this._autoStartTours();\n    }\n\n    return this;\n  }\n\n  /**\n   * Identify a user\n   * @param {string} userId - User ID\n   * @param {Object} [traits] - User traits for targeting\n   */\n  identify(userId, traits = {}) {\n    if (!this.initialized) {\n      throw new Error('[BotBuilderTours] SDK not initialized. Call init() first.');\n    }\n\n    this.userId = userId;\n    this.userTraits = { ...this.userTraits, ...traits };\n\n    this.emit('user:identified', { userId, traits: this.userTraits });\n\n    // Re-check targeting after identification\n    if (this.config.autoStart) {\n      this._autoStartTours();\n    }\n\n    return this;\n  }\n\n  /**\n   * Manually start a tour\n   * @param {string} tourId - Tour ID\n   */\n  async startTour(tourId) {\n    if (!this.initialized) {\n      throw new Error('[BotBuilderTours] SDK not initialized. Call init() first.');\n    }\n\n    if (this.currentTour) {\n      console.warn('[BotBuilderTours] A tour is already running. End it first.');\n      return;\n    }\n\n    try {\n      const tour = await this.engine.loadTour(tourId);\n      if (!tour) {\n        console.error(`[BotBuilderTours] Tour ${tourId} not found`);\n        return;\n      }\n\n      this.currentTour = tour;\n      this.currentStepIndex = 0;\n\n      // Check for saved progress\n      const progress = getProgress(tourId);\n      if (progress && progress.currentStep > 0) {\n        this.currentStepIndex = progress.currentStep;\n      }\n\n      this.emit('tour:started', { tour: this.currentTour, stepIndex: this.currentStepIndex });\n      this.engine.trackEvent('tour_started', { tourId });\n\n      this._showCurrentStep();\n    } catch (error) {\n      console.error('[BotBuilderTours] Failed to start tour:', error);\n      this.emit('tour:error', { tourId, error });\n    }\n  }\n\n  /**\n   * End the current tour\n   * @param {boolean} [completed=true] - Whether tour was completed or dismissed\n   */\n  endTour(completed = true) {\n    if (!this.currentTour) {\n      return;\n    }\n\n    const tour = this.currentTour;\n    const eventType = completed ? 'tour:completed' : 'tour:dismissed';\n\n    this.renderer.destroy();\n\n    this.engine.trackEvent(completed ? 'tour_completed' : 'tour_dismissed', {\n      tourId: tour.id,\n      completedSteps: this.currentStepIndex + 1,\n      totalSteps: tour.steps.length,\n    });\n\n    if (completed) {\n      this.engine.saveProgress(tour.id, tour.steps.length - 1, 'completed');\n    }\n\n    this.emit(eventType, { tour, completedSteps: this.currentStepIndex + 1 });\n\n    this.currentTour = null;\n    this.currentStepIndex = 0;\n  }\n\n  /**\n   * Go to next step\n   */\n  nextStep() {\n    if (!this.currentTour) {\n      return;\n    }\n\n    const tour = this.currentTour;\n\n    if (this.currentStepIndex >= tour.steps.length - 1) {\n      // Last step, complete the tour\n      this.endTour(true);\n      return;\n    }\n\n    this.emit('step:completed', {\n      tour,\n      step: tour.steps[this.currentStepIndex],\n      stepIndex: this.currentStepIndex,\n    });\n\n    this.currentStepIndex++;\n    this.engine.saveProgress(tour.id, this.currentStepIndex, 'in_progress');\n\n    this._showCurrentStep();\n  }\n\n  /**\n   * Go to previous step\n   */\n  prevStep() {\n    if (!this.currentTour || this.currentStepIndex === 0) {\n      return;\n    }\n\n    this.currentStepIndex--;\n    this._showCurrentStep();\n  }\n\n  /**\n   * Skip the current tour\n   */\n  skipTour() {\n    if (!this.currentTour) {\n      return;\n    }\n\n    this.engine.saveProgress(this.currentTour.id, this.currentStepIndex, 'skipped');\n    this.endTour(false);\n  }\n\n  /**\n   * Go to a specific step\n   * @param {number} stepIndex - Step index (0-based)\n   */\n  goToStep(stepIndex) {\n    if (!this.currentTour) {\n      return;\n    }\n\n    if (stepIndex < 0 || stepIndex >= this.currentTour.steps.length) {\n      console.warn('[BotBuilderTours] Invalid step index');\n      return;\n    }\n\n    this.currentStepIndex = stepIndex;\n    this._showCurrentStep();\n  }\n\n  /**\n   * Get current tour state\n   */\n  getState() {\n    return {\n      initialized: this.initialized,\n      currentTour: this.currentTour,\n      currentStepIndex: this.currentStepIndex,\n      totalSteps: this.currentTour?.steps.length || 0,\n      userId: this.userId,\n      visitorId: this.visitorId,\n    };\n  }\n\n  /**\n   * Reset progress for a tour\n   * @param {string} tourId - Tour ID\n   */\n  resetProgress(tourId) {\n    clearProgress(tourId);\n    this.emit('progress:reset', { tourId });\n  }\n\n  /**\n   * Destroy the SDK instance\n   */\n  destroy() {\n    if (this.currentTour) {\n      this.endTour(false);\n    }\n\n    if (this.renderer) {\n      this.renderer.destroy();\n    }\n\n    this.removeAllListeners();\n    this.initialized = false;\n    this.config = null;\n    this.engine = null;\n    this.renderer = null;\n\n    this.emit('sdk:destroyed');\n  }\n\n  // Private methods\n\n  _showCurrentStep() {\n    const step = this.currentTour.steps[this.currentStepIndex];\n\n    this.renderer.renderStep(step, {\n      tour: this.currentTour,\n      stepIndex: this.currentStepIndex,\n      totalSteps: this.currentTour.steps.length,\n      onNext: () => this.nextStep(),\n      onPrev: () => this.prevStep(),\n      onSkip: () => this.skipTour(),\n      onClose: () => this.endTour(false),\n    });\n\n    this.emit('step:viewed', {\n      tour: this.currentTour,\n      step,\n      stepIndex: this.currentStepIndex,\n    });\n\n    this.engine.trackEvent('step_viewed', {\n      tourId: this.currentTour.id,\n      stepId: step.id,\n      stepIndex: this.currentStepIndex,\n    });\n  }\n\n  async _autoStartTours() {\n    try {\n      const tours = await this.engine.loadActiveTours();\n\n      for (const tour of tours) {\n        const context = {\n          url: window.location.href,\n          pathname: window.location.pathname,\n          userId: this.userId,\n          visitorId: this.visitorId,\n          userTraits: this.userTraits,\n        };\n\n        if (this.engine.shouldShowTour(tour, context)) {\n          await this.startTour(tour.id);\n          break; // Only start one tour at a time\n        }\n      }\n    } catch (error) {\n      console.error('[BotBuilderTours] Failed to auto-start tours:', error);\n    }\n  }\n\n  _applyTheme(theme) {\n    document.documentElement.setAttribute('data-botbuilder-theme', theme);\n  }\n}\n\n// Create singleton instance\nconst instance = new TourSDK();\n\n// Export as global for UMD\nif (typeof window !== 'undefined') {\n  window.BotBuilderTours = instance;\n}\n\nexport default instance;\nexport { TourSDK };\n","/**\n * BotBuilder Tours SDK\n * Entry point for the SDK\n *\n * Usage:\n * <script src=\"https://yourdomain.com/tours-sdk.min.js\"></script>\n * <script>\n *   BotBuilderTours.init({ apiKey: 'xxx' });\n *   BotBuilderTours.startTour('tour-id');\n * </script>\n *\n * SDK Methods:\n * - init(config)        Initialize the SDK\n * - startTour(tourId)   Start a specific tour\n * - stopTour()          Stop the current tour\n * - nextStep()          Go to next step\n * - prevStep()          Go to previous step\n * - goToStep(index)     Go to a specific step\n * - onComplete(cb)      Register completion callback\n * - onSkip(cb)          Register skip callback\n */\n\nimport TourSDKInstance, { TourSDK } from './TourSDK';\nimport { TourEngine } from './TourEngine';\nimport { TourRenderer } from './TourRenderer';\nimport { EventEmitter, EVENTS } from './utils/events';\n\n// SDK instance (singleton)\nconst sdk = TourSDKInstance;\n\n// ==========================================\n// PUBLIC API METHODS\n// ==========================================\n\n/**\n * Initialize the SDK\n * @param {Object} config - Configuration object\n * @param {string} config.apiKey - API key (alias for workspaceId)\n * @param {string} [config.workspaceId] - Workspace ID\n * @param {string} [config.userId] - User ID for targeting\n * @param {boolean} [config.autoStart=true] - Auto start tours\n * @param {string} [config.theme='light'] - Theme: 'light' or 'dark'\n */\nfunction init(config) {\n  // Support apiKey as alias for workspaceId\n  const normalizedConfig = {\n    ...config,\n    workspaceId: config.workspaceId || config.apiKey\n  };\n  return sdk.init(normalizedConfig);\n}\n\n/**\n * Start a specific tour\n * @param {string} tourId - Tour ID to start\n */\nfunction startTour(tourId) {\n  return sdk.startTour(tourId);\n}\n\n/**\n * Stop the current tour\n * Alias for endTour(false)\n */\nfunction stopTour() {\n  return sdk.endTour(false);\n}\n\n/**\n * Go to the next step\n */\nfunction nextStep() {\n  return sdk.nextStep();\n}\n\n/**\n * Go to the previous step\n */\nfunction prevStep() {\n  return sdk.prevStep();\n}\n\n/**\n * Go to a specific step\n * @param {number} index - Step index (0-based)\n */\nfunction goToStep(index) {\n  return sdk.goToStep(index);\n}\n\n/**\n * Register a callback for tour completion\n * @param {Function} callback - Callback function\n */\nfunction onComplete(callback) {\n  sdk.on('tour:completed', callback);\n  return sdk;\n}\n\n/**\n * Register a callback for tour skip\n * @param {Function} callback - Callback function\n */\nfunction onSkip(callback) {\n  sdk.on('tour:dismissed', callback);\n  return sdk;\n}\n\n/**\n * Register a callback for step viewed\n * @param {Function} callback - Callback function\n */\nfunction onStepViewed(callback) {\n  sdk.on('step:viewed', callback);\n  return sdk;\n}\n\n/**\n * Register a callback for step completed\n * @param {Function} callback - Callback function\n */\nfunction onStepComplete(callback) {\n  sdk.on('step:completed', callback);\n  return sdk;\n}\n\n/**\n * Register a callback for tour started\n * @param {Function} callback - Callback function\n */\nfunction onStart(callback) {\n  sdk.on('tour:started', callback);\n  return sdk;\n}\n\n/**\n * Identify a user\n * @param {string} userId - User ID\n * @param {Object} [traits] - User traits for targeting\n */\nfunction identify(userId, traits) {\n  return sdk.identify(userId, traits);\n}\n\n/**\n * Get current tour state\n */\nfunction getState() {\n  return sdk.getState();\n}\n\n/**\n * Reset progress for a tour\n * @param {string} tourId - Tour ID\n */\nfunction resetProgress(tourId) {\n  return sdk.resetProgress(tourId);\n}\n\n/**\n * Destroy the SDK instance\n */\nfunction destroy() {\n  return sdk.destroy();\n}\n\n/**\n * End tour (alias with completion status)\n * @param {boolean} [completed=true] - Whether tour was completed\n */\nfunction endTour(completed = true) {\n  return sdk.endTour(completed);\n}\n\n/**\n * Skip current tour\n */\nfunction skipTour() {\n  return sdk.skipTour();\n}\n\n// ==========================================\n// EXPORTS\n// ==========================================\n\n// Named exports for direct access\nexport {\n  // Core API methods\n  init,\n  startTour,\n  stopTour,\n  nextStep,\n  prevStep,\n  goToStep,\n  onComplete,\n  onSkip,\n  onStepViewed,\n  onStepComplete,\n  onStart,\n  identify,\n  getState,\n  resetProgress,\n  destroy,\n  endTour,\n  skipTour,\n\n  // Classes for advanced usage\n  TourSDK,\n  TourEngine,\n  TourRenderer,\n  EventEmitter,\n  EVENTS\n};\n\n// Export utilities for custom implementations\nexport * from './utils/dom';\nexport * from './utils/positioning';\nexport * from './utils/storage';\nexport * from './utils/api';\nexport * from './utils/events';\n\n// Export components for custom rendering\nexport { Tooltip } from './components/Tooltip';\nexport { Modal } from './components/Modal';\nexport { Hotspot } from './components/Hotspot';\nexport { Slideout } from './components/Slideout';\nexport { Overlay, Highlight } from './components/Overlay';\nexport { ProgressBar, ProgressDots } from './components/ProgressBar';\n\n// Default export - SDK instance with all methods\nexport default {\n  // SDK instance\n  sdk,\n\n  // Public API methods\n  init,\n  startTour,\n  stopTour,\n  nextStep,\n  prevStep,\n  goToStep,\n  onComplete,\n  onSkip,\n  onStepViewed,\n  onStepComplete,\n  onStart,\n  identify,\n  getState,\n  resetProgress,\n  destroy,\n  endTour,\n  skipTour,\n\n  // Classes\n  TourSDK,\n  TourEngine,\n  TourRenderer,\n  EventEmitter,\n  EVENTS\n};\n"],"names":["API_URL","WORKSPACE_ID","initApi","apiUrl","workspaceId","request","endpoint","options","url","defaultHeaders","response","fetch","headers","ok","errorData","json","catch","Error","message","status","error","console","initSession","visitorId","userId","method","body","JSON","stringify","window","location","href","referrer","document","userAgent","navigator","timestamp","Date","toISOString","fetchActiveTours","params","URLSearchParams","pathname","append","toString","tours","fetchTour","tourId","tour","trackEvent","eventData","payload","sessionId","getSessionId","pageUrl","pageTitle","title","sendBeacon","blob","Blob","type","syncProgress","progressData","fetchProgress","batchTrackEvents","events","reportError","now","Math","random","substring","eventQueue","isOnline","onLine","addEventListener","flushEventQueue","queueEvent","push","queuedAt","length","STORAGE_PREFIX","VISITOR_ID_KEY","PROGRESS_KEY","SESSION_KEY","generateVisitorId","randomPart","getVisitorId","localStorage","getItem","setItem","warn","setVisitorId","getProgress","data","parse","setProgress","clearProgress","removeItem","clearAllProgress","keys","Object","forEach","key","startsWith","getAllProgress","progress","replace","getSession","sessionStorage","setSession","existing","clearSession","isTourCompleted","isTourSkipped","getCurrentStep","currentStep","markTourAsSeen","seen","seenAt","hasTourBeenSeen","dismissTourForSession","session","dismissed","includes","isTourDismissedForSession","getStorageInfo","totalSize","tourDataSize","hasOwnProperty","size","totalSizeKB","toFixed","tourDataSizeKB","TourEngine","constructor","sdk","toursCache","Map","activeToursCache","lastFetch","cacheDuration","loadActiveTours","config","set","id","loadTour","has","get","checkTargeting","targeting","rules","context","hostname","search","hash","userTraits","device","_getDeviceInfo","operator","every","rule","_evaluateRule","some","shouldShowTour","startDate","endDate","getUserProgress","settings","allowReplay","skipCooldown","cooldownEnd","updatedAt","getTime","currentUrl","pageUrlMatch","regex","RegExp","test","eventType","apiTrackEvent","saveProgress","clearCache","clear","field","value","fieldValue","_getUrlField","_getUserField","_compareValues","targetValue","undefined","strValue","String","toLowerCase","strTarget","endsWith","Number","list","Array","isArray","split","map","v","trim","notList","ua","_getDeviceType","browser","_getBrowser","os","_getOS","screenWidth","screen","width","screenHeight","height","language","SPACING","calculatePosition","targetRect","tooltipRect","preferredPosition","positions","top","left","bottom","right","viewportWidth","innerWidth","viewportHeight","innerHeight","fits","position","actualPosition","adjustForViewport","dimensions","padding","getArrowPosition","arrowPositions","calculateArrowOffset","tooltipCenter","targetCenter","offset","direction","getOptimalPosition","tooltipSize","spaceAbove","spaceBelow","spaceLeft","spaceRight","spaces","space","fittingPositions","entries","filter","sort","a","b","allPositions","calculateModalPosition","modalSize","alignment","calculateSlideoutPosition","side","checkOverflow","overflowTop","overflowRight","overflowBottom","overflowLeft","getCenteredPosition","Tooltip","content","targetElement","media","buttons","stepIndex","totalSteps","showBackButton","showSkipButton","onNext","onPrev","onSkip","onClose","theme","primaryColor","element","arrowElement","_resizeHandler","_scrollHandler","render","container","_createTooltip","appendChild","_positionTooltip","_setupListeners","_animateIn","destroy","_removeListeners","parentNode","classList","add","setTimeout","removeChild","createElement","className","style","setProperty","wrapper","closeBtn","innerHTML","setAttribute","onclick","e","preventDefault","mediaEl","_createMedia","header","titleEl","textContent","contentEl","footer","actions","btn","button","variant","text","action","onClick","skipBtn","backBtn","nextBtn","img","src","alt","video","controls","autoplay","muted","loop","iframe","allowFullscreen","transform","display","getBoundingClientRect","adjusted","arrowPosition","_keyHandler","removeEventListener","requestAnimationFrame","Modal","closeOnBackdrop","closeOnEscape","backdropElement","_createBackdrop","_createModal","focus","target","i","dot","lottieContainer","Hotspot","color","pulse","triggerOn","hotspotElement","tooltipElement","isTooltipVisible","_createHotspot","_positionHotspot","backgroundColor","ring","borderColor","arrow","stopPropagation","hotspotRect","querySelector","_showTooltip","_hideTooltip","remove","_toggleTooltip","onmouseenter","onmouseleave","matches","_clickOutsideHandler","contains","Slideout","showOverlay","closeOnOverlay","overlayElement","_createOverlay","_createSlideout","progressBar","progressFill","progressText","buttonGroup","Overlay","opacity","borderRadius","spotlightElement","_updateSpotlight","svg","createElementNS","defs","mask","maskRect","overlayRect","tagName","rect","Highlight","borderWidth","_createHighlight","_updatePosition","border","boxShadow","ProgressBar","current","total","showStepNumbers","_createProgressBar","update","_updateProgress","track","step","connector","steps","querySelectorAll","connectors","toggle","ProgressDots","_createDots","_updateDots","dots","findElement","selector","isElementVisible","getComputedStyle","visibility","parseFloat","documentElement","clientHeight","clientWidth","isElementFullyVisible","getElementPosition","scrollLeft","pageXOffset","scrollTop","pageYOffset","absoluteTop","absoluteLeft","centerX","centerY","scrollToElement","Promise","resolve","behavior","block","inline","scrollIntoView","scrollBy","scrollTimeout","waitForElement","timeout","startTime","observer","MutationObserver","mutations","obs","disconnect","observe","childList","subtree","attributes","waitForElementVisible","highlightElement","duration","originalOutline","outline","originalTransition","transition","cleanup","getFocusableElements","focusableSelectors","join","from","createFocusTrap","focusableElements","firstElement","lastElement","handleKeyDown","shiftKey","activeElement","getZIndex","el","zIndex","z","parseInt","isNaN","parentElement","TourRenderer","currentComponent","overlay","hotspots","_createContainer","renderStep","_cleanup","targetSelector","waitTimeout","scrollTo","scrollBehavior","scrollBlock","overlayClickClose","overlayPadding","overlayOpacity","showProgress","componentOptions","_renderTooltip","_renderModal","_renderHotspot","_renderSlideout","_setupStepTriggers","rest","hotspotColor","slidePosition","slideWidth","trigger","event","clickHandler","_triggerCleanup","inputHandler","customHandler","getElementById","hotspot","EventEmitter","_events","_onceEvents","on","callback","once","off","cb","removeAllListeners","emit","args","hasListeners","callbacks","listenerCount","regular","eventNames","Set","listeners","EVENTS","SDK_INITIALIZED","SDK_DESTROYED","USER_IDENTIFIED","TOUR_STARTED","TOUR_COMPLETED","TOUR_DISMISSED","TOUR_ERROR","STEP_VIEWED","STEP_COMPLETED","STEP_SKIPPED","PROGRESS_SAVED","PROGRESS_RESET","createTypedEmitter","emitter","debounce","func","wait","executedFunction","later","clearTimeout","throttle","limit","inThrottle","TourSDK","engine","renderer","currentTour","currentStepIndex","initialized","init","autoStart","_applyTheme","_autoStartTours","identify","traits","startTour","_showCurrentStep","endTour","completed","completedSteps","nextStep","prevStep","skipTour","goToStep","getState","resetProgress","stepId","instance","BotBuilderTours","TourSDKInstance","normalizedConfig","apiKey","stopTour","index","onComplete","onStepViewed","onStepComplete","onStart"],"mappings":";;;;;;;;;;;;AAAA;AACA;AACA;AACA;;AAEA,IAAIA,OAAO,GAAG,4BAA4B;AAC1C,IAAIC,YAAY,GAAG,IAAI;;AAEvB;AACA;AACA;AACA;AACA;AACO,SAASC,OAAOA,CAACC,MAAM,EAAEC,WAAW,EAAE;AAC3CJ,EAAAA,OAAO,GAAGG,MAAM;AAChBF,EAAAA,YAAY,GAAGG,WAAW;AAC5B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,eAAeC,OAAOA,CAACC,QAAQ,EAAEC,OAAO,GAAG,EAAE,EAAE;AAC7C,EAAA,MAAMC,GAAG,GAAG,CAAA,EAAGR,OAAO,CAAA,EAAGM,QAAQ,CAAA,CAAE;AAEnC,EAAA,MAAMG,cAAc,GAAG;AACrB,IAAA,cAAc,EAAE,kBAAkB;AAClC,IAAA,gBAAgB,EAAER;GACnB;EAED,IAAI;AACF,IAAA,MAAMS,QAAQ,GAAG,MAAMC,KAAK,CAACH,GAAG,EAAE;AAChC,MAAA,GAAGD,OAAO;AACVK,MAAAA,OAAO,EAAE;AACP,QAAA,GAAGH,cAAc;AACjB,QAAA,GAAGF,OAAO,CAACK;AACb;AACF,KAAC,CAAC;AAEF,IAAA,IAAI,CAACF,QAAQ,CAACG,EAAE,EAAE;AAChB,MAAA,MAAMC,SAAS,GAAG,MAAMJ,QAAQ,CAACK,IAAI,EAAE,CAACC,KAAK,CAAC,OAAO,EAAE,CAAC,CAAC;AACzD,MAAA,MAAM,IAAIC,KAAK,CAACH,SAAS,CAACI,OAAO,IAAI,CAAA,KAAA,EAAQR,QAAQ,CAACS,MAAM,CAAA,CAAE,CAAC;AACjE,IAAA;AAEA,IAAA,OAAO,MAAMT,QAAQ,CAACK,IAAI,EAAE;EAC9B,CAAC,CAAC,OAAOK,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,CAAA,8BAAA,EAAiCd,QAAQ,CAAA,CAAE,EAAEc,KAAK,CAAC;AACjE,IAAA,MAAMA,KAAK;AACb,EAAA;AACF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACO,eAAeE,WAAWA,CAAClB,WAAW,EAAEG,OAAO,GAAG,EAAE,EAAE;EAC3D,MAAM;IAAEgB,SAAS;AAAEC,IAAAA;AAAO,GAAC,GAAGjB,OAAO;EAErC,OAAOF,OAAO,CAAC,wBAAwB,EAAE;AACvCoB,IAAAA,MAAM,EAAE,MAAM;AACdC,IAAAA,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;MACnBxB,WAAW;MACXmB,SAAS;MACTC,MAAM;AACNhB,MAAAA,GAAG,EAAEqB,MAAM,CAACC,QAAQ,CAACC,IAAI;MACzBC,QAAQ,EAAEC,QAAQ,CAACD,QAAQ;MAC3BE,SAAS,EAAEC,SAAS,CAACD,SAAS;AAC9BE,MAAAA,SAAS,EAAE,IAAIC,IAAI,EAAE,CAACC,WAAW;KAClC;AACH,GAAC,CAAC;AACJ;;AAEA;AACA;AACA;AACA;AACA;AACA;AACO,eAAeC,gBAAgBA,CAACnC,WAAW,EAAEG,OAAO,GAAG,EAAE,EAAE;EAChE,MAAM;IAAEgB,SAAS;AAAEC,IAAAA;AAAO,GAAC,GAAGjB,OAAO;AAErC,EAAA,MAAMiC,MAAM,GAAG,IAAIC,eAAe,CAAC;IACjCrC,WAAW;AACXI,IAAAA,GAAG,EAAEqB,MAAM,CAACC,QAAQ,CAACY;AACvB,GAAC,CAAC;EAEF,IAAInB,SAAS,EAAEiB,MAAM,CAACG,MAAM,CAAC,WAAW,EAAEpB,SAAS,CAAC;EACpD,IAAIC,MAAM,EAAEgB,MAAM,CAACG,MAAM,CAAC,QAAQ,EAAEnB,MAAM,CAAC;AAE3C,EAAA,MAAMd,QAAQ,GAAG,MAAML,OAAO,CAAC,CAAA,kBAAA,EAAqBmC,MAAM,CAACI,QAAQ,EAAE,CAAA,CAAE,CAAC;AACxE,EAAA,OAAOlC,QAAQ,CAACmC,KAAK,IAAI,EAAE;AAC7B;;AAEA;AACA;AACA;AACA;AACA;AACO,eAAeC,SAASA,CAACC,MAAM,EAAE;EACtC,MAAMrC,QAAQ,GAAG,MAAML,OAAO,CAAC,CAAA,kBAAA,EAAqB0C,MAAM,EAAE,CAAC;AAC7D,EAAA,OAAOrC,QAAQ,CAACsC,IAAI,IAAItC,QAAQ;AAClC;;AAEA;AACA;AACA;AACA;AACA;AACO,eAAeuC,UAAUA,CAACC,SAAS,EAAE;AAC1C,EAAA,MAAMC,OAAO,GAAG;AACd,IAAA,GAAGD,SAAS;AACZ9C,IAAAA,WAAW,EAAEH,YAAY;AACzBmC,IAAAA,SAAS,EAAEc,SAAS,CAACd,SAAS,IAAI,IAAIC,IAAI,EAAE,CAACC,WAAW,EAAE;IAC1Dc,SAAS,EAAEC,YAAY,EAAE;AACzBC,IAAAA,OAAO,EAAEzB,MAAM,CAACC,QAAQ,CAACC,IAAI;IAC7BwB,SAAS,EAAEtB,QAAQ,CAACuB;GACrB;;AAED;EACA,IAAIrB,SAAS,CAACsB,UAAU,EAAE;AACxB,IAAA,MAAMC,IAAI,GAAG,IAAIC,IAAI,CAAC,CAAChC,IAAI,CAACC,SAAS,CAACuB,OAAO,CAAC,CAAC,EAAE;AAAES,MAAAA,IAAI,EAAE;AAAmB,KAAC,CAAC;IAC9EzB,SAAS,CAACsB,UAAU,CAAC,CAAA,EAAGzD,OAAO,CAAA,uBAAA,CAAyB,EAAE0D,IAAI,CAAC;AAC/D,IAAA;AACF,EAAA;;AAEA;EACA,OAAOrD,OAAO,CAAC,yBAAyB,EAAE;AACxCoB,IAAAA,MAAM,EAAE,MAAM;AACdC,IAAAA,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACuB,OAAO;AAC9B,GAAC,CAAC;AACJ;;AAEA;AACA;AACA;AACA;AACA;AACO,eAAeU,YAAYA,CAACC,YAAY,EAAE;EAC/C,OAAOzD,OAAO,CAAC,4BAA4B,EAAE;AAC3CoB,IAAAA,MAAM,EAAE,MAAM;AACdC,IAAAA,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;AACnB,MAAA,GAAGkC,YAAY;AACf1D,MAAAA,WAAW,EAAEH;KACd;AACH,GAAC,CAAC;AACJ;;AAEA;AACA;AACA;AACA;AACA;AACA;AACO,eAAe8D,aAAaA,CAAChB,MAAM,EAAExB,SAAS,EAAE;AACrD,EAAA,MAAMiB,MAAM,GAAG,IAAIC,eAAe,CAAC;IACjCM,MAAM;AACNxB,IAAAA;AACF,GAAC,CAAC;EAEF,OAAOlB,OAAO,CAAC,CAAA,2BAAA,EAA8BmC,MAAM,CAACI,QAAQ,EAAE,CAAA,CAAE,CAAC;AACnE;;AAEA;AACA;AACA;AACA;AACA;AACO,eAAeoB,gBAAgBA,CAACC,MAAM,EAAE;EAC7C,OAAO5D,OAAO,CAAC,gCAAgC,EAAE;AAC/CoB,IAAAA,MAAM,EAAE,MAAM;AACdC,IAAAA,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;MACnBqC,MAAM;AACN7D,MAAAA,WAAW,EAAEH;KACd;AACH,GAAC,CAAC;AACJ;;AAEA;AACA;AACA;AACA;AACA;AACO,eAAeiE,WAAWA,CAACpD,SAAS,EAAE;EAC3C,IAAI;IACF,OAAOT,OAAO,CAAC,yBAAyB,EAAE;AACxCoB,MAAAA,MAAM,EAAE,MAAM;AACdC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;AACnB,QAAA,GAAGd,SAAS;AACZV,QAAAA,WAAW,EAAEH,YAAY;AACzBO,QAAAA,GAAG,EAAEqB,MAAM,CAACC,QAAQ,CAACC,IAAI;QACzBG,SAAS,EAAEC,SAAS,CAACD,SAAS;AAC9BE,QAAAA,SAAS,EAAE,IAAIC,IAAI,EAAE,CAACC,WAAW;OAClC;AACH,KAAC,CAAC;EACJ,CAAC,CAAC,OAAOlB,KAAK,EAAE;AACd;AACAC,IAAAA,OAAO,CAACD,KAAK,CAAC,mCAAmC,EAAEA,KAAK,CAAC;AAC3D,EAAA;AACF;;AAEA;;AAEA,IAAIgC,SAAS,GAAG,IAAI;AAEpB,SAASC,YAAYA,GAAG;EACtB,IAAI,CAACD,SAAS,EAAE;AACdA,IAAAA,SAAS,GAAG,CAAA,EAAA,EAAKf,IAAI,CAAC8B,GAAG,EAAE,CAACvB,QAAQ,CAAC,EAAE,CAAC,IAAIwB,IAAI,CAACC,MAAM,EAAE,CAACzB,QAAQ,CAAC,EAAE,CAAC,CAAC0B,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,CAAA,CAAE;AAC1F,EAAA;AACA,EAAA,OAAOlB,SAAS;AAClB;;AAEA;AACA;AACA;AACA,MAAMmB,UAAU,GAAG,EAAE;AACrB,IAAIC,QAAQ,GAAGrC,SAAS,CAACsC,MAAM;;AAE/B;AACA,IAAI,OAAO5C,MAAM,KAAK,WAAW,EAAE;AACjCA,EAAAA,MAAM,CAAC6C,gBAAgB,CAAC,QAAQ,EAAE,MAAM;AACtCF,IAAAA,QAAQ,GAAG,IAAI;AACfG,IAAAA,eAAe,EAAE;AACnB,EAAA,CAAC,CAAC;AAEF9C,EAAAA,MAAM,CAAC6C,gBAAgB,CAAC,SAAS,EAAE,MAAM;AACvCF,IAAAA,QAAQ,GAAG,KAAK;AAClB,EAAA,CAAC,CAAC;AACJ;;AAEA;AACA;AACA;AACA;AACO,SAASI,UAAUA,CAAC1B,SAAS,EAAE;EACpCqB,UAAU,CAACM,IAAI,CAAC;AACd,IAAA,GAAG3B,SAAS;AACZ4B,IAAAA,QAAQ,EAAE,IAAIzC,IAAI,EAAE,CAACC,WAAW;AAClC,GAAC,CAAC;;AAEF;AACA,EAAA,IAAIkC,QAAQ,EAAE;AACZG,IAAAA,eAAe,EAAE;AACnB,EAAA;AACF;;AAEA;AACA;AACA;AACA,eAAeA,eAAeA,GAAG;EAC/B,IAAIJ,UAAU,CAACQ,MAAM,KAAK,CAAC,IAAI,CAACP,QAAQ,EAAE;AAE1C,EAAA,MAAMP,MAAM,GAAG,CAAC,GAAGM,UAAU,CAAC;EAC9BA,UAAU,CAACQ,MAAM,GAAG,CAAC;EAErB,IAAI;IACF,MAAMf,gBAAgB,CAACC,MAAM,CAAC;EAChC,CAAC,CAAC,OAAO7C,KAAK,EAAE;AACd;AACAmD,IAAAA,UAAU,CAACM,IAAI,CAAC,GAAGZ,MAAM,CAAC;AAC1B5C,IAAAA,OAAO,CAACD,KAAK,CAAC,wCAAwC,EAAEA,KAAK,CAAC;AAChE,EAAA;AACF;;AAEA;AACA,IAAI,OAAOS,MAAM,KAAK,WAAW,EAAE;AACjCA,EAAAA,MAAM,CAAC6C,gBAAgB,CAAC,cAAc,EAAE,MAAM;IAC5C,IAAIH,UAAU,CAACQ,MAAM,GAAG,CAAC,IAAI5C,SAAS,CAACsB,UAAU,EAAE;MACjD,MAAMC,IAAI,GAAG,IAAIC,IAAI,CACnB,CAAChC,IAAI,CAACC,SAAS,CAAC;AAAEqC,QAAAA,MAAM,EAAEM,UAAU;AAAEnE,QAAAA,WAAW,EAAEH;OAAc,CAAC,CAAC,EACnE;AAAE2D,QAAAA,IAAI,EAAE;AAAmB,OAC7B,CAAC;MACDzB,SAAS,CAACsB,UAAU,CAAC,CAAA,EAAGzD,OAAO,CAAA,8BAAA,CAAgC,EAAE0D,IAAI,CAAC;AACxE,IAAA;AACF,EAAA,CAAC,CAAC;AACJ;;ACtRA;AACA;AACA;AACA;;AAEA,MAAMsB,cAAc,GAAG,YAAY;AACnC,MAAMC,cAAc,GAAG,CAAA,EAAGD,cAAc,CAAA,UAAA,CAAY;AACpD,MAAME,YAAY,GAAG,CAAA,EAAGF,cAAc,CAAA,SAAA,CAAW;AACjD,MAAMG,WAAW,GAAG,CAAA,EAAGH,cAAc,CAAA,OAAA,CAAS;;AAE9C;AACA;AACA;AACA;AACA,SAASI,iBAAiBA,GAAG;EAC3B,MAAMhD,SAAS,GAAGC,IAAI,CAAC8B,GAAG,EAAE,CAACvB,QAAQ,CAAC,EAAE,CAAC;AACzC,EAAA,MAAMyC,UAAU,GAAGjB,IAAI,CAACC,MAAM,EAAE,CAACzB,QAAQ,CAAC,EAAE,CAAC,CAAC0B,SAAS,CAAC,CAAC,EAAE,EAAE,CAAC;AAC9D,EAAA,OAAO,CAAA,EAAA,EAAKlC,SAAS,CAAA,CAAA,EAAIiD,UAAU,CAAA,CAAE;AACvC;;AAEA;AACA;AACA;AACA;AACO,SAASC,YAAYA,GAAG;EAC7B,IAAI;AACF,IAAA,IAAI/D,SAAS,GAAGgE,YAAY,CAACC,OAAO,CAACP,cAAc,CAAC;IAEpD,IAAI,CAAC1D,SAAS,EAAE;MACdA,SAAS,GAAG6D,iBAAiB,EAAE;AAC/BG,MAAAA,YAAY,CAACE,OAAO,CAACR,cAAc,EAAE1D,SAAS,CAAC;AACjD,IAAA;AAEA,IAAA,OAAOA,SAAS;EAClB,CAAC,CAAC,OAAOH,KAAK,EAAE;AACd;AACAC,IAAAA,OAAO,CAACqE,IAAI,CAAC,gEAAgE,CAAC;IAC9E,OAAON,iBAAiB,EAAE;AAC5B,EAAA;AACF;;AAEA;AACA;AACA;AACA;AACO,SAASO,YAAYA,CAACpE,SAAS,EAAE;EACtC,IAAI;AACFgE,IAAAA,YAAY,CAACE,OAAO,CAACR,cAAc,EAAE1D,SAAS,CAAC;EACjD,CAAC,CAAC,OAAOH,KAAK,EAAE;AACdC,IAAAA,OAAO,CAACqE,IAAI,CAAC,qCAAqC,CAAC;AACrD,EAAA;AACF;;AAEA;AACA;AACA;AACA;AACA;AACO,SAASE,WAAWA,CAAC7C,MAAM,EAAE;EAClC,IAAI;IACF,MAAM8C,IAAI,GAAGN,YAAY,CAACC,OAAO,CAAC,CAAA,EAAGN,YAAY,CAAA,EAAGnC,MAAM,CAAA,CAAE,CAAC;IAC7D,OAAO8C,IAAI,GAAGlE,IAAI,CAACmE,KAAK,CAACD,IAAI,CAAC,GAAG,IAAI;EACvC,CAAC,CAAC,OAAOzE,KAAK,EAAE;AACdC,IAAAA,OAAO,CAACqE,IAAI,CAAC,kCAAkC,CAAC;AAChD,IAAA,OAAO,IAAI;AACb,EAAA;AACF;;AAEA;AACA;AACA;AACA;AACA;AACO,SAASK,WAAWA,CAAChD,MAAM,EAAE8C,IAAI,EAAE;EACxC,IAAI;AACFN,IAAAA,YAAY,CAACE,OAAO,CAAC,CAAA,EAAGP,YAAY,CAAA,EAAGnC,MAAM,CAAA,CAAE,EAAEpB,IAAI,CAACC,SAAS,CAACiE,IAAI,CAAC,CAAC;EACxE,CAAC,CAAC,OAAOzE,KAAK,EAAE;AACdC,IAAAA,OAAO,CAACqE,IAAI,CAAC,mCAAmC,CAAC;AACnD,EAAA;AACF;;AAEA;AACA;AACA;AACA;AACO,SAASM,aAAaA,CAACjD,MAAM,EAAE;EACpC,IAAI;IACFwC,YAAY,CAACU,UAAU,CAAC,CAAA,EAAGf,YAAY,CAAA,EAAGnC,MAAM,EAAE,CAAC;EACrD,CAAC,CAAC,OAAO3B,KAAK,EAAE;AACdC,IAAAA,OAAO,CAACqE,IAAI,CAAC,oCAAoC,CAAC;AACpD,EAAA;AACF;;AAEA;AACA;AACA;AACO,SAASQ,gBAAgBA,GAAG;EACjC,IAAI;AACF,IAAA,MAAMC,IAAI,GAAGC,MAAM,CAACD,IAAI,CAACZ,YAAY,CAAC;AACtCY,IAAAA,IAAI,CAACE,OAAO,CAAEC,GAAG,IAAK;AACpB,MAAA,IAAIA,GAAG,CAACC,UAAU,CAACrB,YAAY,CAAC,EAAE;AAChCK,QAAAA,YAAY,CAACU,UAAU,CAACK,GAAG,CAAC;AAC9B,MAAA;AACF,IAAA,CAAC,CAAC;EACJ,CAAC,CAAC,OAAOlF,KAAK,EAAE;AACdC,IAAAA,OAAO,CAACqE,IAAI,CAAC,wCAAwC,CAAC;AACxD,EAAA;AACF;;AAEA;AACA;AACA;AACA;AACO,SAASc,cAAcA,GAAG;EAC/B,IAAI;IACF,MAAMC,QAAQ,GAAG,EAAE;AACnB,IAAA,MAAMN,IAAI,GAAGC,MAAM,CAACD,IAAI,CAACZ,YAAY,CAAC;AAEtCY,IAAAA,IAAI,CAACE,OAAO,CAAEC,GAAG,IAAK;AACpB,MAAA,IAAIA,GAAG,CAACC,UAAU,CAACrB,YAAY,CAAC,EAAE;QAChC,MAAMnC,MAAM,GAAGuD,GAAG,CAACI,OAAO,CAACxB,YAAY,EAAE,EAAE,CAAC;AAC5C,QAAA,MAAMW,IAAI,GAAGN,YAAY,CAACC,OAAO,CAACc,GAAG,CAAC;AACtC,QAAA,IAAIT,IAAI,EAAE;UACRY,QAAQ,CAAC1D,MAAM,CAAC,GAAGpB,IAAI,CAACmE,KAAK,CAACD,IAAI,CAAC;AACrC,QAAA;AACF,MAAA;AACF,IAAA,CAAC,CAAC;AAEF,IAAA,OAAOY,QAAQ;EACjB,CAAC,CAAC,OAAOrF,KAAK,EAAE;AACdC,IAAAA,OAAO,CAACqE,IAAI,CAAC,sCAAsC,CAAC;AACpD,IAAA,OAAO,EAAE;AACX,EAAA;AACF;;AAEA;AACA;AACA;AACA;AACO,SAASiB,UAAUA,GAAG;EAC3B,IAAI;AACF,IAAA,MAAMd,IAAI,GAAGe,cAAc,CAACpB,OAAO,CAACL,WAAW,CAAC;IAChD,OAAOU,IAAI,GAAGlE,IAAI,CAACmE,KAAK,CAACD,IAAI,CAAC,GAAG,EAAE;EACrC,CAAC,CAAC,OAAOzE,KAAK,EAAE;AACd,IAAA,OAAO,EAAE;AACX,EAAA;AACF;;AAEA;AACA;AACA;AACA;AACO,SAASyF,UAAUA,CAAChB,IAAI,EAAE;EAC/B,IAAI;AACF,IAAA,MAAMiB,QAAQ,GAAGH,UAAU,EAAE;IAC7BC,cAAc,CAACnB,OAAO,CAACN,WAAW,EAAExD,IAAI,CAACC,SAAS,CAAC;AAAE,MAAA,GAAGkF,QAAQ;MAAE,GAAGjB;AAAK,KAAC,CAAC,CAAC;EAC/E,CAAC,CAAC,OAAOzE,KAAK,EAAE;AACdC,IAAAA,OAAO,CAACqE,IAAI,CAAC,uCAAuC,CAAC;AACvD,EAAA;AACF;;AAEA;AACA;AACA;AACO,SAASqB,YAAYA,GAAG;EAC7B,IAAI;AACFH,IAAAA,cAAc,CAACX,UAAU,CAACd,WAAW,CAAC;EACxC,CAAC,CAAC,OAAO/D,KAAK,EAAE;AACdC,IAAAA,OAAO,CAACqE,IAAI,CAAC,mCAAmC,CAAC;AACnD,EAAA;AACF;;AAEA;AACA;AACA;AACA;AACA;AACO,SAASsB,eAAeA,CAACjE,MAAM,EAAE;AACtC,EAAA,MAAM0D,QAAQ,GAAGb,WAAW,CAAC7C,MAAM,CAAC;AACpC,EAAA,OAAO0D,QAAQ,EAAEtF,MAAM,KAAK,WAAW;AACzC;;AAEA;AACA;AACA;AACA;AACA;AACO,SAAS8F,aAAaA,CAAClE,MAAM,EAAE;AACpC,EAAA,MAAM0D,QAAQ,GAAGb,WAAW,CAAC7C,MAAM,CAAC;AACpC,EAAA,OAAO0D,QAAQ,EAAEtF,MAAM,KAAK,SAAS;AACvC;;AAEA;AACA;AACA;AACA;AACA;AACO,SAAS+F,cAAcA,CAACnE,MAAM,EAAE;AACrC,EAAA,MAAM0D,QAAQ,GAAGb,WAAW,CAAC7C,MAAM,CAAC;AACpC,EAAA,OAAO0D,QAAQ,EAAEU,WAAW,IAAI,CAAC;AACnC;;AAEA;AACA;AACA;AACA;AACO,SAASC,cAAcA,CAACrE,MAAM,EAAE;EACrC,MAAM0D,QAAQ,GAAGb,WAAW,CAAC7C,MAAM,CAAC,IAAI,EAAE;EAC1CgD,WAAW,CAAChD,MAAM,EAAE;AAClB,IAAA,GAAG0D,QAAQ;AACXY,IAAAA,IAAI,EAAE,IAAI;AACVC,IAAAA,MAAM,EAAE,IAAIjF,IAAI,EAAE,CAACC,WAAW;AAChC,GAAC,CAAC;AACJ;;AAEA;AACA;AACA;AACA;AACA;AACO,SAASiF,eAAeA,CAACxE,MAAM,EAAE;AACtC,EAAA,MAAM0D,QAAQ,GAAGb,WAAW,CAAC7C,MAAM,CAAC;AACpC,EAAA,OAAO,CAAC,CAAC0D,QAAQ,EAAEY,IAAI;AACzB;;AAEA;AACA;AACA;AACA;AACO,SAASG,qBAAqBA,CAACzE,MAAM,EAAE;AAC5C,EAAA,MAAM0E,OAAO,GAAGd,UAAU,EAAE;AAC5B,EAAA,MAAMe,SAAS,GAAGD,OAAO,CAACC,SAAS,IAAI,EAAE;AAEzC,EAAA,IAAI,CAACA,SAAS,CAACC,QAAQ,CAAC5E,MAAM,CAAC,EAAE;AAC/B2E,IAAAA,SAAS,CAAC7C,IAAI,CAAC9B,MAAM,CAAC;AACtB8D,IAAAA,UAAU,CAAC;AAAEa,MAAAA;AAAU,KAAC,CAAC;AAC3B,EAAA;AACF;;AAEA;AACA;AACA;AACA;AACA;AACO,SAASE,yBAAyBA,CAAC7E,MAAM,EAAE;AAChD,EAAA,MAAM0E,OAAO,GAAGd,UAAU,EAAE;EAC5B,OAAOc,OAAO,CAACC,SAAS,EAAEC,QAAQ,CAAC5E,MAAM,CAAC,IAAI,KAAK;AACrD;;AAEA;AACA;AACA;AACA;AACO,SAAS8E,cAAcA,GAAG;EAC/B,IAAI;IACF,IAAIC,SAAS,GAAG,CAAC;IACjB,IAAIC,YAAY,GAAG,CAAC;AAEpB,IAAA,KAAK,MAAMzB,GAAG,IAAIf,YAAY,EAAE;AAC9B,MAAA,IAAIA,YAAY,CAACyC,cAAc,CAAC1B,GAAG,CAAC,EAAE;QACpC,MAAM2B,IAAI,GAAG1C,YAAY,CAACe,GAAG,CAAC,CAACvB,MAAM,GAAG,CAAC,CAAC;AAC1C+C,QAAAA,SAAS,IAAIG,IAAI;AAEjB,QAAA,IAAI3B,GAAG,CAACC,UAAU,CAACvB,cAAc,CAAC,EAAE;AAClC+C,UAAAA,YAAY,IAAIE,IAAI;AACtB,QAAA;AACF,MAAA;AACF,IAAA;IAEA,OAAO;MACLH,SAAS;MACTC,YAAY;MACZG,WAAW,EAAE,CAACJ,SAAS,GAAG,IAAI,EAAEK,OAAO,CAAC,CAAC,CAAC;MAC1CC,cAAc,EAAE,CAACL,YAAY,GAAG,IAAI,EAAEI,OAAO,CAAC,CAAC;KAChD;EACH,CAAC,CAAC,OAAO/G,KAAK,EAAE;IACd,OAAO;AAAEA,MAAAA,KAAK,EAAE;KAAoC;AACtD,EAAA;AACF;;ACtRA;AACA;AACA;;AAKO,MAAMiH,UAAU,CAAC;EACtBC,WAAWA,CAACC,GAAG,EAAE;IACf,IAAI,CAACA,GAAG,GAAGA,GAAG;AACd,IAAA,IAAI,CAACC,UAAU,GAAG,IAAIC,GAAG,EAAE;IAC3B,IAAI,CAACC,gBAAgB,GAAG,IAAI;IAC5B,IAAI,CAACC,SAAS,GAAG,CAAC;IAClB,IAAI,CAACC,aAAa,GAAG,CAAC,GAAG,EAAE,GAAG,IAAI,CAAC;AACrC,EAAA;;AAEA;AACF;AACA;EACE,MAAMC,eAAeA,GAAG;AACtB,IAAA,MAAM1E,GAAG,GAAG9B,IAAI,CAAC8B,GAAG,EAAE;;AAEtB;AACA,IAAA,IAAI,IAAI,CAACuE,gBAAgB,IAAIvE,GAAG,GAAG,IAAI,CAACwE,SAAS,GAAG,IAAI,CAACC,aAAa,EAAE;MACtE,OAAO,IAAI,CAACF,gBAAgB;AAC9B,IAAA;IAEA,IAAI;AACF,MAAA,MAAM7F,KAAK,GAAG,MAAMN,gBAAgB,CAAC,IAAI,CAACgG,GAAG,CAACO,MAAM,CAAC1I,WAAW,EAAE;AAChEmB,QAAAA,SAAS,EAAE,IAAI,CAACgH,GAAG,CAAChH,SAAS;AAC7BC,QAAAA,MAAM,EAAE,IAAI,CAAC+G,GAAG,CAAC/G;AACnB,OAAC,CAAC;MAEF,IAAI,CAACkH,gBAAgB,GAAG7F,KAAK;MAC7B,IAAI,CAAC8F,SAAS,GAAGxE,GAAG;;AAEpB;AACAtB,MAAAA,KAAK,CAACwD,OAAO,CAAErD,IAAI,IAAK;QACtB,IAAI,CAACwF,UAAU,CAACO,GAAG,CAAC/F,IAAI,CAACgG,EAAE,EAAEhG,IAAI,CAAC;AACpC,MAAA,CAAC,CAAC;AAEF,MAAA,OAAOH,KAAK;IACd,CAAC,CAAC,OAAOzB,KAAK,EAAE;AACdC,MAAAA,OAAO,CAACD,KAAK,CAAC,2CAA2C,EAAEA,KAAK,CAAC;AACjE,MAAA,OAAO,EAAE;AACX,IAAA;AACF,EAAA;;AAEA;AACF;AACA;AACA;EACE,MAAM6H,QAAQA,CAAClG,MAAM,EAAE;AACrB;IACA,IAAI,IAAI,CAACyF,UAAU,CAACU,GAAG,CAACnG,MAAM,CAAC,EAAE;AAC/B,MAAA,OAAO,IAAI,CAACyF,UAAU,CAACW,GAAG,CAACpG,MAAM,CAAC;AACpC,IAAA;IAEA,IAAI;AACF,MAAA,MAAMC,IAAI,GAAG,MAAMF,SAAS,CAACC,MAAM,CAAC;MACpC,IAAI,CAACyF,UAAU,CAACO,GAAG,CAAChG,MAAM,EAAEC,IAAI,CAAC;AACjC,MAAA,OAAOA,IAAI;IACb,CAAC,CAAC,OAAO5B,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,CAAA,iCAAA,EAAoC2B,MAAM,CAAA,CAAA,CAAG,EAAE3B,KAAK,CAAC;AACnE,MAAA,OAAO,IAAI;AACb,IAAA;AACF,EAAA;;AAEA;AACF;AACA;AACA;AACA;EACEgI,cAAcA,CAACpG,IAAI,EAAE;IACnB,IAAI,CAACA,IAAI,CAACqG,SAAS,IAAI,CAACrG,IAAI,CAACqG,SAAS,CAACC,KAAK,IAAItG,IAAI,CAACqG,SAAS,CAACC,KAAK,CAACvE,MAAM,KAAK,CAAC,EAAE;MACjF,OAAO,IAAI,CAAC;AACd,IAAA;AAEA,IAAA,MAAMwE,OAAO,GAAG;AACd/I,MAAAA,GAAG,EAAEqB,MAAM,CAACC,QAAQ,CAACC,IAAI;AACzBW,MAAAA,QAAQ,EAAEb,MAAM,CAACC,QAAQ,CAACY,QAAQ;AAClC8G,MAAAA,QAAQ,EAAE3H,MAAM,CAACC,QAAQ,CAAC0H,QAAQ;AAClCC,MAAAA,MAAM,EAAE5H,MAAM,CAACC,QAAQ,CAAC2H,MAAM;AAC9BC,MAAAA,IAAI,EAAE7H,MAAM,CAACC,QAAQ,CAAC4H,IAAI;MAC1B1H,QAAQ,EAAEC,QAAQ,CAACD,QAAQ;AAC3BR,MAAAA,MAAM,EAAE,IAAI,CAAC+G,GAAG,CAAC/G,MAAM;AACvBD,MAAAA,SAAS,EAAE,IAAI,CAACgH,GAAG,CAAChH,SAAS;AAC7BoI,MAAAA,UAAU,EAAE,IAAI,CAACpB,GAAG,CAACoB,UAAU;AAC/BC,MAAAA,MAAM,EAAE,IAAI,CAACC,cAAc,EAAE;AAC7BzH,MAAAA,SAAS,EAAEC,IAAI,CAAC8B,GAAG;KACpB;IAED,MAAM;AAAE2F,MAAAA,QAAQ,GAAG,KAAK;AAAER,MAAAA;KAAO,GAAGtG,IAAI,CAACqG,SAAS;IAElD,IAAIS,QAAQ,KAAK,KAAK,EAAE;AACtB,MAAA,OAAOR,KAAK,CAACS,KAAK,CAAEC,IAAI,IAAK,IAAI,CAACC,aAAa,CAACD,IAAI,EAAET,OAAO,CAAC,CAAC;AACjE,IAAA,CAAC,MAAM,IAAIO,QAAQ,KAAK,IAAI,EAAE;AAC5B,MAAA,OAAOR,KAAK,CAACY,IAAI,CAAEF,IAAI,IAAK,IAAI,CAACC,aAAa,CAACD,IAAI,EAAET,OAAO,CAAC,CAAC;AAChE,IAAA;AAEA,IAAA,OAAO,IAAI;AACb,EAAA;;AAEA;AACF;AACA;AACA;AACA;AACA;AACEY,EAAAA,cAAcA,CAACnH,IAAI,EAAEuG,OAAO,EAAE;AAC5B;AACA,IAAA,IAAIvG,IAAI,CAAC7B,MAAM,KAAK,QAAQ,EAAE;AAC5B,MAAA,OAAO,KAAK;AACd,IAAA;;AAEA;AACA,IAAA,IAAI6B,IAAI,CAACoH,SAAS,IAAI,IAAI/H,IAAI,CAACW,IAAI,CAACoH,SAAS,CAAC,GAAG,IAAI/H,IAAI,EAAE,EAAE;AAC3D,MAAA,OAAO,KAAK;AACd,IAAA;AACA,IAAA,IAAIW,IAAI,CAACqH,OAAO,IAAI,IAAIhI,IAAI,CAACW,IAAI,CAACqH,OAAO,CAAC,GAAG,IAAIhI,IAAI,EAAE,EAAE;AACvD,MAAA,OAAO,KAAK;AACd,IAAA;;AAEA;IACA,MAAMoE,QAAQ,GAAG,IAAI,CAAC6D,eAAe,CAACtH,IAAI,CAACgG,EAAE,CAAC;AAC9C,IAAA,IAAIvC,QAAQ,EAAE;AACZ;AACA,MAAA,IAAIA,QAAQ,CAACtF,MAAM,KAAK,WAAW,IAAI,CAAC6B,IAAI,CAACuH,QAAQ,EAAEC,WAAW,EAAE;AAClE,QAAA,OAAO,KAAK;AACd,MAAA;;AAEA;MACA,IAAI/D,QAAQ,CAACtF,MAAM,KAAK,SAAS,IAAI6B,IAAI,CAACuH,QAAQ,EAAEE,YAAY,EAAE;AAChE,QAAA,MAAMC,WAAW,GAAG,IAAIrI,IAAI,CAACoE,QAAQ,CAACkE,SAAS,CAAC,CAACC,OAAO,EAAE,GAAG5H,IAAI,CAACuH,QAAQ,CAACE,YAAY;AACvF,QAAA,IAAIpI,IAAI,CAAC8B,GAAG,EAAE,GAAGuG,WAAW,EAAE;AAC5B,UAAA,OAAO,KAAK;AACd,QAAA;AACF,MAAA;AACF,IAAA;;AAEA;AACA,IAAA,IAAI,CAAC,IAAI,CAACtB,cAAc,CAACpG,IAAI,CAAC,EAAE;AAC9B,MAAA,OAAO,KAAK;AACd,IAAA;;AAEA;IACA,IAAIA,IAAI,CAACM,OAAO,EAAE;AAChB,MAAA,MAAMuH,UAAU,GAAGhJ,MAAM,CAACC,QAAQ,CAACY,QAAQ;AAC3C,MAAA,IAAIM,IAAI,CAAC8H,YAAY,KAAK,OAAO,EAAE;AACjC,QAAA,IAAID,UAAU,KAAK7H,IAAI,CAACM,OAAO,EAAE,OAAO,KAAK;AAC/C,MAAA,CAAC,MAAM,IAAIN,IAAI,CAAC8H,YAAY,KAAK,UAAU,EAAE;QAC3C,IAAI,CAACD,UAAU,CAAClD,QAAQ,CAAC3E,IAAI,CAACM,OAAO,CAAC,EAAE,OAAO,KAAK;AACtD,MAAA,CAAC,MAAM,IAAIN,IAAI,CAAC8H,YAAY,KAAK,OAAO,EAAE;QACxC,IAAI;UACF,MAAMC,KAAK,GAAG,IAAIC,MAAM,CAAChI,IAAI,CAACM,OAAO,CAAC;UACtC,IAAI,CAACyH,KAAK,CAACE,IAAI,CAACJ,UAAU,CAAC,EAAE,OAAO,KAAK;AAC3C,QAAA,CAAC,CAAC,MAAM;AACN,UAAA,OAAO,KAAK;AACd,QAAA;AACF,MAAA;AACF,IAAA;AAEA,IAAA,OAAO,IAAI;AACb,EAAA;;AAEA;AACF;AACA;AACA;AACA;AACE,EAAA,MAAM5H,UAAUA,CAACiI,SAAS,EAAErF,IAAI,EAAE;IAChC,IAAI;AACF,MAAA,MAAMsF,UAAa,CAAC;QAClBD,SAAS;AACT,QAAA,GAAGrF,IAAI;AACPtE,QAAAA,SAAS,EAAE,IAAI,CAACgH,GAAG,CAAChH,SAAS;AAC7BC,QAAAA,MAAM,EAAE,IAAI,CAAC+G,GAAG,CAAC/G,MAAM;QACvBY,SAAS,EAAE,IAAIC,IAAI,EAAE,CAACC,WAAW,EAAE;AACnC9B,QAAAA,GAAG,EAAEqB,MAAM,CAACC,QAAQ,CAACC,IAAI;QACzBG,SAAS,EAAEC,SAAS,CAACD;AACvB,OAAC,CAAC;IACJ,CAAC,CAAC,OAAOd,KAAK,EAAE;AACdC,MAAAA,OAAO,CAACD,KAAK,CAAC,qCAAqC,EAAEA,KAAK,CAAC;AAC7D,IAAA;AACF,EAAA;;AAEA;AACF;AACA;AACA;AACA;EACEkJ,eAAeA,CAACvH,MAAM,EAAE;IACtB,OAAO6C,WAAW,CAAC7C,MAAM,CAAC;AAC5B,EAAA;;AAEA;AACF;AACA;AACA;AACA;AACA;AACE,EAAA,MAAMqI,YAAYA,CAACrI,MAAM,EAAEoE,WAAW,EAAEhG,MAAM,EAAE;AAC9C,IAAA,MAAM0E,IAAI,GAAG;MACX9C,MAAM;MACNoE,WAAW;MACXhG,MAAM;AACNI,MAAAA,SAAS,EAAE,IAAI,CAACgH,GAAG,CAAChH,SAAS;AAC7BC,MAAAA,MAAM,EAAE,IAAI,CAAC+G,GAAG,CAAC/G,MAAM;AACvBmJ,MAAAA,SAAS,EAAE,IAAItI,IAAI,EAAE,CAACC,WAAW;KAClC;;AAED;AACAyD,IAAAA,WAAW,CAAChD,MAAM,EAAE8C,IAAI,CAAC;;AAEzB;IACA,IAAI;MACF,MAAMhC,YAAY,CAACgC,IAAI,CAAC;IAC1B,CAAC,CAAC,OAAOzE,KAAK,EAAE;AACdC,MAAAA,OAAO,CAACD,KAAK,CAAC,uCAAuC,EAAEA,KAAK,CAAC;AAC/D,IAAA;AACF,EAAA;;AAEA;AACF;AACA;AACEiK,EAAAA,UAAUA,GAAG;AACX,IAAA,IAAI,CAAC7C,UAAU,CAAC8C,KAAK,EAAE;IACvB,IAAI,CAAC5C,gBAAgB,GAAG,IAAI;IAC5B,IAAI,CAACC,SAAS,GAAG,CAAC;AACpB,EAAA;;AAEA;;AAEAsB,EAAAA,aAAaA,CAACD,IAAI,EAAET,OAAO,EAAE;IAC3B,MAAM;MAAE3F,IAAI;MAAE2H,KAAK;MAAEzB,QAAQ;AAAE0B,MAAAA;AAAM,KAAC,GAAGxB,IAAI;AAE7C,IAAA,IAAIyB,UAAU;AAEd,IAAA,QAAQ7H,IAAI;AACV,MAAA,KAAK,KAAK;QACR6H,UAAU,GAAG,IAAI,CAACC,YAAY,CAACH,KAAK,EAAEhC,OAAO,CAAC;AAC9C,QAAA;AACF,MAAA,KAAK,MAAM;QACTkC,UAAU,GAAG,IAAI,CAACE,aAAa,CAACJ,KAAK,EAAEhC,OAAO,CAAC;AAC/C,QAAA;AACF,MAAA,KAAK,QAAQ;AACXkC,QAAAA,UAAU,GAAGlC,OAAO,CAACK,MAAM,CAAC2B,KAAK,CAAC;AAClC,QAAA;AACF,MAAA,KAAK,QAAQ;AACXE,QAAAA,UAAU,GAAGlC,OAAO,CAACI,UAAU,CAAC4B,KAAK,CAAC;AACtC,QAAA;AACF,MAAA;AACE,QAAA,OAAO,IAAI;AACf;IAEA,OAAO,IAAI,CAACK,cAAc,CAACH,UAAU,EAAE3B,QAAQ,EAAE0B,KAAK,CAAC;AACzD,EAAA;AAEAE,EAAAA,YAAYA,CAACH,KAAK,EAAEhC,OAAO,EAAE;AAC3B,IAAA,QAAQgC,KAAK;AACX,MAAA,KAAK,UAAU;QACb,OAAOhC,OAAO,CAAC7G,QAAQ;AACzB,MAAA,KAAK,UAAU;QACb,OAAO6G,OAAO,CAACC,QAAQ;AACzB,MAAA,KAAK,QAAQ;QACX,OAAOD,OAAO,CAACE,MAAM;AACvB,MAAA,KAAK,MAAM;QACT,OAAOF,OAAO,CAACG,IAAI;AACrB,MAAA,KAAK,MAAM;QACT,OAAOH,OAAO,CAAC/I,GAAG;AACpB,MAAA,KAAK,UAAU;QACb,OAAO+I,OAAO,CAACvH,QAAQ;AACzB,MAAA;QACE,OAAOuH,OAAO,CAAC/I,GAAG;AACtB;AACF,EAAA;AAEAmL,EAAAA,aAAaA,CAACJ,KAAK,EAAEhC,OAAO,EAAE;AAC5B,IAAA,QAAQgC,KAAK;AACX,MAAA,KAAK,IAAI;QACP,OAAOhC,OAAO,CAAC/H,MAAM;AACvB,MAAA,KAAK,WAAW;QACd,OAAO+H,OAAO,CAAChI,SAAS;AAC1B,MAAA;AACE,QAAA,OAAOgI,OAAO,CAACI,UAAU,CAAC4B,KAAK,CAAC;AACpC;AACF,EAAA;AAEAK,EAAAA,cAAcA,CAACH,UAAU,EAAE3B,QAAQ,EAAE+B,WAAW,EAAE;AAChD,IAAA,IAAIJ,UAAU,KAAKK,SAAS,IAAIL,UAAU,KAAK,IAAI,EAAE;AACnD,MAAA,OAAO3B,QAAQ,KAAK,YAAY,IAAIA,QAAQ,KAAK,UAAU;AAC7D,IAAA;IAEA,MAAMiC,QAAQ,GAAGC,MAAM,CAACP,UAAU,CAAC,CAACQ,WAAW,EAAE;IACjD,MAAMC,SAAS,GAAGF,MAAM,CAACH,WAAW,CAAC,CAACI,WAAW,EAAE;AAEnD,IAAA,QAAQnC,QAAQ;AACd,MAAA,KAAK,QAAQ;QACX,OAAOiC,QAAQ,KAAKG,SAAS;AAC/B,MAAA,KAAK,YAAY;QACf,OAAOH,QAAQ,KAAKG,SAAS;AAC/B,MAAA,KAAK,UAAU;AACb,QAAA,OAAOH,QAAQ,CAACpE,QAAQ,CAACuE,SAAS,CAAC;AACrC,MAAA,KAAK,cAAc;AACjB,QAAA,OAAO,CAACH,QAAQ,CAACpE,QAAQ,CAACuE,SAAS,CAAC;AACtC,MAAA,KAAK,aAAa;AAChB,QAAA,OAAOH,QAAQ,CAACxF,UAAU,CAAC2F,SAAS,CAAC;AACvC,MAAA,KAAK,WAAW;AACd,QAAA,OAAOH,QAAQ,CAACI,QAAQ,CAACD,SAAS,CAAC;AACrC,MAAA,KAAK,eAAe;QAClB,IAAI;UACF,OAAO,IAAIlB,MAAM,CAACa,WAAW,EAAE,GAAG,CAAC,CAACZ,IAAI,CAACQ,UAAU,CAAC;AACtD,QAAA,CAAC,CAAC,MAAM;AACN,UAAA,OAAO,KAAK;AACd,QAAA;AACF,MAAA,KAAK,cAAc;QACjB,OAAOW,MAAM,CAACX,UAAU,CAAC,GAAGW,MAAM,CAACP,WAAW,CAAC;AACjD,MAAA,KAAK,WAAW;QACd,OAAOO,MAAM,CAACX,UAAU,CAAC,GAAGW,MAAM,CAACP,WAAW,CAAC;AACjD,MAAA,KAAK,QAAQ;AACX,QAAA,OAAOJ,UAAU,KAAKK,SAAS,IAAIL,UAAU,KAAK,IAAI;AACxD,MAAA,KAAK,YAAY;AACf,QAAA,OAAOA,UAAU,KAAKK,SAAS,IAAIL,UAAU,KAAK,IAAI;AACxD,MAAA,KAAK,UAAU;QACb,OAAOM,QAAQ,KAAK,EAAE;AACxB,MAAA,KAAK,cAAc;QACjB,OAAOA,QAAQ,KAAK,EAAE;AACxB,MAAA,KAAK,SAAS;AACZ,QAAA,MAAMM,IAAI,GAAGC,KAAK,CAACC,OAAO,CAACV,WAAW,CAAC,GAAGA,WAAW,GAAGA,WAAW,CAACW,KAAK,CAAC,GAAG,CAAC;QAC9E,OAAOH,IAAI,CAACI,GAAG,CAAEC,CAAC,IAAKA,CAAC,CAACC,IAAI,EAAE,CAACV,WAAW,EAAE,CAAC,CAACtE,QAAQ,CAACoE,QAAQ,CAAC;AACnE,MAAA,KAAK,aAAa;AAChB,QAAA,MAAMa,OAAO,GAAGN,KAAK,CAACC,OAAO,CAACV,WAAW,CAAC,GAAGA,WAAW,GAAGA,WAAW,CAACW,KAAK,CAAC,GAAG,CAAC;QACjF,OAAO,CAACI,OAAO,CAACH,GAAG,CAAEC,CAAC,IAAKA,CAAC,CAACC,IAAI,EAAE,CAACV,WAAW,EAAE,CAAC,CAACtE,QAAQ,CAACoE,QAAQ,CAAC;AACvE,MAAA;AACE,QAAA,OAAO,IAAI;AACf;AACF,EAAA;AAEAlC,EAAAA,cAAcA,GAAG;AACf,IAAA,MAAMgD,EAAE,GAAG1K,SAAS,CAACD,SAAS;IAE9B,OAAO;AACL0B,MAAAA,IAAI,EAAE,IAAI,CAACkJ,cAAc,CAACD,EAAE,CAAC;AAC7BE,MAAAA,OAAO,EAAE,IAAI,CAACC,WAAW,CAACH,EAAE,CAAC;AAC7BI,MAAAA,EAAE,EAAE,IAAI,CAACC,MAAM,CAACL,EAAE,CAAC;AACnBM,MAAAA,WAAW,EAAEtL,MAAM,CAACuL,MAAM,CAACC,KAAK;AAChCC,MAAAA,YAAY,EAAEzL,MAAM,CAACuL,MAAM,CAACG,MAAM;MAClCC,QAAQ,EAAErL,SAAS,CAACqL;KACrB;AACH,EAAA;EAEAV,cAAcA,CAACD,EAAE,EAAE;AACjB,IAAA,IAAI,4BAA4B,CAAC5B,IAAI,CAAC4B,EAAE,CAAC,EAAE;AACzC,MAAA,OAAO,QAAQ;AACjB,IAAA;AACA,IAAA,IAAI,4DAA4D,CAAC5B,IAAI,CAAC4B,EAAE,CAAC,EAAE;AACzE,MAAA,OAAO,QAAQ;AACjB,IAAA;AACA,IAAA,OAAO,SAAS;AAClB,EAAA;EAEAG,WAAWA,CAACH,EAAE,EAAE;IACd,IAAI,OAAO,CAAC5B,IAAI,CAAC4B,EAAE,CAAC,EAAE,OAAO,MAAM;IACnC,IAAI,SAAS,CAAC5B,IAAI,CAAC4B,EAAE,CAAC,EAAE,OAAO,QAAQ;IACvC,IAAI,UAAU,CAAC5B,IAAI,CAAC4B,EAAE,CAAC,EAAE,OAAO,SAAS;IACzC,IAAI,SAAS,CAAC5B,IAAI,CAAC4B,EAAE,CAAC,EAAE,OAAO,QAAQ;IACvC,IAAI,eAAe,CAAC5B,IAAI,CAAC4B,EAAE,CAAC,EAAE,OAAO,IAAI;AACzC,IAAA,OAAO,SAAS;AAClB,EAAA;EAEAK,MAAMA,CAACL,EAAE,EAAE;IACT,IAAI,UAAU,CAAC5B,IAAI,CAAC4B,EAAE,CAAC,EAAE,OAAO,SAAS;IACzC,IAAI,qBAAqB,CAAC5B,IAAI,CAAC4B,EAAE,CAAC,EAAE,OAAO,OAAO;IAClD,IAAI,QAAQ,CAAC5B,IAAI,CAAC4B,EAAE,CAAC,EAAE,OAAO,OAAO;IACrC,IAAI,UAAU,CAAC5B,IAAI,CAAC4B,EAAE,CAAC,EAAE,OAAO,SAAS;IACzC,IAAI,uBAAuB,CAAC5B,IAAI,CAAC4B,EAAE,CAAC,EAAE,OAAO,KAAK;AAClD,IAAA,OAAO,SAAS;AAClB,EAAA;AACF;;AC1XA;AACA;AACA;AACA;;AAGA,MAAMY,OAAO,GAAG,EAAE;;AAElB;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASC,iBAAiBA,CAACC,UAAU,EAAEC,WAAW,EAAEC,iBAAiB,GAAG,QAAQ,EAAE;AACvF,EAAA,MAAMC,SAAS,GAAG;AAChBC,IAAAA,GAAG,EAAE;MACHA,GAAG,EAAEJ,UAAU,CAACI,GAAG,GAAGH,WAAW,CAACL,MAAM,GAAGE,OAAO;AAClDO,MAAAA,IAAI,EAAEL,UAAU,CAACK,IAAI,GAAGL,UAAU,CAACN,KAAK,GAAG,CAAC,GAAGO,WAAW,CAACP,KAAK,GAAG;KACpE;AACDY,IAAAA,MAAM,EAAE;AACNF,MAAAA,GAAG,EAAEJ,UAAU,CAACM,MAAM,GAAGR,OAAO;AAChCO,MAAAA,IAAI,EAAEL,UAAU,CAACK,IAAI,GAAGL,UAAU,CAACN,KAAK,GAAG,CAAC,GAAGO,WAAW,CAACP,KAAK,GAAG;KACpE;AACDW,IAAAA,IAAI,EAAE;AACJD,MAAAA,GAAG,EAAEJ,UAAU,CAACI,GAAG,GAAGJ,UAAU,CAACJ,MAAM,GAAG,CAAC,GAAGK,WAAW,CAACL,MAAM,GAAG,CAAC;MACpES,IAAI,EAAEL,UAAU,CAACK,IAAI,GAAGJ,WAAW,CAACP,KAAK,GAAGI;KAC7C;AACDS,IAAAA,KAAK,EAAE;AACLH,MAAAA,GAAG,EAAEJ,UAAU,CAACI,GAAG,GAAGJ,UAAU,CAACJ,MAAM,GAAG,CAAC,GAAGK,WAAW,CAACL,MAAM,GAAG,CAAC;AACpES,MAAAA,IAAI,EAAEL,UAAU,CAACO,KAAK,GAAGT;AAC3B;GACD;;AAED;EACA,IAAII,iBAAiB,KAAK,MAAM,EAAE;AAChC,IAAA,MAAMM,aAAa,GAAGtM,MAAM,CAACuM,UAAU;AACvC,IAAA,MAAMC,cAAc,GAAGxM,MAAM,CAACyM,WAAW;;AAEzC;AACA,IAAA,MAAMC,IAAI,GAAG;AACXR,MAAAA,GAAG,EAAED,SAAS,CAACC,GAAG,CAACA,GAAG,IAAI,CAAC;MAC3BE,MAAM,EAAEH,SAAS,CAACG,MAAM,CAACF,GAAG,GAAGH,WAAW,CAACL,MAAM,IAAIc,cAAc;AACnEL,MAAAA,IAAI,EAAEF,SAAS,CAACE,IAAI,CAACA,IAAI,IAAI,CAAC;MAC9BE,KAAK,EAAEJ,SAAS,CAACI,KAAK,CAACF,IAAI,GAAGJ,WAAW,CAACP,KAAK,IAAIc;KACpD;;AAED;AACA,IAAA,IAAII,IAAI,CAACN,MAAM,EAAEJ,iBAAiB,GAAG,QAAQ,CAAC,KACzC,IAAIU,IAAI,CAACR,GAAG,EAAEF,iBAAiB,GAAG,KAAK,CAAC,KACxC,IAAIU,IAAI,CAACL,KAAK,EAAEL,iBAAiB,GAAG,OAAO,CAAC,KAC5C,IAAIU,IAAI,CAACP,IAAI,EAAEH,iBAAiB,GAAG,MAAM,CAAC,KAC1CA,iBAAiB,GAAG,QAAQ,CAAC;AACpC,EAAA;EAEA,MAAMW,QAAQ,GAAGV,SAAS,CAACD,iBAAiB,CAAC,IAAIC,SAAS,CAACG,MAAM;EAEjE,OAAO;IACLF,GAAG,EAAES,QAAQ,CAACT,GAAG;IACjBC,IAAI,EAAEQ,QAAQ,CAACR,IAAI;AACnBS,IAAAA,cAAc,EAAEZ;GACjB;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACO,SAASa,iBAAiBA,CAACF,QAAQ,EAAEG,UAAU,EAAE;AACtD,EAAA,MAAMR,aAAa,GAAGtM,MAAM,CAACuM,UAAU;AACvC,EAAA,MAAMC,cAAc,GAAGxM,MAAM,CAACyM,WAAW;AACzC,EAAA,MAAMM,OAAO,GAAG,EAAE,CAAC;;EAEnB,IAAI;IAAEb,GAAG;AAAEC,IAAAA;AAAK,GAAC,GAAGQ,QAAQ;EAC5B,MAAM;IAAEnB,KAAK;AAAEE,IAAAA;AAAO,GAAC,GAAGoB,UAAU;;AAEpC;EACA,IAAIX,IAAI,GAAGY,OAAO,EAAE;AAClBZ,IAAAA,IAAI,GAAGY,OAAO;EAChB,CAAC,MAAM,IAAIZ,IAAI,GAAGX,KAAK,GAAGc,aAAa,GAAGS,OAAO,EAAE;AACjDZ,IAAAA,IAAI,GAAGG,aAAa,GAAGd,KAAK,GAAGuB,OAAO;AACxC,EAAA;;AAEA;EACA,IAAIb,GAAG,GAAGa,OAAO,EAAE;AACjBb,IAAAA,GAAG,GAAGa,OAAO;EACf,CAAC,MAAM,IAAIb,GAAG,GAAGR,MAAM,GAAGc,cAAc,GAAGO,OAAO,EAAE;AAClDb,IAAAA,GAAG,GAAGM,cAAc,GAAGd,MAAM,GAAGqB,OAAO;AACzC,EAAA;EAEA,OAAO;IAAEb,GAAG;AAAEC,IAAAA;GAAM;AACtB;;AAEA;AACA;AACA;AACA;AACA;AACO,SAASa,gBAAgBA,CAACL,QAAQ,EAAE;AACzC;AACA,EAAA,MAAMM,cAAc,GAAG;AACrBf,IAAAA,GAAG,EAAE,QAAQ;AACbE,IAAAA,MAAM,EAAE,KAAK;AACbD,IAAAA,IAAI,EAAE,OAAO;AACbE,IAAAA,KAAK,EAAE;GACR;AAED,EAAA,OAAOY,cAAc,CAACN,QAAQ,CAAC,IAAI,KAAK;AAC1C;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASO,oBAAoBA,CAACpB,UAAU,EAAEC,WAAW,EAAEY,QAAQ,EAAE;AACtE,EAAA,MAAMQ,aAAa,GACjBR,QAAQ,KAAK,KAAK,IAAIA,QAAQ,KAAK,QAAQ,GACvCZ,WAAW,CAACI,IAAI,GAAGJ,WAAW,CAACP,KAAK,GAAG,CAAC,GACxCO,WAAW,CAACG,GAAG,GAAGH,WAAW,CAACL,MAAM,GAAG,CAAC;AAE9C,EAAA,MAAM0B,YAAY,GAChBT,QAAQ,KAAK,KAAK,IAAIA,QAAQ,KAAK,QAAQ,GACvCb,UAAU,CAACK,IAAI,GAAGL,UAAU,CAACN,KAAK,GAAG,CAAC,GACtCM,UAAU,CAACI,GAAG,GAAGJ,UAAU,CAACJ,MAAM,GAAG,CAAC;EAE5C,OAAO;IACL2B,MAAM,EAAED,YAAY,GAAGD,aAAa;IACpCG,SAAS,EAAEX,QAAQ,KAAK,KAAK,IAAIA,QAAQ,KAAK,QAAQ,GAAG,YAAY,GAAG;GACzE;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACO,SAASY,kBAAkBA,CAACzB,UAAU,EAAE0B,WAAW,EAAE;AAC1D,EAAA,MAAMlB,aAAa,GAAGtM,MAAM,CAACuM,UAAU;AACvC,EAAA,MAAMC,cAAc,GAAGxM,MAAM,CAACyM,WAAW;AAEzC,EAAA,MAAMgB,UAAU,GAAG3B,UAAU,CAACI,GAAG;AACjC,EAAA,MAAMwB,UAAU,GAAGlB,cAAc,GAAGV,UAAU,CAACM,MAAM;AACrD,EAAA,MAAMuB,SAAS,GAAG7B,UAAU,CAACK,IAAI;AACjC,EAAA,MAAMyB,UAAU,GAAGtB,aAAa,GAAGR,UAAU,CAACO,KAAK;AAEnD,EAAA,MAAMwB,MAAM,GAAG;AACb3B,IAAAA,GAAG,EAAE;AAAE4B,MAAAA,KAAK,EAAEL,UAAU;AAAEf,MAAAA,IAAI,EAAEe,UAAU,IAAID,WAAW,CAAC9B,MAAM,GAAGE;KAAS;AAC5EQ,IAAAA,MAAM,EAAE;AAAE0B,MAAAA,KAAK,EAAEJ,UAAU;AAAEhB,MAAAA,IAAI,EAAEgB,UAAU,IAAIF,WAAW,CAAC9B,MAAM,GAAGE;KAAS;AAC/EO,IAAAA,IAAI,EAAE;AAAE2B,MAAAA,KAAK,EAAEH,SAAS;AAAEjB,MAAAA,IAAI,EAAEiB,SAAS,IAAIH,WAAW,CAAChC,KAAK,GAAGI;KAAS;AAC1ES,IAAAA,KAAK,EAAE;AAAEyB,MAAAA,KAAK,EAAEF,UAAU;AAAElB,MAAAA,IAAI,EAAEkB,UAAU,IAAIJ,WAAW,CAAChC,KAAK,GAAGI;AAAQ;GAC7E;;AAED;AACA,EAAA,MAAMmC,gBAAgB,GAAGxJ,MAAM,CAACyJ,OAAO,CAACH,MAAM,CAAC,CAC5CI,MAAM,CAAC,CAAC,GAAGjK,IAAI,CAAC,KAAKA,IAAI,CAAC0I,IAAI,CAAC,CAC/BwB,IAAI,CAAC,CAAC,GAAGC,CAAC,CAAC,EAAE,GAAGC,CAAC,CAAC,KAAKA,CAAC,CAACN,KAAK,GAAGK,CAAC,CAACL,KAAK,CAAC;AAE5C,EAAA,IAAIC,gBAAgB,CAAC7K,MAAM,GAAG,CAAC,EAAE;AAC/B,IAAA,OAAO6K,gBAAgB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAC/B,EAAA;;AAEA;EACA,MAAMM,YAAY,GAAG9J,MAAM,CAACyJ,OAAO,CAACH,MAAM,CAAC,CAACK,IAAI,CAAC,CAAC,GAAGC,CAAC,CAAC,EAAE,GAAGC,CAAC,CAAC,KAAKA,CAAC,CAACN,KAAK,GAAGK,CAAC,CAACL,KAAK,CAAC;AAErF,EAAA,OAAOO,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAC3B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACO,SAASC,sBAAsBA,CAACC,SAAS,EAAEC,SAAS,GAAG,QAAQ,EAAE;AACtE,EAAA,MAAMlC,aAAa,GAAGtM,MAAM,CAACuM,UAAU;AACvC,EAAA,MAAMC,cAAc,GAAGxM,MAAM,CAACyM,WAAW;EAEzC,MAAMN,IAAI,GAAG,CAACG,aAAa,GAAGiC,SAAS,CAAC/C,KAAK,IAAI,CAAC;AAElD,EAAA,IAAIU,GAAG;AACP,EAAA,QAAQsC,SAAS;AACf,IAAA,KAAK,KAAK;AACRtC,MAAAA,GAAG,GAAG,EAAE;AACR,MAAA;AACF,IAAA,KAAK,QAAQ;AACXA,MAAAA,GAAG,GAAGM,cAAc,GAAG+B,SAAS,CAAC7C,MAAM,GAAG,EAAE;AAC5C,MAAA;AACF,IAAA,KAAK,QAAQ;AACb,IAAA;MACEQ,GAAG,GAAG,CAACM,cAAc,GAAG+B,SAAS,CAAC7C,MAAM,IAAI,CAAC;AAC7C,MAAA;AACJ;EAEA,OAAO;IAAEQ,GAAG;AAAEC,IAAAA;GAAM;AACtB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACO,SAASsC,yBAAyBA,CAACjD,KAAK,EAAEkD,IAAI,GAAG,OAAO,EAAE;EAC/D,OAAO;AACLxC,IAAAA,GAAG,EAAE,CAAC;AACNE,IAAAA,MAAM,EAAE,CAAC;IACT,CAACsC,IAAI,GAAG,CAAC;IACTlD,KAAK,EAAE,CAAA,EAAGA,KAAK,CAAA,EAAA,CAAI;AACnB,IAAA,CAACkD,IAAI,KAAK,OAAO,GAAG,MAAM,GAAG,OAAO,GAAG;GACxC;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACO,SAASC,aAAaA,CAAChC,QAAQ,EAAEG,UAAU,EAAE;AAClD,EAAA,MAAMR,aAAa,GAAGtM,MAAM,CAACuM,UAAU;AACvC,EAAA,MAAMC,cAAc,GAAGxM,MAAM,CAACyM,WAAW;EAEzC,OAAO;AACLmC,IAAAA,WAAW,EAAEjC,QAAQ,CAACT,GAAG,GAAG,CAAC;IAC7B2C,aAAa,EAAElC,QAAQ,CAACR,IAAI,GAAGW,UAAU,CAACtB,KAAK,GAAGc,aAAa;IAC/DwC,cAAc,EAAEnC,QAAQ,CAACT,GAAG,GAAGY,UAAU,CAACpB,MAAM,GAAGc,cAAc;AACjEuC,IAAAA,YAAY,EAAEpC,QAAQ,CAACR,IAAI,GAAG;GAC/B;AACH;;AAEA;AACA;AACA;AACA;AACA;AACO,SAAS6C,mBAAmBA,CAAClC,UAAU,EAAE;AAC9C,EAAA,MAAMR,aAAa,GAAGtM,MAAM,CAACuM,UAAU;AACvC,EAAA,MAAMC,cAAc,GAAGxM,MAAM,CAACyM,WAAW;EAEzC,OAAO;IACLP,GAAG,EAAE,CAACM,cAAc,GAAGM,UAAU,CAACpB,MAAM,IAAI,CAAC;AAC7CS,IAAAA,IAAI,EAAE,CAACG,aAAa,GAAGQ,UAAU,CAACtB,KAAK,IAAI;GAC5C;AACH;;AC1PA;AACA;AACA;AACA;;AAIO,MAAMyD,OAAO,CAAC;EACnBxI,WAAWA,CAAC/H,OAAO,EAAE;IACnB,IAAI,CAACA,OAAO,GAAG;AACbiD,MAAAA,KAAK,EAAE,EAAE;AACTuN,MAAAA,OAAO,EAAE,EAAE;AACXvC,MAAAA,QAAQ,EAAE,QAAQ;AAAE;AACpBwC,MAAAA,aAAa,EAAE,IAAI;AACnBC,MAAAA,KAAK,EAAE,IAAI;AAAE;AACbC,MAAAA,OAAO,EAAE,IAAI;AAAE;AACfC,MAAAA,SAAS,EAAE,CAAC;AACZC,MAAAA,UAAU,EAAE,CAAC;AACbC,MAAAA,cAAc,EAAE,KAAK;AACrBC,MAAAA,cAAc,EAAE,IAAI;AACpBC,MAAAA,MAAM,EAAEA,MAAM,CAAC,CAAC;AAChBC,MAAAA,MAAM,EAAEA,MAAM,CAAC,CAAC;AAChBC,MAAAA,MAAM,EAAEA,MAAM,CAAC,CAAC;AAChBC,MAAAA,OAAO,EAAEA,MAAM,CAAC,CAAC;AACjBC,MAAAA,KAAK,EAAE,OAAO;AACdC,MAAAA,YAAY,EAAE,IAAI;MAClB,GAAGrR;KACJ;IAED,IAAI,CAACsR,OAAO,GAAG,IAAI;IACnB,IAAI,CAACC,YAAY,GAAG,IAAI;IACxB,IAAI,CAACC,cAAc,GAAG,IAAI;IAC1B,IAAI,CAACC,cAAc,GAAG,IAAI;AAC5B,EAAA;EAEAC,MAAMA,CAACC,SAAS,EAAE;IAChB,IAAI,CAACC,cAAc,EAAE;AACrBD,IAAAA,SAAS,CAACE,WAAW,CAAC,IAAI,CAACP,OAAO,CAAC;IACnC,IAAI,CAACQ,gBAAgB,EAAE;IACvB,IAAI,CAACC,eAAe,EAAE;IACtB,IAAI,CAACC,UAAU,EAAE;AACnB,EAAA;AAEAC,EAAAA,OAAOA,GAAG;IACR,IAAI,CAACC,gBAAgB,EAAE;IAEvB,IAAI,IAAI,CAACZ,OAAO,IAAI,IAAI,CAACA,OAAO,CAACa,UAAU,EAAE;MAC3C,IAAI,CAACb,OAAO,CAACc,SAAS,CAACC,GAAG,CAAC,mBAAmB,CAAC;AAC/CC,MAAAA,UAAU,CAAC,MAAM;QACf,IAAI,IAAI,CAAChB,OAAO,IAAI,IAAI,CAACA,OAAO,CAACa,UAAU,EAAE;UAC3C,IAAI,CAACb,OAAO,CAACa,UAAU,CAACI,WAAW,CAAC,IAAI,CAACjB,OAAO,CAAC;AACnD,QAAA;MACF,CAAC,EAAE,GAAG,CAAC;AACT,IAAA;IAEA,IAAI,CAACA,OAAO,GAAG,IAAI;IACnB,IAAI,CAACC,YAAY,GAAG,IAAI;AAC1B,EAAA;AAEAK,EAAAA,cAAcA,GAAG;IACf,MAAM;MACJ3O,KAAK;MACLuN,OAAO;MACPE,KAAK;MACLC,OAAO;MACPC,SAAS;MACTC,UAAU;MACVC,cAAc;MACdC,cAAc;MACdK,KAAK;AACLC,MAAAA;KACD,GAAG,IAAI,CAACrR,OAAO;IAEhB,IAAI,CAACsR,OAAO,GAAG5P,QAAQ,CAAC8Q,aAAa,CAAC,KAAK,CAAC;AAC5C,IAAA,IAAI,CAAClB,OAAO,CAACmB,SAAS,GAAG,CAAA,yBAAA,EAA4BrB,KAAK,CAAA,CAAE;AAE5D,IAAA,IAAIC,YAAY,EAAE;MAChB,IAAI,CAACC,OAAO,CAACoB,KAAK,CAACC,WAAW,CAAC,qBAAqB,EAAEtB,YAAY,CAAC;AACrE,IAAA;;AAEA;IACA,IAAI,CAACE,YAAY,GAAG7P,QAAQ,CAAC8Q,aAAa,CAAC,KAAK,CAAC;AACjD,IAAA,IAAI,CAACjB,YAAY,CAACkB,SAAS,GAAG,oBAAoB;IAClD,IAAI,CAACnB,OAAO,CAACO,WAAW,CAAC,IAAI,CAACN,YAAY,CAAC;;AAE3C;AACA,IAAA,MAAMqB,OAAO,GAAGlR,QAAQ,CAAC8Q,aAAa,CAAC,KAAK,CAAC;IAC7CI,OAAO,CAACH,SAAS,GAAG,sBAAsB;;AAE1C;AACA,IAAA,MAAMI,QAAQ,GAAGnR,QAAQ,CAAC8Q,aAAa,CAAC,QAAQ,CAAC;IACjDK,QAAQ,CAACJ,SAAS,GAAG,oBAAoB;IACzCI,QAAQ,CAACC,SAAS,GAAG,SAAS;AAC9BD,IAAAA,QAAQ,CAACE,YAAY,CAAC,YAAY,EAAE,OAAO,CAAC;AAC5CF,IAAAA,QAAQ,CAACG,OAAO,GAAIC,CAAC,IAAK;MACxBA,CAAC,CAACC,cAAc,EAAE;AAClB,MAAA,IAAI,CAAClT,OAAO,CAACmR,OAAO,EAAE;IACxB,CAAC;AACDyB,IAAAA,OAAO,CAACf,WAAW,CAACgB,QAAQ,CAAC;;AAE7B;AACA,IAAA,IAAInC,KAAK,EAAE;AACT,MAAA,MAAMyC,OAAO,GAAG,IAAI,CAACC,YAAY,CAAC1C,KAAK,CAAC;AACxCkC,MAAAA,OAAO,CAACf,WAAW,CAACsB,OAAO,CAAC;AAC9B,IAAA;;AAEA;AACA,IAAA,IAAIlQ,KAAK,EAAE;AACT,MAAA,MAAMoQ,MAAM,GAAG3R,QAAQ,CAAC8Q,aAAa,CAAC,KAAK,CAAC;MAC5Ca,MAAM,CAACZ,SAAS,GAAG,qBAAqB;AAExC,MAAA,MAAMa,OAAO,GAAG5R,QAAQ,CAAC8Q,aAAa,CAAC,IAAI,CAAC;MAC5Cc,OAAO,CAACb,SAAS,GAAG,oBAAoB;MACxCa,OAAO,CAACC,WAAW,GAAGtQ,KAAK;AAC3BoQ,MAAAA,MAAM,CAACxB,WAAW,CAACyB,OAAO,CAAC;AAE3BV,MAAAA,OAAO,CAACf,WAAW,CAACwB,MAAM,CAAC;AAC7B,IAAA;;AAEA;AACA,IAAA,IAAI7C,OAAO,EAAE;AACX,MAAA,MAAMgD,SAAS,GAAG9R,QAAQ,CAAC8Q,aAAa,CAAC,KAAK,CAAC;MAC/CgB,SAAS,CAACf,SAAS,GAAG,sBAAsB;MAC5Ce,SAAS,CAACV,SAAS,GAAGtC,OAAO;AAC7BoC,MAAAA,OAAO,CAACf,WAAW,CAAC2B,SAAS,CAAC;AAChC,IAAA;;AAEA;AACA,IAAA,MAAMC,MAAM,GAAG/R,QAAQ,CAAC8Q,aAAa,CAAC,KAAK,CAAC;IAC5CiB,MAAM,CAAChB,SAAS,GAAG,qBAAqB;;AAExC;IACA,IAAI5B,UAAU,GAAG,CAAC,EAAE;AAClB,MAAA,MAAM3K,QAAQ,GAAGxE,QAAQ,CAAC8Q,aAAa,CAAC,MAAM,CAAC;MAC/CtM,QAAQ,CAACuM,SAAS,GAAG,uBAAuB;MAC5CvM,QAAQ,CAACqN,WAAW,GAAG,CAAA,EAAG3C,SAAS,GAAG,CAAC,CAAA,GAAA,EAAMC,UAAU,CAAA,CAAE;AACzD4C,MAAAA,MAAM,CAAC5B,WAAW,CAAC3L,QAAQ,CAAC;AAC9B,IAAA;;AAEA;AACA,IAAA,MAAMwN,OAAO,GAAGhS,QAAQ,CAAC8Q,aAAa,CAAC,KAAK,CAAC;IAC7CkB,OAAO,CAACjB,SAAS,GAAG,sBAAsB;AAE1C,IAAA,IAAI9B,OAAO,EAAE;AACX;AACAA,MAAAA,OAAO,CAAC7K,OAAO,CAAE6N,GAAG,IAAK;AACvB,QAAA,MAAMC,MAAM,GAAGlS,QAAQ,CAAC8Q,aAAa,CAAC,QAAQ,CAAC;QAC/CoB,MAAM,CAACnB,SAAS,GAAG,CAAA,iBAAA,EAAoBkB,GAAG,CAACE,OAAO,IAAI,WAAW,CAAA,CAAE;AACnED,QAAAA,MAAM,CAACL,WAAW,GAAGI,GAAG,CAACG,IAAI;AAC7BF,QAAAA,MAAM,CAACZ,OAAO,GAAIC,CAAC,IAAK;UACtBA,CAAC,CAACC,cAAc,EAAE;AAClB,UAAA,IAAIS,GAAG,CAACI,MAAM,KAAK,MAAM,EAAE,IAAI,CAAC/T,OAAO,CAACgR,MAAM,EAAE,CAAC,KAC5C,IAAI2C,GAAG,CAACI,MAAM,KAAK,MAAM,EAAE,IAAI,CAAC/T,OAAO,CAACiR,MAAM,EAAE,CAAC,KACjD,IAAI0C,GAAG,CAACI,MAAM,KAAK,MAAM,EAAE,IAAI,CAAC/T,OAAO,CAACkR,MAAM,EAAE,CAAC,KACjD,IAAIyC,GAAG,CAACI,MAAM,KAAK,OAAO,EAAE,IAAI,CAAC/T,OAAO,CAACmR,OAAO,EAAE,CAAC,KACnD,IAAIwC,GAAG,CAACK,OAAO,EAAEL,GAAG,CAACK,OAAO,EAAE;QACrC,CAAC;AACDN,QAAAA,OAAO,CAAC7B,WAAW,CAAC+B,MAAM,CAAC;AAC7B,MAAA,CAAC,CAAC;AACJ,IAAA,CAAC,MAAM;AACL;AACA,MAAA,IAAI7C,cAAc,IAAIH,SAAS,GAAGC,UAAU,GAAG,CAAC,EAAE;AAChD,QAAA,MAAMoD,OAAO,GAAGvS,QAAQ,CAAC8Q,aAAa,CAAC,QAAQ,CAAC;QAChDyB,OAAO,CAACxB,SAAS,GAAG,uBAAuB;QAC3CwB,OAAO,CAACV,WAAW,GAAG,MAAM;AAC5BU,QAAAA,OAAO,CAACjB,OAAO,GAAIC,CAAC,IAAK;UACvBA,CAAC,CAACC,cAAc,EAAE;AAClB,UAAA,IAAI,CAAClT,OAAO,CAACkR,MAAM,EAAE;QACvB,CAAC;AACDwC,QAAAA,OAAO,CAAC7B,WAAW,CAACoC,OAAO,CAAC;AAC9B,MAAA;AAEA,MAAA,IAAInD,cAAc,EAAE;AAClB,QAAA,MAAMoD,OAAO,GAAGxS,QAAQ,CAAC8Q,aAAa,CAAC,QAAQ,CAAC;QAChD0B,OAAO,CAACzB,SAAS,GAAG,4BAA4B;QAChDyB,OAAO,CAACX,WAAW,GAAG,MAAM;AAC5BW,QAAAA,OAAO,CAAClB,OAAO,GAAIC,CAAC,IAAK;UACvBA,CAAC,CAACC,cAAc,EAAE;AAClB,UAAA,IAAI,CAAClT,OAAO,CAACiR,MAAM,EAAE;QACvB,CAAC;AACDyC,QAAAA,OAAO,CAAC7B,WAAW,CAACqC,OAAO,CAAC;AAC9B,MAAA;AAEA,MAAA,MAAMC,OAAO,GAAGzS,QAAQ,CAAC8Q,aAAa,CAAC,QAAQ,CAAC;MAChD2B,OAAO,CAAC1B,SAAS,GAAG,0BAA0B;MAC9C0B,OAAO,CAACZ,WAAW,GAAG3C,SAAS,IAAIC,UAAU,GAAG,CAAC,GAAG,MAAM,GAAG,MAAM;AACnEsD,MAAAA,OAAO,CAACnB,OAAO,GAAIC,CAAC,IAAK;QACvBA,CAAC,CAACC,cAAc,EAAE;AAClB,QAAA,IAAI,CAAClT,OAAO,CAACgR,MAAM,EAAE;MACvB,CAAC;AACD0C,MAAAA,OAAO,CAAC7B,WAAW,CAACsC,OAAO,CAAC;AAC9B,IAAA;AAEAV,IAAAA,MAAM,CAAC5B,WAAW,CAAC6B,OAAO,CAAC;AAC3Bd,IAAAA,OAAO,CAACf,WAAW,CAAC4B,MAAM,CAAC;AAC3B,IAAA,IAAI,CAACnC,OAAO,CAACO,WAAW,CAACe,OAAO,CAAC;AACnC,EAAA;EAEAQ,YAAYA,CAAC1C,KAAK,EAAE;AAClB,IAAA,MAAMiB,SAAS,GAAGjQ,QAAQ,CAAC8Q,aAAa,CAAC,KAAK,CAAC;IAC/Cb,SAAS,CAACc,SAAS,GAAG,oBAAoB;AAE1C,IAAA,IAAI/B,KAAK,CAACrN,IAAI,KAAK,OAAO,EAAE;AAC1B,MAAA,MAAM+Q,GAAG,GAAG1S,QAAQ,CAAC8Q,aAAa,CAAC,KAAK,CAAC;AACzC4B,MAAAA,GAAG,CAACC,GAAG,GAAG3D,KAAK,CAAC2D,GAAG;AACnBD,MAAAA,GAAG,CAACE,GAAG,GAAG5D,KAAK,CAAC4D,GAAG,IAAI,EAAE;MACzBF,GAAG,CAAC3B,SAAS,GAAG,oBAAoB;AACpCd,MAAAA,SAAS,CAACE,WAAW,CAACuC,GAAG,CAAC;AAC5B,IAAA,CAAC,MAAM,IAAI1D,KAAK,CAACrN,IAAI,KAAK,OAAO,EAAE;AACjC,MAAA,MAAMkR,KAAK,GAAG7S,QAAQ,CAAC8Q,aAAa,CAAC,OAAO,CAAC;AAC7C+B,MAAAA,KAAK,CAACF,GAAG,GAAG3D,KAAK,CAAC2D,GAAG;MACrBE,KAAK,CAACC,QAAQ,GAAG,IAAI;AACrBD,MAAAA,KAAK,CAACE,QAAQ,GAAG/D,KAAK,CAAC+D,QAAQ,IAAI,KAAK;AACxCF,MAAAA,KAAK,CAACG,KAAK,GAAGhE,KAAK,CAACgE,KAAK,IAAI,IAAI;AACjCH,MAAAA,KAAK,CAACI,IAAI,GAAGjE,KAAK,CAACiE,IAAI,IAAI,KAAK;MAChCJ,KAAK,CAAC9B,SAAS,GAAG,oBAAoB;AACtCd,MAAAA,SAAS,CAACE,WAAW,CAAC0C,KAAK,CAAC;AAC9B,IAAA,CAAC,MAAM,IAAI7D,KAAK,CAACrN,IAAI,KAAK,OAAO,EAAE;AACjC,MAAA,MAAMuR,MAAM,GAAGlT,QAAQ,CAAC8Q,aAAa,CAAC,QAAQ,CAAC;AAC/CoC,MAAAA,MAAM,CAACP,GAAG,GAAG3D,KAAK,CAAC2D,GAAG;MACtBO,MAAM,CAACnC,SAAS,GAAG,oBAAoB;MACvCmC,MAAM,CAACC,eAAe,GAAG,IAAI;AAC7BlD,MAAAA,SAAS,CAACE,WAAW,CAAC+C,MAAM,CAAC;AAC/B,IAAA;AAEA,IAAA,OAAOjD,SAAS;AAClB,EAAA;AAEAG,EAAAA,gBAAgBA,GAAG;IACjB,MAAM;MAAErB,aAAa;AAAExC,MAAAA;KAAU,GAAG,IAAI,CAACjO,OAAO;IAEhD,IAAI,CAACyQ,aAAa,EAAE;AAClB;AACA,MAAA,IAAI,CAACa,OAAO,CAACoB,KAAK,CAACzE,QAAQ,GAAG,OAAO;AACrC,MAAA,IAAI,CAACqD,OAAO,CAACoB,KAAK,CAAClF,GAAG,GAAG,KAAK;AAC9B,MAAA,IAAI,CAAC8D,OAAO,CAACoB,KAAK,CAACjF,IAAI,GAAG,KAAK;AAC/B,MAAA,IAAI,CAAC6D,OAAO,CAACoB,KAAK,CAACoC,SAAS,GAAG,uBAAuB;AACtD,MAAA,IAAI,CAACvD,YAAY,CAACmB,KAAK,CAACqC,OAAO,GAAG,MAAM;AACxC,MAAA;AACF,IAAA;AAEA,IAAA,MAAM3H,UAAU,GAAGqD,aAAa,CAACuE,qBAAqB,EAAE;IACxD,MAAM3H,WAAW,GAAG,IAAI,CAACiE,OAAO,CAAC0D,qBAAqB,EAAE;IAExD,MAAM;MAAExH,GAAG;MAAEC,IAAI;AAAES,MAAAA;KAAgB,GAAGf,iBAAiB,CACrDC,UAAU,EACVC,WAAW,EACXY,QACF,CAAC;IAED,MAAMgH,QAAQ,GAAG9G,iBAAiB,CAChC;MAAEX,GAAG;AAAEC,MAAAA;AAAK,KAAC,EACb;MAAEX,KAAK,EAAEO,WAAW,CAACP,KAAK;MAAEE,MAAM,EAAEK,WAAW,CAACL;AAAO,KACzD,CAAC;AAED,IAAA,IAAI,CAACsE,OAAO,CAACoB,KAAK,CAACzE,QAAQ,GAAG,OAAO;IACrC,IAAI,CAACqD,OAAO,CAACoB,KAAK,CAAClF,GAAG,GAAG,CAAA,EAAGyH,QAAQ,CAACzH,GAAG,CAAA,EAAA,CAAI;IAC5C,IAAI,CAAC8D,OAAO,CAACoB,KAAK,CAACjF,IAAI,GAAG,CAAA,EAAGwH,QAAQ,CAACxH,IAAI,CAAA,EAAA,CAAI;;AAE9C;AACA,IAAA,MAAMyH,aAAa,GAAG5G,gBAAgB,CAACJ,cAAc,CAAC;AACtD,IAAA,IAAI,CAACqD,YAAY,CAACkB,SAAS,GAAG,CAAA,uCAAA,EAA0CyC,aAAa,CAAA,CAAE;AACzF,EAAA;AAEAnD,EAAAA,eAAeA,GAAG;AAChB;IACA,IAAI,CAACP,cAAc,GAAG,MAAM,IAAI,CAACM,gBAAgB,EAAE;IACnD,IAAI,CAACL,cAAc,GAAG,MAAM,IAAI,CAACK,gBAAgB,EAAE;IAEnDxQ,MAAM,CAAC6C,gBAAgB,CAAC,QAAQ,EAAE,IAAI,CAACqN,cAAc,CAAC;IACtDlQ,MAAM,CAAC6C,gBAAgB,CAAC,QAAQ,EAAE,IAAI,CAACsN,cAAc,EAAE,IAAI,CAAC;;AAE5D;AACA,IAAA,IAAI,CAAC0D,WAAW,GAAIlC,CAAC,IAAK;AACxB,MAAA,IAAIA,CAAC,CAAClN,GAAG,KAAK,QAAQ,EAAE;AACtB,QAAA,IAAI,CAAC/F,OAAO,CAACmR,OAAO,EAAE;AACxB,MAAA,CAAC,MAAM,IAAI8B,CAAC,CAAClN,GAAG,KAAK,YAAY,IAAIkN,CAAC,CAAClN,GAAG,KAAK,OAAO,EAAE;AACtD,QAAA,IAAI,CAAC/F,OAAO,CAACgR,MAAM,EAAE;AACvB,MAAA,CAAC,MAAM,IAAIiC,CAAC,CAAClN,GAAG,KAAK,WAAW,EAAE;AAChC,QAAA,IAAI,CAAC/F,OAAO,CAACiR,MAAM,EAAE;AACvB,MAAA;IACF,CAAC;IACDvP,QAAQ,CAACyC,gBAAgB,CAAC,SAAS,EAAE,IAAI,CAACgR,WAAW,CAAC;AACxD,EAAA;AAEAjD,EAAAA,gBAAgBA,GAAG;IACjB,IAAI,IAAI,CAACV,cAAc,EAAE;MACvBlQ,MAAM,CAAC8T,mBAAmB,CAAC,QAAQ,EAAE,IAAI,CAAC5D,cAAc,CAAC;AAC3D,IAAA;IACA,IAAI,IAAI,CAACC,cAAc,EAAE;MACvBnQ,MAAM,CAAC8T,mBAAmB,CAAC,QAAQ,EAAE,IAAI,CAAC3D,cAAc,EAAE,IAAI,CAAC;AACjE,IAAA;IACA,IAAI,IAAI,CAAC0D,WAAW,EAAE;MACpBzT,QAAQ,CAAC0T,mBAAmB,CAAC,SAAS,EAAE,IAAI,CAACD,WAAW,CAAC;AAC3D,IAAA;AACF,EAAA;AAEAnD,EAAAA,UAAUA,GAAG;AACXqD,IAAAA,qBAAqB,CAAC,MAAM;MAC1B,IAAI,CAAC/D,OAAO,CAACc,SAAS,CAACC,GAAG,CAAC,oBAAoB,CAAC;AAClD,IAAA,CAAC,CAAC;AACJ,EAAA;AACF;;AC9SA;AACA;AACA;AACA;;AAEO,MAAMiD,KAAK,CAAC;EACjBvN,WAAWA,CAAC/H,OAAO,EAAE;IACnB,IAAI,CAACA,OAAO,GAAG;AACbiD,MAAAA,KAAK,EAAE,EAAE;AACTuN,MAAAA,OAAO,EAAE,EAAE;AACX9I,MAAAA,IAAI,EAAE,QAAQ;AAAE;AAChBgJ,MAAAA,KAAK,EAAE,IAAI;AACXC,MAAAA,OAAO,EAAE,IAAI;AACbC,MAAAA,SAAS,EAAE,CAAC;AACZC,MAAAA,UAAU,EAAE,CAAC;AACbC,MAAAA,cAAc,EAAE,KAAK;AACrBC,MAAAA,cAAc,EAAE,IAAI;AACpBC,MAAAA,MAAM,EAAEA,MAAM,CAAC,CAAC;AAChBC,MAAAA,MAAM,EAAEA,MAAM,CAAC,CAAC;AAChBC,MAAAA,MAAM,EAAEA,MAAM,CAAC,CAAC;AAChBC,MAAAA,OAAO,EAAEA,MAAM,CAAC,CAAC;AACjBC,MAAAA,KAAK,EAAE,OAAO;AACdC,MAAAA,YAAY,EAAE,IAAI;AAClBkE,MAAAA,eAAe,EAAE,IAAI;AACrBC,MAAAA,aAAa,EAAE,IAAI;MACnB,GAAGxV;KACJ;IAED,IAAI,CAACsR,OAAO,GAAG,IAAI;IACnB,IAAI,CAACmE,eAAe,GAAG,IAAI;IAC3B,IAAI,CAACN,WAAW,GAAG,IAAI;AACzB,EAAA;EAEAzD,MAAMA,CAACC,SAAS,EAAE;IAChB,IAAI,CAAC+D,eAAe,EAAE;IACtB,IAAI,CAACC,YAAY,EAAE;AAEnBhE,IAAAA,SAAS,CAACE,WAAW,CAAC,IAAI,CAAC4D,eAAe,CAAC;AAC3C9D,IAAAA,SAAS,CAACE,WAAW,CAAC,IAAI,CAACP,OAAO,CAAC;IAEnC,IAAI,CAACS,eAAe,EAAE;IACtB,IAAI,CAACC,UAAU,EAAE;;AAEjB;AACA,IAAA,IAAI,CAACV,OAAO,CAACsE,KAAK,EAAE;AACtB,EAAA;AAEA3D,EAAAA,OAAOA,GAAG;IACR,IAAI,CAACC,gBAAgB,EAAE;IAEvB,IAAI,IAAI,CAACZ,OAAO,EAAE;MAChB,IAAI,CAACA,OAAO,CAACc,SAAS,CAACC,GAAG,CAAC,iBAAiB,CAAC;AAC/C,IAAA;IACA,IAAI,IAAI,CAACoD,eAAe,EAAE;MACxB,IAAI,CAACA,eAAe,CAACrD,SAAS,CAACC,GAAG,CAAC,0BAA0B,CAAC;AAChE,IAAA;AAEAC,IAAAA,UAAU,CAAC,MAAM;MACf,IAAI,IAAI,CAAChB,OAAO,IAAI,IAAI,CAACA,OAAO,CAACa,UAAU,EAAE;QAC3C,IAAI,CAACb,OAAO,CAACa,UAAU,CAACI,WAAW,CAAC,IAAI,CAACjB,OAAO,CAAC;AACnD,MAAA;MACA,IAAI,IAAI,CAACmE,eAAe,IAAI,IAAI,CAACA,eAAe,CAACtD,UAAU,EAAE;QAC3D,IAAI,CAACsD,eAAe,CAACtD,UAAU,CAACI,WAAW,CAAC,IAAI,CAACkD,eAAe,CAAC;AACnE,MAAA;IACF,CAAC,EAAE,GAAG,CAAC;IAEP,IAAI,CAACnE,OAAO,GAAG,IAAI;IACnB,IAAI,CAACmE,eAAe,GAAG,IAAI;AAC7B,EAAA;AAEAC,EAAAA,eAAeA,GAAG;IAChB,IAAI,CAACD,eAAe,GAAG/T,QAAQ,CAAC8Q,aAAa,CAAC,KAAK,CAAC;IACpD,IAAI,CAACiD,eAAe,CAAChD,SAAS,GAAG,CAAA,uCAAA,EAA0C,IAAI,CAACzS,OAAO,CAACoR,KAAK,CAAA,CAAE;AAE/F,IAAA,IAAI,IAAI,CAACpR,OAAO,CAACuV,eAAe,EAAE;AAChC,MAAA,IAAI,CAACE,eAAe,CAACzC,OAAO,GAAIC,CAAC,IAAK;AACpC,QAAA,IAAIA,CAAC,CAAC4C,MAAM,KAAK,IAAI,CAACJ,eAAe,EAAE;AACrC,UAAA,IAAI,CAACzV,OAAO,CAACmR,OAAO,EAAE;AACxB,QAAA;MACF,CAAC;AACH,IAAA;AACF,EAAA;AAEAwE,EAAAA,YAAYA,GAAG;IACb,MAAM;MACJ1S,KAAK;MACLuN,OAAO;MACP9I,IAAI;MACJgJ,KAAK;MACLC,OAAO;MACPC,SAAS;MACTC,UAAU;MACVC,cAAc;MACdC,cAAc;MACdK,KAAK;AACLC,MAAAA;KACD,GAAG,IAAI,CAACrR,OAAO;IAEhB,IAAI,CAACsR,OAAO,GAAG5P,QAAQ,CAAC8Q,aAAa,CAAC,KAAK,CAAC;IAC5C,IAAI,CAAClB,OAAO,CAACmB,SAAS,GAAG,CAAA,qBAAA,EAAwB/K,IAAI,CAAA,YAAA,EAAe0J,KAAK,CAAA,CAAE;IAC3E,IAAI,CAACE,OAAO,CAACyB,YAAY,CAAC,MAAM,EAAE,QAAQ,CAAC;IAC3C,IAAI,CAACzB,OAAO,CAACyB,YAAY,CAAC,YAAY,EAAE,MAAM,CAAC;IAC/C,IAAI,CAACzB,OAAO,CAACyB,YAAY,CAAC,UAAU,EAAE,IAAI,CAAC;AAE3C,IAAA,IAAI1B,YAAY,EAAE;MAChB,IAAI,CAACC,OAAO,CAACoB,KAAK,CAACC,WAAW,CAAC,qBAAqB,EAAEtB,YAAY,CAAC;AACrE,IAAA;;AAEA;AACA,IAAA,MAAMwB,QAAQ,GAAGnR,QAAQ,CAAC8Q,aAAa,CAAC,QAAQ,CAAC;IACjDK,QAAQ,CAACJ,SAAS,GAAG,kBAAkB;IACvCI,QAAQ,CAACC,SAAS,GAAG,SAAS;AAC9BD,IAAAA,QAAQ,CAACE,YAAY,CAAC,YAAY,EAAE,OAAO,CAAC;AAC5CF,IAAAA,QAAQ,CAACG,OAAO,GAAIC,CAAC,IAAK;MACxBA,CAAC,CAACC,cAAc,EAAE;AAClB,MAAA,IAAI,CAAClT,OAAO,CAACmR,OAAO,EAAE;IACxB,CAAC;AACD,IAAA,IAAI,CAACG,OAAO,CAACO,WAAW,CAACgB,QAAQ,CAAC;;AAElC;AACA,IAAA,IAAInC,KAAK,EAAE;AACT,MAAA,MAAMyC,OAAO,GAAG,IAAI,CAACC,YAAY,CAAC1C,KAAK,CAAC;AACxC,MAAA,IAAI,CAACY,OAAO,CAACO,WAAW,CAACsB,OAAO,CAAC;AACnC,IAAA;;AAEA;AACA,IAAA,IAAIlQ,KAAK,EAAE;AACT,MAAA,MAAMoQ,MAAM,GAAG3R,QAAQ,CAAC8Q,aAAa,CAAC,KAAK,CAAC;MAC5Ca,MAAM,CAACZ,SAAS,GAAG,mBAAmB;AAEtC,MAAA,MAAMa,OAAO,GAAG5R,QAAQ,CAAC8Q,aAAa,CAAC,IAAI,CAAC;MAC5Cc,OAAO,CAACb,SAAS,GAAG,kBAAkB;MACtCa,OAAO,CAACC,WAAW,GAAGtQ,KAAK;AAC3BoQ,MAAAA,MAAM,CAACxB,WAAW,CAACyB,OAAO,CAAC;AAE3B,MAAA,IAAI,CAAChC,OAAO,CAACO,WAAW,CAACwB,MAAM,CAAC;AAClC,IAAA;;AAEA;AACA,IAAA,IAAI7C,OAAO,EAAE;AACX,MAAA,MAAMrP,IAAI,GAAGO,QAAQ,CAAC8Q,aAAa,CAAC,KAAK,CAAC;MAC1CrR,IAAI,CAACsR,SAAS,GAAG,iBAAiB;MAClCtR,IAAI,CAAC2R,SAAS,GAAGtC,OAAO;AACxB,MAAA,IAAI,CAACc,OAAO,CAACO,WAAW,CAAC1Q,IAAI,CAAC;AAChC,IAAA;;AAEA;AACA,IAAA,MAAMsS,MAAM,GAAG/R,QAAQ,CAAC8Q,aAAa,CAAC,KAAK,CAAC;IAC5CiB,MAAM,CAAChB,SAAS,GAAG,mBAAmB;;AAEtC;IACA,IAAI5B,UAAU,GAAG,CAAC,EAAE;AAClB,MAAA,MAAM3K,QAAQ,GAAGxE,QAAQ,CAAC8Q,aAAa,CAAC,KAAK,CAAC;MAC9CtM,QAAQ,CAACuM,SAAS,GAAG,qBAAqB;MAE1C,KAAK,IAAIqD,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGjF,UAAU,EAAEiF,CAAC,EAAE,EAAE;AACnC,QAAA,MAAMC,GAAG,GAAGrU,QAAQ,CAAC8Q,aAAa,CAAC,MAAM,CAAC;AAC1CuD,QAAAA,GAAG,CAACtD,SAAS,GAAG,2BAA2BqD,CAAC,KAAKlF,SAAS,GAAG,iCAAiC,GAAG,EAAE,CAAA,CAAA,EAAIkF,CAAC,GAAGlF,SAAS,GAAG,oCAAoC,GAAG,EAAE,CAAA,CAAE;AAClK1K,QAAAA,QAAQ,CAAC2L,WAAW,CAACkE,GAAG,CAAC;AAC3B,MAAA;AAEAtC,MAAAA,MAAM,CAAC5B,WAAW,CAAC3L,QAAQ,CAAC;AAC9B,IAAA;;AAEA;AACA,IAAA,MAAMwN,OAAO,GAAGhS,QAAQ,CAAC8Q,aAAa,CAAC,KAAK,CAAC;IAC7CkB,OAAO,CAACjB,SAAS,GAAG,oBAAoB;AAExC,IAAA,IAAI9B,OAAO,EAAE;AACXA,MAAAA,OAAO,CAAC7K,OAAO,CAAE6N,GAAG,IAAK;AACvB,QAAA,MAAMC,MAAM,GAAGlS,QAAQ,CAAC8Q,aAAa,CAAC,QAAQ,CAAC;QAC/CoB,MAAM,CAACnB,SAAS,GAAG,CAAA,iBAAA,EAAoBkB,GAAG,CAACE,OAAO,IAAI,WAAW,CAAA,CAAE;AACnED,QAAAA,MAAM,CAACL,WAAW,GAAGI,GAAG,CAACG,IAAI;AAC7BF,QAAAA,MAAM,CAACZ,OAAO,GAAIC,CAAC,IAAK;UACtBA,CAAC,CAACC,cAAc,EAAE;AAClB,UAAA,IAAIS,GAAG,CAACI,MAAM,KAAK,MAAM,EAAE,IAAI,CAAC/T,OAAO,CAACgR,MAAM,EAAE,CAAC,KAC5C,IAAI2C,GAAG,CAACI,MAAM,KAAK,MAAM,EAAE,IAAI,CAAC/T,OAAO,CAACiR,MAAM,EAAE,CAAC,KACjD,IAAI0C,GAAG,CAACI,MAAM,KAAK,MAAM,EAAE,IAAI,CAAC/T,OAAO,CAACkR,MAAM,EAAE,CAAC,KACjD,IAAIyC,GAAG,CAACI,MAAM,KAAK,OAAO,EAAE,IAAI,CAAC/T,OAAO,CAACmR,OAAO,EAAE,CAAC,KACnD,IAAIwC,GAAG,CAACK,OAAO,EAAEL,GAAG,CAACK,OAAO,EAAE;QACrC,CAAC;AACDN,QAAAA,OAAO,CAAC7B,WAAW,CAAC+B,MAAM,CAAC;AAC7B,MAAA,CAAC,CAAC;AACJ,IAAA,CAAC,MAAM;AACL,MAAA,IAAI7C,cAAc,IAAIH,SAAS,GAAGC,UAAU,GAAG,CAAC,EAAE;AAChD,QAAA,MAAMoD,OAAO,GAAGvS,QAAQ,CAAC8Q,aAAa,CAAC,QAAQ,CAAC;QAChDyB,OAAO,CAACxB,SAAS,GAAG,uBAAuB;QAC3CwB,OAAO,CAACV,WAAW,GAAG,WAAW;AACjCU,QAAAA,OAAO,CAACjB,OAAO,GAAIC,CAAC,IAAK;UACvBA,CAAC,CAACC,cAAc,EAAE;AAClB,UAAA,IAAI,CAAClT,OAAO,CAACkR,MAAM,EAAE;QACvB,CAAC;AACDwC,QAAAA,OAAO,CAAC7B,WAAW,CAACoC,OAAO,CAAC;AAC9B,MAAA;AAEA,MAAA,IAAInD,cAAc,EAAE;AAClB,QAAA,MAAMoD,OAAO,GAAGxS,QAAQ,CAAC8Q,aAAa,CAAC,QAAQ,CAAC;QAChD0B,OAAO,CAACzB,SAAS,GAAG,4BAA4B;QAChDyB,OAAO,CAACX,WAAW,GAAG,MAAM;AAC5BW,QAAAA,OAAO,CAAClB,OAAO,GAAIC,CAAC,IAAK;UACvBA,CAAC,CAACC,cAAc,EAAE;AAClB,UAAA,IAAI,CAAClT,OAAO,CAACiR,MAAM,EAAE;QACvB,CAAC;AACDyC,QAAAA,OAAO,CAAC7B,WAAW,CAACqC,OAAO,CAAC;AAC9B,MAAA;AAEA,MAAA,MAAMC,OAAO,GAAGzS,QAAQ,CAAC8Q,aAAa,CAAC,QAAQ,CAAC;MAChD2B,OAAO,CAAC1B,SAAS,GAAG,0BAA0B;MAC9C0B,OAAO,CAACZ,WAAW,GAAG3C,SAAS,IAAIC,UAAU,GAAG,CAAC,GAAG,aAAa,GAAG,MAAM;AAC1EsD,MAAAA,OAAO,CAACnB,OAAO,GAAIC,CAAC,IAAK;QACvBA,CAAC,CAACC,cAAc,EAAE;AAClB,QAAA,IAAI,CAAClT,OAAO,CAACgR,MAAM,EAAE;MACvB,CAAC;AACD0C,MAAAA,OAAO,CAAC7B,WAAW,CAACsC,OAAO,CAAC;AAC9B,IAAA;AAEAV,IAAAA,MAAM,CAAC5B,WAAW,CAAC6B,OAAO,CAAC;AAC3B,IAAA,IAAI,CAACpC,OAAO,CAACO,WAAW,CAAC4B,MAAM,CAAC;AAClC,EAAA;EAEAL,YAAYA,CAAC1C,KAAK,EAAE;AAClB,IAAA,MAAMiB,SAAS,GAAGjQ,QAAQ,CAAC8Q,aAAa,CAAC,KAAK,CAAC;IAC/Cb,SAAS,CAACc,SAAS,GAAG,kBAAkB;AAExC,IAAA,IAAI/B,KAAK,CAACrN,IAAI,KAAK,OAAO,EAAE;AAC1B,MAAA,MAAM+Q,GAAG,GAAG1S,QAAQ,CAAC8Q,aAAa,CAAC,KAAK,CAAC;AACzC4B,MAAAA,GAAG,CAACC,GAAG,GAAG3D,KAAK,CAAC2D,GAAG;AACnBD,MAAAA,GAAG,CAACE,GAAG,GAAG5D,KAAK,CAAC4D,GAAG,IAAI,EAAE;MACzBF,GAAG,CAAC3B,SAAS,GAAG,kBAAkB;AAClCd,MAAAA,SAAS,CAACE,WAAW,CAACuC,GAAG,CAAC;AAC5B,IAAA,CAAC,MAAM,IAAI1D,KAAK,CAACrN,IAAI,KAAK,OAAO,EAAE;AACjC,MAAA,MAAMkR,KAAK,GAAG7S,QAAQ,CAAC8Q,aAAa,CAAC,OAAO,CAAC;AAC7C+B,MAAAA,KAAK,CAACF,GAAG,GAAG3D,KAAK,CAAC2D,GAAG;MACrBE,KAAK,CAACC,QAAQ,GAAG,IAAI;AACrBD,MAAAA,KAAK,CAACE,QAAQ,GAAG/D,KAAK,CAAC+D,QAAQ,IAAI,KAAK;AACxCF,MAAAA,KAAK,CAACG,KAAK,GAAGhE,KAAK,CAACgE,KAAK,KAAK,KAAK;AACnCH,MAAAA,KAAK,CAACI,IAAI,GAAGjE,KAAK,CAACiE,IAAI,IAAI,KAAK;MAChCJ,KAAK,CAAC9B,SAAS,GAAG,kBAAkB;AACpCd,MAAAA,SAAS,CAACE,WAAW,CAAC0C,KAAK,CAAC;AAC9B,IAAA,CAAC,MAAM,IAAI7D,KAAK,CAACrN,IAAI,KAAK,OAAO,EAAE;AACjC,MAAA,MAAMuR,MAAM,GAAGlT,QAAQ,CAAC8Q,aAAa,CAAC,QAAQ,CAAC;AAC/CoC,MAAAA,MAAM,CAACP,GAAG,GAAG3D,KAAK,CAAC2D,GAAG;MACtBO,MAAM,CAACnC,SAAS,GAAG,kBAAkB;MACrCmC,MAAM,CAACC,eAAe,GAAG,IAAI;AAC7BlD,MAAAA,SAAS,CAACE,WAAW,CAAC+C,MAAM,CAAC;AAC/B,IAAA,CAAC,MAAM,IAAIlE,KAAK,CAACrN,IAAI,KAAK,QAAQ,EAAE;AAClC,MAAA,MAAM2S,eAAe,GAAGtU,QAAQ,CAAC8Q,aAAa,CAAC,KAAK,CAAC;MACrDwD,eAAe,CAACvD,SAAS,GAAG,mBAAmB;MAC/CuD,eAAe,CAACjD,YAAY,CAAC,iBAAiB,EAAErC,KAAK,CAAC2D,GAAG,CAAC;AAC1D1C,MAAAA,SAAS,CAACE,WAAW,CAACmE,eAAe,CAAC;AACxC,IAAA;AAEA,IAAA,OAAOrE,SAAS;AAClB,EAAA;AAEAI,EAAAA,eAAeA,GAAG;AAChB,IAAA,IAAI,IAAI,CAAC/R,OAAO,CAACwV,aAAa,EAAE;AAC9B,MAAA,IAAI,CAACL,WAAW,GAAIlC,CAAC,IAAK;AACxB,QAAA,IAAIA,CAAC,CAAClN,GAAG,KAAK,QAAQ,EAAE;AACtB,UAAA,IAAI,CAAC/F,OAAO,CAACmR,OAAO,EAAE;AACxB,QAAA,CAAC,MAAM,IAAI8B,CAAC,CAAClN,GAAG,KAAK,YAAY,IAAIkN,CAAC,CAAClN,GAAG,KAAK,OAAO,EAAE;AACtD,UAAA,IAAI,CAAC/F,OAAO,CAACgR,MAAM,EAAE;AACvB,QAAA,CAAC,MAAM,IAAIiC,CAAC,CAAClN,GAAG,KAAK,WAAW,EAAE;AAChC,UAAA,IAAI,CAAC/F,OAAO,CAACiR,MAAM,EAAE;AACvB,QAAA;MACF,CAAC;MACDvP,QAAQ,CAACyC,gBAAgB,CAAC,SAAS,EAAE,IAAI,CAACgR,WAAW,CAAC;AACxD,IAAA;AACF,EAAA;AAEAjD,EAAAA,gBAAgBA,GAAG;IACjB,IAAI,IAAI,CAACiD,WAAW,EAAE;MACpBzT,QAAQ,CAAC0T,mBAAmB,CAAC,SAAS,EAAE,IAAI,CAACD,WAAW,CAAC;AAC3D,IAAA;AACF,EAAA;AAEAnD,EAAAA,UAAUA,GAAG;AACXqD,IAAAA,qBAAqB,CAAC,MAAM;MAC1B,IAAI,CAACI,eAAe,CAACrD,SAAS,CAACC,GAAG,CAAC,2BAA2B,CAAC;MAC/D,IAAI,CAACf,OAAO,CAACc,SAAS,CAACC,GAAG,CAAC,kBAAkB,CAAC;AAChD,IAAA,CAAC,CAAC;AACJ,EAAA;AACF;;AC1RA;AACA;AACA;AACA;;AAIO,MAAM4D,OAAO,CAAC;EACnBlO,WAAWA,CAAC/H,OAAO,EAAE;IACnB,IAAI,CAACA,OAAO,GAAG;AACbyQ,MAAAA,aAAa,EAAE,IAAI;AACnBxN,MAAAA,KAAK,EAAE,EAAE;AACTuN,MAAAA,OAAO,EAAE,EAAE;AACXvC,MAAAA,QAAQ,EAAE,OAAO;AAAE;AACnBiI,MAAAA,KAAK,EAAE,IAAI;AAAE;AACbC,MAAAA,KAAK,EAAE,IAAI;AACXC,MAAAA,SAAS,EAAE,OAAO;AAAE;AACpBxF,MAAAA,SAAS,EAAE,CAAC;AACZC,MAAAA,UAAU,EAAE,CAAC;AACbC,MAAAA,cAAc,EAAE,KAAK;AACrBC,MAAAA,cAAc,EAAE,IAAI;AACpBC,MAAAA,MAAM,EAAEA,MAAM,CAAC,CAAC;AAChBC,MAAAA,MAAM,EAAEA,MAAM,CAAC,CAAC;AAChBC,MAAAA,MAAM,EAAEA,MAAM,CAAC,CAAC;AAChBC,MAAAA,OAAO,EAAEA,MAAM,CAAC,CAAC;AACjBC,MAAAA,KAAK,EAAE,OAAO;AACdC,MAAAA,YAAY,EAAE,IAAI;MAClB,GAAGrR;KACJ;IAED,IAAI,CAACqW,cAAc,GAAG,IAAI;IAC1B,IAAI,CAACC,cAAc,GAAG,IAAI;IAC1B,IAAI,CAACC,gBAAgB,GAAG,KAAK;IAC7B,IAAI,CAAC/E,cAAc,GAAG,IAAI;IAC1B,IAAI,CAACC,cAAc,GAAG,IAAI;AAC5B,EAAA;EAEAC,MAAMA,CAACC,SAAS,EAAE;IAChB,IAAI,CAAC6E,cAAc,EAAE;IACrB,IAAI,CAAC5E,cAAc,EAAE;AAErBD,IAAAA,SAAS,CAACE,WAAW,CAAC,IAAI,CAACwE,cAAc,CAAC;AAC1C1E,IAAAA,SAAS,CAACE,WAAW,CAAC,IAAI,CAACyE,cAAc,CAAC;IAE1C,IAAI,CAACG,gBAAgB,EAAE;IACvB,IAAI,CAAC1E,eAAe,EAAE;IACtB,IAAI,CAACC,UAAU,EAAE;AACnB,EAAA;AAEAC,EAAAA,OAAOA,GAAG;IACR,IAAI,CAACC,gBAAgB,EAAE;IAEvB,IAAI,IAAI,CAACmE,cAAc,EAAE;MACvB,IAAI,CAACA,cAAc,CAACjE,SAAS,CAACC,GAAG,CAAC,mBAAmB,CAAC;AACxD,IAAA;IACA,IAAI,IAAI,CAACiE,cAAc,EAAE;MACvB,IAAI,CAACA,cAAc,CAAClE,SAAS,CAACC,GAAG,CAAC,2BAA2B,CAAC;AAChE,IAAA;AAEAC,IAAAA,UAAU,CAAC,MAAM;MACf,IAAI,IAAI,CAAC+D,cAAc,IAAI,IAAI,CAACA,cAAc,CAAClE,UAAU,EAAE;QACzD,IAAI,CAACkE,cAAc,CAAClE,UAAU,CAACI,WAAW,CAAC,IAAI,CAAC8D,cAAc,CAAC;AACjE,MAAA;MACA,IAAI,IAAI,CAACC,cAAc,IAAI,IAAI,CAACA,cAAc,CAACnE,UAAU,EAAE;QACzD,IAAI,CAACmE,cAAc,CAACnE,UAAU,CAACI,WAAW,CAAC,IAAI,CAAC+D,cAAc,CAAC;AACjE,MAAA;IACF,CAAC,EAAE,GAAG,CAAC;IAEP,IAAI,CAACD,cAAc,GAAG,IAAI;IAC1B,IAAI,CAACC,cAAc,GAAG,IAAI;AAC5B,EAAA;AAEAE,EAAAA,cAAcA,GAAG;IACf,MAAM;MAAEN,KAAK;MAAEC,KAAK;MAAE/E,KAAK;AAAEC,MAAAA;KAAc,GAAG,IAAI,CAACrR,OAAO;IAE1D,IAAI,CAACqW,cAAc,GAAG3U,QAAQ,CAAC8Q,aAAa,CAAC,KAAK,CAAC;AACnD,IAAA,IAAI,CAAC6D,cAAc,CAAC5D,SAAS,GAAG,CAAA,yBAAA,EAA4BrB,KAAK,CAAA,CAAE;AAEnE,IAAA,IAAI+E,KAAK,EAAE;MACT,IAAI,CAACE,cAAc,CAACjE,SAAS,CAACC,GAAG,CAAC,oBAAoB,CAAC;AACzD,IAAA;;AAEA;AACA,IAAA,MAAM0D,GAAG,GAAGrU,QAAQ,CAAC8Q,aAAa,CAAC,KAAK,CAAC;IACzCuD,GAAG,CAACtD,SAAS,GAAG,kBAAkB;IAElC,IAAIyD,KAAK,IAAI7E,YAAY,EAAE;AACzB0E,MAAAA,GAAG,CAACrD,KAAK,CAACgE,eAAe,GAAGR,KAAK,IAAI7E,YAAY;AACnD,IAAA;;AAEA;AACA,IAAA,MAAMsF,IAAI,GAAGjV,QAAQ,CAAC8Q,aAAa,CAAC,KAAK,CAAC;IAC1CmE,IAAI,CAAClE,SAAS,GAAG,mBAAmB;IAEpC,IAAIyD,KAAK,IAAI7E,YAAY,EAAE;AACzBsF,MAAAA,IAAI,CAACjE,KAAK,CAACkE,WAAW,GAAGV,KAAK,IAAI7E,YAAY;AAChD,IAAA;AAEA,IAAA,IAAI,CAACgF,cAAc,CAACxE,WAAW,CAACkE,GAAG,CAAC;AACpC,IAAA,IAAI,CAACM,cAAc,CAACxE,WAAW,CAAC8E,IAAI,CAAC;AACvC,EAAA;AAEA/E,EAAAA,cAAcA,GAAG;IACf,MAAM;MACJ3O,KAAK;MACLuN,OAAO;MACPI,SAAS;MACTC,UAAU;MACVC,cAAc;MACdC,cAAc;MACdK,KAAK;AACLC,MAAAA;KACD,GAAG,IAAI,CAACrR,OAAO;IAEhB,IAAI,CAACsW,cAAc,GAAG5U,QAAQ,CAAC8Q,aAAa,CAAC,KAAK,CAAC;AACnD,IAAA,IAAI,CAAC8D,cAAc,CAAC7D,SAAS,GAAG,CAAA,yCAAA,EAA4CrB,KAAK,CAAA,CAAE;AACnF,IAAA,IAAI,CAACkF,cAAc,CAAC5D,KAAK,CAACqC,OAAO,GAAG,MAAM;AAE1C,IAAA,IAAI1D,YAAY,EAAE;MAChB,IAAI,CAACiF,cAAc,CAAC5D,KAAK,CAACC,WAAW,CAAC,qBAAqB,EAAEtB,YAAY,CAAC;AAC5E,IAAA;;AAEA;AACA,IAAA,MAAMwF,KAAK,GAAGnV,QAAQ,CAAC8Q,aAAa,CAAC,KAAK,CAAC;IAC3CqE,KAAK,CAACpE,SAAS,GAAG,4BAA4B;AAC9C,IAAA,IAAI,CAAC6D,cAAc,CAACzE,WAAW,CAACgF,KAAK,CAAC;;AAEtC;AACA,IAAA,MAAMhE,QAAQ,GAAGnR,QAAQ,CAAC8Q,aAAa,CAAC,QAAQ,CAAC;IACjDK,QAAQ,CAACJ,SAAS,GAAG,4BAA4B;IACjDI,QAAQ,CAACC,SAAS,GAAG,SAAS;AAC9BD,IAAAA,QAAQ,CAACG,OAAO,GAAIC,CAAC,IAAK;MACxBA,CAAC,CAACC,cAAc,EAAE;MAClBD,CAAC,CAAC6D,eAAe,EAAE;AACnB,MAAA,IAAI,CAAC9W,OAAO,CAACmR,OAAO,EAAE;IACxB,CAAC;AACD,IAAA,IAAI,CAACmF,cAAc,CAACzE,WAAW,CAACgB,QAAQ,CAAC;;AAEzC;AACA,IAAA,MAAMD,OAAO,GAAGlR,QAAQ,CAAC8Q,aAAa,CAAC,KAAK,CAAC;IAC7CI,OAAO,CAACH,SAAS,GAAG,8BAA8B;AAElD,IAAA,IAAIxP,KAAK,EAAE;AACT,MAAA,MAAMqQ,OAAO,GAAG5R,QAAQ,CAAC8Q,aAAa,CAAC,IAAI,CAAC;MAC5Cc,OAAO,CAACb,SAAS,GAAG,4BAA4B;MAChDa,OAAO,CAACC,WAAW,GAAGtQ,KAAK;AAC3B2P,MAAAA,OAAO,CAACf,WAAW,CAACyB,OAAO,CAAC;AAC9B,IAAA;AAEA,IAAA,IAAI9C,OAAO,EAAE;AACX,MAAA,MAAMgD,SAAS,GAAG9R,QAAQ,CAAC8Q,aAAa,CAAC,KAAK,CAAC;MAC/CgB,SAAS,CAACf,SAAS,GAAG,8BAA8B;MACpDe,SAAS,CAACV,SAAS,GAAGtC,OAAO;AAC7BoC,MAAAA,OAAO,CAACf,WAAW,CAAC2B,SAAS,CAAC;AAChC,IAAA;;AAEA;AACA,IAAA,MAAMC,MAAM,GAAG/R,QAAQ,CAAC8Q,aAAa,CAAC,KAAK,CAAC;IAC5CiB,MAAM,CAAChB,SAAS,GAAG,6BAA6B;IAEhD,IAAI5B,UAAU,GAAG,CAAC,EAAE;AAClB,MAAA,MAAM3K,QAAQ,GAAGxE,QAAQ,CAAC8Q,aAAa,CAAC,MAAM,CAAC;MAC/CtM,QAAQ,CAACuM,SAAS,GAAG,+BAA+B;MACpDvM,QAAQ,CAACqN,WAAW,GAAG,CAAA,EAAG3C,SAAS,GAAG,CAAC,CAAA,GAAA,EAAMC,UAAU,CAAA,CAAE;AACzD4C,MAAAA,MAAM,CAAC5B,WAAW,CAAC3L,QAAQ,CAAC;AAC9B,IAAA;AAEA,IAAA,MAAMwN,OAAO,GAAGhS,QAAQ,CAAC8Q,aAAa,CAAC,KAAK,CAAC;IAC7CkB,OAAO,CAACjB,SAAS,GAAG,8BAA8B;AAElD,IAAA,IAAI1B,cAAc,IAAIH,SAAS,GAAGC,UAAU,GAAG,CAAC,EAAE;AAChD,MAAA,MAAMoD,OAAO,GAAGvS,QAAQ,CAAC8Q,aAAa,CAAC,QAAQ,CAAC;MAChDyB,OAAO,CAACxB,SAAS,GAAG,mCAAmC;MACvDwB,OAAO,CAACV,WAAW,GAAG,MAAM;AAC5BU,MAAAA,OAAO,CAACjB,OAAO,GAAIC,CAAC,IAAK;QACvBA,CAAC,CAACC,cAAc,EAAE;QAClBD,CAAC,CAAC6D,eAAe,EAAE;AACnB,QAAA,IAAI,CAAC9W,OAAO,CAACkR,MAAM,EAAE;MACvB,CAAC;AACDwC,MAAAA,OAAO,CAAC7B,WAAW,CAACoC,OAAO,CAAC;AAC9B,IAAA;AAEA,IAAA,IAAInD,cAAc,EAAE;AAClB,MAAA,MAAMoD,OAAO,GAAGxS,QAAQ,CAAC8Q,aAAa,CAAC,QAAQ,CAAC;MAChD0B,OAAO,CAACzB,SAAS,GAAG,wCAAwC;MAC5DyB,OAAO,CAACX,WAAW,GAAG,MAAM;AAC5BW,MAAAA,OAAO,CAAClB,OAAO,GAAIC,CAAC,IAAK;QACvBA,CAAC,CAACC,cAAc,EAAE;QAClBD,CAAC,CAAC6D,eAAe,EAAE;AACnB,QAAA,IAAI,CAAC9W,OAAO,CAACiR,MAAM,EAAE;MACvB,CAAC;AACDyC,MAAAA,OAAO,CAAC7B,WAAW,CAACqC,OAAO,CAAC;AAC9B,IAAA;AAEA,IAAA,MAAMC,OAAO,GAAGzS,QAAQ,CAAC8Q,aAAa,CAAC,QAAQ,CAAC;IAChD2B,OAAO,CAAC1B,SAAS,GAAG,sCAAsC;IAC1D0B,OAAO,CAACZ,WAAW,GAAG3C,SAAS,IAAIC,UAAU,GAAG,CAAC,GAAG,MAAM,GAAG,MAAM;AACnEsD,IAAAA,OAAO,CAACnB,OAAO,GAAIC,CAAC,IAAK;MACvBA,CAAC,CAACC,cAAc,EAAE;MAClBD,CAAC,CAAC6D,eAAe,EAAE;AACnB,MAAA,IAAI,CAAC9W,OAAO,CAACgR,MAAM,EAAE;IACvB,CAAC;AACD0C,IAAAA,OAAO,CAAC7B,WAAW,CAACsC,OAAO,CAAC;AAE5BV,IAAAA,MAAM,CAAC5B,WAAW,CAAC6B,OAAO,CAAC;AAC3Bd,IAAAA,OAAO,CAACf,WAAW,CAAC4B,MAAM,CAAC;AAC3B,IAAA,IAAI,CAAC6C,cAAc,CAACzE,WAAW,CAACe,OAAO,CAAC;AAC1C,EAAA;AAEA6D,EAAAA,gBAAgBA,GAAG;IACjB,MAAM;MAAEhG,aAAa;AAAExC,MAAAA;KAAU,GAAG,IAAI,CAACjO,OAAO;IAEhD,IAAI,CAACyQ,aAAa,EAAE;AAEpB,IAAA,MAAMrD,UAAU,GAAGqD,aAAa,CAACuE,qBAAqB,EAAE;;AAExD;IACA,IAAIxH,GAAG,EAAEC,IAAI;AAEb,IAAA,QAAQQ,QAAQ;AACd,MAAA,KAAK,KAAK;AACRT,QAAAA,GAAG,GAAGJ,UAAU,CAACI,GAAG,GAAG,EAAE;QACzBC,IAAI,GAAGL,UAAU,CAACK,IAAI,GAAGL,UAAU,CAACN,KAAK,GAAG,CAAC;AAC7C,QAAA;AACF,MAAA,KAAK,QAAQ;AACXU,QAAAA,GAAG,GAAGJ,UAAU,CAACM,MAAM,GAAG,EAAE;QAC5BD,IAAI,GAAGL,UAAU,CAACK,IAAI,GAAGL,UAAU,CAACN,KAAK,GAAG,CAAC;AAC7C,QAAA;AACF,MAAA,KAAK,MAAM;QACTU,GAAG,GAAGJ,UAAU,CAACI,GAAG,GAAGJ,UAAU,CAACJ,MAAM,GAAG,CAAC;AAC5CS,QAAAA,IAAI,GAAGL,UAAU,CAACK,IAAI,GAAG,EAAE;AAC3B,QAAA;AACF,MAAA,KAAK,OAAO;AACZ,MAAA;QACED,GAAG,GAAGJ,UAAU,CAACI,GAAG,GAAGJ,UAAU,CAACJ,MAAM,GAAG,CAAC;AAC5CS,QAAAA,IAAI,GAAGL,UAAU,CAACO,KAAK,GAAG,EAAE;AAC5B,QAAA;AACJ;AAEA,IAAA,IAAI,CAAC0I,cAAc,CAAC3D,KAAK,CAACzE,QAAQ,GAAG,OAAO;IAC5C,IAAI,CAACoI,cAAc,CAAC3D,KAAK,CAAClF,GAAG,GAAG,CAAA,EAAGA,GAAG,CAAA,EAAA,CAAI;IAC1C,IAAI,CAAC6I,cAAc,CAAC3D,KAAK,CAACjF,IAAI,GAAG,CAAA,EAAGA,IAAI,CAAA,EAAA,CAAI;AAC9C,EAAA;AAEAqE,EAAAA,gBAAgBA,GAAG;AACjB,IAAA,IAAI,CAAC,IAAI,CAACyE,gBAAgB,EAAE;IAE5B,MAAMQ,WAAW,GAAG,IAAI,CAACV,cAAc,CAACrB,qBAAqB,EAAE;IAC/D,MAAM3H,WAAW,GAAG,IAAI,CAACiJ,cAAc,CAACtB,qBAAqB,EAAE;;AAE/D;IACA,MAAM;MAAExH,GAAG;MAAEC,IAAI;AAAES,MAAAA;AAAe,KAAC,GAAGf,iBAAiB,CACrD4J,WAAW,EACX1J,WAAW,EACX,IAAI,CAACrN,OAAO,CAACiO,QAAQ,KAAK,OAAO,GAAG,OAAO,GAAG,QAChD,CAAC;IAED,MAAMgH,QAAQ,GAAG9G,iBAAiB,CAChC;MAAEX,GAAG;AAAEC,MAAAA;AAAK,KAAC,EACb;MAAEX,KAAK,EAAEO,WAAW,CAACP,KAAK;MAAEE,MAAM,EAAEK,WAAW,CAACL;AAAO,KACzD,CAAC;AAED,IAAA,IAAI,CAACsJ,cAAc,CAAC5D,KAAK,CAACzE,QAAQ,GAAG,OAAO;IAC5C,IAAI,CAACqI,cAAc,CAAC5D,KAAK,CAAClF,GAAG,GAAG,CAAA,EAAGyH,QAAQ,CAACzH,GAAG,CAAA,EAAA,CAAI;IACnD,IAAI,CAAC8I,cAAc,CAAC5D,KAAK,CAACjF,IAAI,GAAG,CAAA,EAAGwH,QAAQ,CAACxH,IAAI,CAAA,EAAA,CAAI;;AAErD;IACA,MAAMoJ,KAAK,GAAG,IAAI,CAACP,cAAc,CAACU,aAAa,CAAC,6BAA6B,CAAC;AAC9E,IAAA,IAAIH,KAAK,EAAE;MACTA,KAAK,CAACpE,SAAS,GAAG,CAAA,uDAAA,EAA0DnE,gBAAgB,CAACJ,cAAc,CAAC,CAAA,CAAE;AAChH,IAAA;AACF,EAAA;AAEA+I,EAAAA,YAAYA,GAAG;IACb,IAAI,IAAI,CAACV,gBAAgB,EAAE;IAE3B,IAAI,CAACA,gBAAgB,GAAG,IAAI;AAC5B,IAAA,IAAI,CAACD,cAAc,CAAC5D,KAAK,CAACqC,OAAO,GAAG,OAAO;AAE3CM,IAAAA,qBAAqB,CAAC,MAAM;MAC1B,IAAI,CAACvD,gBAAgB,EAAE;MACvB,IAAI,CAACwE,cAAc,CAAClE,SAAS,CAACC,GAAG,CAAC,4BAA4B,CAAC;AACjE,IAAA,CAAC,CAAC;AACJ,EAAA;AAEA6E,EAAAA,YAAYA,GAAG;AACb,IAAA,IAAI,CAAC,IAAI,CAACX,gBAAgB,EAAE;IAE5B,IAAI,CAACA,gBAAgB,GAAG,KAAK;IAC7B,IAAI,CAACD,cAAc,CAAClE,SAAS,CAAC+E,MAAM,CAAC,4BAA4B,CAAC;IAClE,IAAI,CAACb,cAAc,CAAClE,SAAS,CAACC,GAAG,CAAC,2BAA2B,CAAC;AAE9DC,IAAAA,UAAU,CAAC,MAAM;AACf,MAAA,IAAI,CAACgE,cAAc,CAAC5D,KAAK,CAACqC,OAAO,GAAG,MAAM;MAC1C,IAAI,CAACuB,cAAc,CAAClE,SAAS,CAAC+E,MAAM,CAAC,2BAA2B,CAAC;IACnE,CAAC,EAAE,GAAG,CAAC;AACT,EAAA;AAEAC,EAAAA,cAAcA,GAAG;IACf,IAAI,IAAI,CAACb,gBAAgB,EAAE;MACzB,IAAI,CAACW,YAAY,EAAE;AACrB,IAAA,CAAC,MAAM;MACL,IAAI,CAACD,YAAY,EAAE;AACrB,IAAA;AACF,EAAA;AAEAlF,EAAAA,eAAeA,GAAG;IAChB,MAAM;AAAEqE,MAAAA;KAAW,GAAG,IAAI,CAACpW,OAAO;;AAElC;IACA,IAAIoW,SAAS,KAAK,OAAO,EAAE;AACzB,MAAA,IAAI,CAACC,cAAc,CAACrD,OAAO,GAAIC,CAAC,IAAK;QACnCA,CAAC,CAACC,cAAc,EAAE;QAClBD,CAAC,CAAC6D,eAAe,EAAE;QACnB,IAAI,CAACM,cAAc,EAAE;MACvB,CAAC;AACH,IAAA,CAAC,MAAM,IAAIhB,SAAS,KAAK,OAAO,EAAE;MAChC,IAAI,CAACC,cAAc,CAACgB,YAAY,GAAG,MAAM,IAAI,CAACJ,YAAY,EAAE;AAC5D,MAAA,IAAI,CAACZ,cAAc,CAACiB,YAAY,GAAG,MAAM;AACvC;AACAhF,QAAAA,UAAU,CAAC,MAAM;UACf,IAAI,CAAC,IAAI,CAACgE,cAAc,CAACiB,OAAO,CAAC,QAAQ,CAAC,EAAE;YAC1C,IAAI,CAACL,YAAY,EAAE;AACrB,UAAA;QACF,CAAC,EAAE,GAAG,CAAC;MACT,CAAC;MACD,IAAI,CAACZ,cAAc,CAACgB,YAAY,GAAG,MAAM,IAAI,CAACJ,YAAY,EAAE;AAC9D,IAAA;;AAEA;IACA,IAAI,CAAC1F,cAAc,GAAG,MAAM;MAC1B,IAAI,CAACiF,gBAAgB,EAAE;MACvB,IAAI,CAAC3E,gBAAgB,EAAE;IACzB,CAAC;IACD,IAAI,CAACL,cAAc,GAAG,MAAM;MAC1B,IAAI,CAACgF,gBAAgB,EAAE;MACvB,IAAI,CAAC3E,gBAAgB,EAAE;IACzB,CAAC;IAEDxQ,MAAM,CAAC6C,gBAAgB,CAAC,QAAQ,EAAE,IAAI,CAACqN,cAAc,CAAC;IACtDlQ,MAAM,CAAC6C,gBAAgB,CAAC,QAAQ,EAAE,IAAI,CAACsN,cAAc,EAAE,IAAI,CAAC;;AAE5D;AACA,IAAA,IAAI,CAAC+F,oBAAoB,GAAIvE,CAAC,IAAK;MACjC,IACE,IAAI,CAACsD,gBAAgB,IACrB,CAAC,IAAI,CAACD,cAAc,CAACmB,QAAQ,CAACxE,CAAC,CAAC4C,MAAM,CAAC,IACvC,CAAC,IAAI,CAACQ,cAAc,CAACoB,QAAQ,CAACxE,CAAC,CAAC4C,MAAM,CAAC,EACvC;QACA,IAAI,CAACqB,YAAY,EAAE;AACrB,MAAA;IACF,CAAC;IACDxV,QAAQ,CAACyC,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAACqT,oBAAoB,CAAC;;AAE7D;AACA,IAAA,IAAI,CAACrC,WAAW,GAAIlC,CAAC,IAAK;AACxB,MAAA,IAAIA,CAAC,CAAClN,GAAG,KAAK,QAAQ,EAAE;QACtB,IAAI,IAAI,CAACwQ,gBAAgB,EAAE;UACzB,IAAI,CAACW,YAAY,EAAE;AACrB,QAAA,CAAC,MAAM;AACL,UAAA,IAAI,CAAClX,OAAO,CAACmR,OAAO,EAAE;AACxB,QAAA;AACF,MAAA;IACF,CAAC;IACDzP,QAAQ,CAACyC,gBAAgB,CAAC,SAAS,EAAE,IAAI,CAACgR,WAAW,CAAC;;AAEtD;AACA7C,IAAAA,UAAU,CAAC,MAAM;MACf,IAAI,CAAC2E,YAAY,EAAE;IACrB,CAAC,EAAE,GAAG,CAAC;AACT,EAAA;AAEA/E,EAAAA,gBAAgBA,GAAG;IACjB,IAAI,IAAI,CAACV,cAAc,EAAE;MACvBlQ,MAAM,CAAC8T,mBAAmB,CAAC,QAAQ,EAAE,IAAI,CAAC5D,cAAc,CAAC;AAC3D,IAAA;IACA,IAAI,IAAI,CAACC,cAAc,EAAE;MACvBnQ,MAAM,CAAC8T,mBAAmB,CAAC,QAAQ,EAAE,IAAI,CAAC3D,cAAc,EAAE,IAAI,CAAC;AACjE,IAAA;IACA,IAAI,IAAI,CAAC+F,oBAAoB,EAAE;MAC7B9V,QAAQ,CAAC0T,mBAAmB,CAAC,OAAO,EAAE,IAAI,CAACoC,oBAAoB,CAAC;AAClE,IAAA;IACA,IAAI,IAAI,CAACrC,WAAW,EAAE;MACpBzT,QAAQ,CAAC0T,mBAAmB,CAAC,SAAS,EAAE,IAAI,CAACD,WAAW,CAAC;AAC3D,IAAA;AACF,EAAA;AAEAnD,EAAAA,UAAUA,GAAG;AACXqD,IAAAA,qBAAqB,CAAC,MAAM;MAC1B,IAAI,CAACgB,cAAc,CAACjE,SAAS,CAACC,GAAG,CAAC,oBAAoB,CAAC;AACzD,IAAA,CAAC,CAAC;AACJ,EAAA;AACF;;ACxYA;AACA;AACA;AACA;;AAEO,MAAMqF,QAAQ,CAAC;EACpB3P,WAAWA,CAAC/H,OAAO,EAAE;IACnB,IAAI,CAACA,OAAO,GAAG;AACbiD,MAAAA,KAAK,EAAE,EAAE;AACTuN,MAAAA,OAAO,EAAE,EAAE;AACXvC,MAAAA,QAAQ,EAAE,OAAO;AAAE;AACnBnB,MAAAA,KAAK,EAAE,GAAG;AAAE;AACZ4D,MAAAA,KAAK,EAAE,IAAI;AACXC,MAAAA,OAAO,EAAE,IAAI;AACbC,MAAAA,SAAS,EAAE,CAAC;AACZC,MAAAA,UAAU,EAAE,CAAC;AACbC,MAAAA,cAAc,EAAE,KAAK;AACrBC,MAAAA,cAAc,EAAE,IAAI;AACpBC,MAAAA,MAAM,EAAEA,MAAM,CAAC,CAAC;AAChBC,MAAAA,MAAM,EAAEA,MAAM,CAAC,CAAC;AAChBC,MAAAA,MAAM,EAAEA,MAAM,CAAC,CAAC;AAChBC,MAAAA,OAAO,EAAEA,MAAM,CAAC,CAAC;AACjBC,MAAAA,KAAK,EAAE,OAAO;AACdC,MAAAA,YAAY,EAAE,IAAI;AAClBsG,MAAAA,WAAW,EAAE,IAAI;AACjBC,MAAAA,cAAc,EAAE,IAAI;MACpB,GAAG5X;KACJ;IAED,IAAI,CAACsR,OAAO,GAAG,IAAI;IACnB,IAAI,CAACuG,cAAc,GAAG,IAAI;IAC1B,IAAI,CAAC1C,WAAW,GAAG,IAAI;AACzB,EAAA;EAEAzD,MAAMA,CAACC,SAAS,EAAE;AAChB,IAAA,IAAI,IAAI,CAAC3R,OAAO,CAAC2X,WAAW,EAAE;MAC5B,IAAI,CAACG,cAAc,EAAE;AACrBnG,MAAAA,SAAS,CAACE,WAAW,CAAC,IAAI,CAACgG,cAAc,CAAC;AAC5C,IAAA;IAEA,IAAI,CAACE,eAAe,EAAE;AACtBpG,IAAAA,SAAS,CAACE,WAAW,CAAC,IAAI,CAACP,OAAO,CAAC;IAEnC,IAAI,CAACS,eAAe,EAAE;IACtB,IAAI,CAACC,UAAU,EAAE;AACnB,EAAA;AAEAC,EAAAA,OAAOA,GAAG;IACR,IAAI,CAACC,gBAAgB,EAAE;IAEvB,IAAI,IAAI,CAACZ,OAAO,EAAE;MAChB,IAAI,CAACA,OAAO,CAACc,SAAS,CAAC+E,MAAM,CAAC,qBAAqB,CAAC;MACpD,IAAI,CAAC7F,OAAO,CAACc,SAAS,CAACC,GAAG,CAAC,oBAAoB,CAAC;AAClD,IAAA;IACA,IAAI,IAAI,CAACwF,cAAc,EAAE;MACvB,IAAI,CAACA,cAAc,CAACzF,SAAS,CAAC+E,MAAM,CAAC,6BAA6B,CAAC;MACnE,IAAI,CAACU,cAAc,CAACzF,SAAS,CAACC,GAAG,CAAC,4BAA4B,CAAC;AACjE,IAAA;AAEAC,IAAAA,UAAU,CAAC,MAAM;MACf,IAAI,IAAI,CAAChB,OAAO,IAAI,IAAI,CAACA,OAAO,CAACa,UAAU,EAAE;QAC3C,IAAI,CAACb,OAAO,CAACa,UAAU,CAACI,WAAW,CAAC,IAAI,CAACjB,OAAO,CAAC;AACnD,MAAA;MACA,IAAI,IAAI,CAACuG,cAAc,IAAI,IAAI,CAACA,cAAc,CAAC1F,UAAU,EAAE;QACzD,IAAI,CAAC0F,cAAc,CAAC1F,UAAU,CAACI,WAAW,CAAC,IAAI,CAACsF,cAAc,CAAC;AACjE,MAAA;IACF,CAAC,EAAE,GAAG,CAAC;IAEP,IAAI,CAACvG,OAAO,GAAG,IAAI;IACnB,IAAI,CAACuG,cAAc,GAAG,IAAI;AAC5B,EAAA;AAEAC,EAAAA,cAAcA,GAAG;IACf,IAAI,CAACD,cAAc,GAAGnW,QAAQ,CAAC8Q,aAAa,CAAC,KAAK,CAAC;IACnD,IAAI,CAACqF,cAAc,CAACpF,SAAS,GAAG,CAAA,2CAAA,EAA8C,IAAI,CAACzS,OAAO,CAACoR,KAAK,CAAA,CAAE;AAElG,IAAA,IAAI,IAAI,CAACpR,OAAO,CAAC4X,cAAc,EAAE;AAC/B,MAAA,IAAI,CAACC,cAAc,CAAC7E,OAAO,GAAG,MAAM,IAAI,CAAChT,OAAO,CAACmR,OAAO,EAAE;AAC5D,IAAA;AACF,EAAA;AAEA4G,EAAAA,eAAeA,GAAG;IAChB,MAAM;MACJ9U,KAAK;MACLuN,OAAO;MACPvC,QAAQ;MACRnB,KAAK;MACL4D,KAAK;MACLC,OAAO;MACPC,SAAS;MACTC,UAAU;MACVC,cAAc;MACdC,cAAc;MACdK,KAAK;AACLC,MAAAA;KACD,GAAG,IAAI,CAACrR,OAAO;IAEhB,IAAI,CAACsR,OAAO,GAAG5P,QAAQ,CAAC8Q,aAAa,CAAC,KAAK,CAAC;IAC5C,IAAI,CAAClB,OAAO,CAACmB,SAAS,GAAG,CAAA,2BAAA,EAA8BxE,QAAQ,CAAA,eAAA,EAAkBmD,KAAK,CAAA,CAAE;IACxF,IAAI,CAACE,OAAO,CAACoB,KAAK,CAAC5F,KAAK,GAAG,CAAA,EAAGA,KAAK,CAAA,EAAA,CAAI;AAEvC,IAAA,IAAIuE,YAAY,EAAE;MAChB,IAAI,CAACC,OAAO,CAACoB,KAAK,CAACC,WAAW,CAAC,qBAAqB,EAAEtB,YAAY,CAAC;AACrE,IAAA;;AAEA;AACA,IAAA,MAAMgC,MAAM,GAAG3R,QAAQ,CAAC8Q,aAAa,CAAC,KAAK,CAAC;IAC5Ca,MAAM,CAACZ,SAAS,GAAG,sBAAsB;AAEzC,IAAA,IAAIxP,KAAK,EAAE;AACT,MAAA,MAAMqQ,OAAO,GAAG5R,QAAQ,CAAC8Q,aAAa,CAAC,IAAI,CAAC;MAC5Cc,OAAO,CAACb,SAAS,GAAG,qBAAqB;MACzCa,OAAO,CAACC,WAAW,GAAGtQ,KAAK;AAC3BoQ,MAAAA,MAAM,CAACxB,WAAW,CAACyB,OAAO,CAAC;AAC7B,IAAA;AAEA,IAAA,MAAMT,QAAQ,GAAGnR,QAAQ,CAAC8Q,aAAa,CAAC,QAAQ,CAAC;IACjDK,QAAQ,CAACJ,SAAS,GAAG,qBAAqB;IAC1CI,QAAQ,CAACC,SAAS,GAAG,SAAS;AAC9BD,IAAAA,QAAQ,CAACE,YAAY,CAAC,YAAY,EAAE,OAAO,CAAC;AAC5CF,IAAAA,QAAQ,CAACG,OAAO,GAAIC,CAAC,IAAK;MACxBA,CAAC,CAACC,cAAc,EAAE;AAClB,MAAA,IAAI,CAAClT,OAAO,CAACmR,OAAO,EAAE;IACxB,CAAC;AACDkC,IAAAA,MAAM,CAACxB,WAAW,CAACgB,QAAQ,CAAC;AAE5B,IAAA,IAAI,CAACvB,OAAO,CAACO,WAAW,CAACwB,MAAM,CAAC;;AAEhC;AACA,IAAA,MAAMlS,IAAI,GAAGO,QAAQ,CAAC8Q,aAAa,CAAC,KAAK,CAAC;IAC1CrR,IAAI,CAACsR,SAAS,GAAG,oBAAoB;;AAErC;AACA,IAAA,IAAI/B,KAAK,EAAE;AACT,MAAA,MAAMyC,OAAO,GAAG,IAAI,CAACC,YAAY,CAAC1C,KAAK,CAAC;AACxCvP,MAAAA,IAAI,CAAC0Q,WAAW,CAACsB,OAAO,CAAC;AAC3B,IAAA;;AAEA;AACA,IAAA,IAAI3C,OAAO,EAAE;AACX,MAAA,MAAMgD,SAAS,GAAG9R,QAAQ,CAAC8Q,aAAa,CAAC,KAAK,CAAC;MAC/CgB,SAAS,CAACf,SAAS,GAAG,uBAAuB;MAC7Ce,SAAS,CAACV,SAAS,GAAGtC,OAAO;AAC7BrP,MAAAA,IAAI,CAAC0Q,WAAW,CAAC2B,SAAS,CAAC;AAC7B,IAAA;AAEA,IAAA,IAAI,CAAClC,OAAO,CAACO,WAAW,CAAC1Q,IAAI,CAAC;;AAE9B;AACA,IAAA,MAAMsS,MAAM,GAAG/R,QAAQ,CAAC8Q,aAAa,CAAC,KAAK,CAAC;IAC5CiB,MAAM,CAAChB,SAAS,GAAG,sBAAsB;;AAEzC;IACA,IAAI5B,UAAU,GAAG,CAAC,EAAE;AAClB,MAAA,MAAM3K,QAAQ,GAAGxE,QAAQ,CAAC8Q,aAAa,CAAC,KAAK,CAAC;MAC9CtM,QAAQ,CAACuM,SAAS,GAAG,wBAAwB;AAE7C,MAAA,MAAMuF,WAAW,GAAGtW,QAAQ,CAAC8Q,aAAa,CAAC,KAAK,CAAC;MACjDwF,WAAW,CAACvF,SAAS,GAAG,4BAA4B;AAEpD,MAAA,MAAMwF,YAAY,GAAGvW,QAAQ,CAAC8Q,aAAa,CAAC,KAAK,CAAC;MAClDyF,YAAY,CAACxF,SAAS,GAAG,6BAA6B;AACtDwF,MAAAA,YAAY,CAACvF,KAAK,CAAC5F,KAAK,GAAG,CAAA,EAAI,CAAC8D,SAAS,GAAG,CAAC,IAAIC,UAAU,GAAI,GAAG,CAAA,CAAA,CAAG;AAErEmH,MAAAA,WAAW,CAACnG,WAAW,CAACoG,YAAY,CAAC;AACrC/R,MAAAA,QAAQ,CAAC2L,WAAW,CAACmG,WAAW,CAAC;AAEjC,MAAA,MAAME,YAAY,GAAGxW,QAAQ,CAAC8Q,aAAa,CAAC,MAAM,CAAC;MACnD0F,YAAY,CAACzF,SAAS,GAAG,6BAA6B;MACtDyF,YAAY,CAAC3E,WAAW,GAAG,CAAA,KAAA,EAAQ3C,SAAS,GAAG,CAAC,CAAA,IAAA,EAAOC,UAAU,CAAA,CAAE;AACnE3K,MAAAA,QAAQ,CAAC2L,WAAW,CAACqG,YAAY,CAAC;AAElCzE,MAAAA,MAAM,CAAC5B,WAAW,CAAC3L,QAAQ,CAAC;AAC9B,IAAA;;AAEA;AACA,IAAA,MAAMwN,OAAO,GAAGhS,QAAQ,CAAC8Q,aAAa,CAAC,KAAK,CAAC;IAC7CkB,OAAO,CAACjB,SAAS,GAAG,uBAAuB;AAE3C,IAAA,IAAI9B,OAAO,EAAE;AACXA,MAAAA,OAAO,CAAC7K,OAAO,CAAE6N,GAAG,IAAK;AACvB,QAAA,MAAMC,MAAM,GAAGlS,QAAQ,CAAC8Q,aAAa,CAAC,QAAQ,CAAC;QAC/CoB,MAAM,CAACnB,SAAS,GAAG,CAAA,iBAAA,EAAoBkB,GAAG,CAACE,OAAO,IAAI,WAAW,CAAA,CAAE;AACnED,QAAAA,MAAM,CAACL,WAAW,GAAGI,GAAG,CAACG,IAAI;AAC7BF,QAAAA,MAAM,CAACZ,OAAO,GAAIC,CAAC,IAAK;UACtBA,CAAC,CAACC,cAAc,EAAE;AAClB,UAAA,IAAIS,GAAG,CAACI,MAAM,KAAK,MAAM,EAAE,IAAI,CAAC/T,OAAO,CAACgR,MAAM,EAAE,CAAC,KAC5C,IAAI2C,GAAG,CAACI,MAAM,KAAK,MAAM,EAAE,IAAI,CAAC/T,OAAO,CAACiR,MAAM,EAAE,CAAC,KACjD,IAAI0C,GAAG,CAACI,MAAM,KAAK,MAAM,EAAE,IAAI,CAAC/T,OAAO,CAACkR,MAAM,EAAE,CAAC,KACjD,IAAIyC,GAAG,CAACI,MAAM,KAAK,OAAO,EAAE,IAAI,CAAC/T,OAAO,CAACmR,OAAO,EAAE,CAAC,KACnD,IAAIwC,GAAG,CAACK,OAAO,EAAEL,GAAG,CAACK,OAAO,EAAE;QACrC,CAAC;AACDN,QAAAA,OAAO,CAAC7B,WAAW,CAAC+B,MAAM,CAAC;AAC7B,MAAA,CAAC,CAAC;AACJ,IAAA,CAAC,MAAM;AACL,MAAA,IAAI7C,cAAc,IAAIH,SAAS,GAAGC,UAAU,GAAG,CAAC,EAAE;AAChD,QAAA,MAAMoD,OAAO,GAAGvS,QAAQ,CAAC8Q,aAAa,CAAC,QAAQ,CAAC;QAChDyB,OAAO,CAACxB,SAAS,GAAG,uBAAuB;QAC3CwB,OAAO,CAACV,WAAW,GAAG,WAAW;AACjCU,QAAAA,OAAO,CAACjB,OAAO,GAAIC,CAAC,IAAK;UACvBA,CAAC,CAACC,cAAc,EAAE;AAClB,UAAA,IAAI,CAAClT,OAAO,CAACkR,MAAM,EAAE;QACvB,CAAC;AACDwC,QAAAA,OAAO,CAAC7B,WAAW,CAACoC,OAAO,CAAC;AAC9B,MAAA;AAEA,MAAA,MAAMkE,WAAW,GAAGzW,QAAQ,CAAC8Q,aAAa,CAAC,KAAK,CAAC;MACjD2F,WAAW,CAAC1F,SAAS,GAAG,4BAA4B;AAEpD,MAAA,IAAI3B,cAAc,EAAE;AAClB,QAAA,MAAMoD,OAAO,GAAGxS,QAAQ,CAAC8Q,aAAa,CAAC,QAAQ,CAAC;QAChD0B,OAAO,CAACzB,SAAS,GAAG,4BAA4B;QAChDyB,OAAO,CAACX,WAAW,GAAG,MAAM;AAC5BW,QAAAA,OAAO,CAAClB,OAAO,GAAIC,CAAC,IAAK;UACvBA,CAAC,CAACC,cAAc,EAAE;AAClB,UAAA,IAAI,CAAClT,OAAO,CAACiR,MAAM,EAAE;QACvB,CAAC;AACDkH,QAAAA,WAAW,CAACtG,WAAW,CAACqC,OAAO,CAAC;AAClC,MAAA;AAEA,MAAA,MAAMC,OAAO,GAAGzS,QAAQ,CAAC8Q,aAAa,CAAC,QAAQ,CAAC;MAChD2B,OAAO,CAAC1B,SAAS,GAAG,0BAA0B;MAC9C0B,OAAO,CAACZ,WAAW,GAAG3C,SAAS,IAAIC,UAAU,GAAG,CAAC,GAAG,QAAQ,GAAG,UAAU;AACzEsD,MAAAA,OAAO,CAACnB,OAAO,GAAIC,CAAC,IAAK;QACvBA,CAAC,CAACC,cAAc,EAAE;AAClB,QAAA,IAAI,CAAClT,OAAO,CAACgR,MAAM,EAAE;MACvB,CAAC;AACDmH,MAAAA,WAAW,CAACtG,WAAW,CAACsC,OAAO,CAAC;AAEhCT,MAAAA,OAAO,CAAC7B,WAAW,CAACsG,WAAW,CAAC;AAClC,IAAA;AAEA1E,IAAAA,MAAM,CAAC5B,WAAW,CAAC6B,OAAO,CAAC;AAC3B,IAAA,IAAI,CAACpC,OAAO,CAACO,WAAW,CAAC4B,MAAM,CAAC;AAClC,EAAA;EAEAL,YAAYA,CAAC1C,KAAK,EAAE;AAClB,IAAA,MAAMiB,SAAS,GAAGjQ,QAAQ,CAAC8Q,aAAa,CAAC,KAAK,CAAC;IAC/Cb,SAAS,CAACc,SAAS,GAAG,qBAAqB;AAE3C,IAAA,IAAI/B,KAAK,CAACrN,IAAI,KAAK,OAAO,EAAE;AAC1B,MAAA,MAAM+Q,GAAG,GAAG1S,QAAQ,CAAC8Q,aAAa,CAAC,KAAK,CAAC;AACzC4B,MAAAA,GAAG,CAACC,GAAG,GAAG3D,KAAK,CAAC2D,GAAG;AACnBD,MAAAA,GAAG,CAACE,GAAG,GAAG5D,KAAK,CAAC4D,GAAG,IAAI,EAAE;MACzBF,GAAG,CAAC3B,SAAS,GAAG,qBAAqB;AACrCd,MAAAA,SAAS,CAACE,WAAW,CAACuC,GAAG,CAAC;AAC5B,IAAA,CAAC,MAAM,IAAI1D,KAAK,CAACrN,IAAI,KAAK,OAAO,EAAE;AACjC,MAAA,MAAMkR,KAAK,GAAG7S,QAAQ,CAAC8Q,aAAa,CAAC,OAAO,CAAC;AAC7C+B,MAAAA,KAAK,CAACF,GAAG,GAAG3D,KAAK,CAAC2D,GAAG;MACrBE,KAAK,CAACC,QAAQ,GAAG,IAAI;AACrBD,MAAAA,KAAK,CAACE,QAAQ,GAAG/D,KAAK,CAAC+D,QAAQ,IAAI,KAAK;AACxCF,MAAAA,KAAK,CAACG,KAAK,GAAGhE,KAAK,CAACgE,KAAK,KAAK,KAAK;AACnCH,MAAAA,KAAK,CAACI,IAAI,GAAGjE,KAAK,CAACiE,IAAI,IAAI,KAAK;MAChCJ,KAAK,CAAC9B,SAAS,GAAG,qBAAqB;AACvCd,MAAAA,SAAS,CAACE,WAAW,CAAC0C,KAAK,CAAC;AAC9B,IAAA,CAAC,MAAM,IAAI7D,KAAK,CAACrN,IAAI,KAAK,OAAO,EAAE;AACjC,MAAA,MAAMuR,MAAM,GAAGlT,QAAQ,CAAC8Q,aAAa,CAAC,QAAQ,CAAC;AAC/CoC,MAAAA,MAAM,CAACP,GAAG,GAAG3D,KAAK,CAAC2D,GAAG;MACtBO,MAAM,CAACnC,SAAS,GAAG,qBAAqB;MACxCmC,MAAM,CAACC,eAAe,GAAG,IAAI;AAC7BlD,MAAAA,SAAS,CAACE,WAAW,CAAC+C,MAAM,CAAC;AAC/B,IAAA;AAEA,IAAA,OAAOjD,SAAS;AAClB,EAAA;AAEAI,EAAAA,eAAeA,GAAG;AAChB,IAAA,IAAI,CAACoD,WAAW,GAAIlC,CAAC,IAAK;AACxB,MAAA,IAAIA,CAAC,CAAClN,GAAG,KAAK,QAAQ,EAAE;AACtB,QAAA,IAAI,CAAC/F,OAAO,CAACmR,OAAO,EAAE;AACxB,MAAA,CAAC,MAAM,IAAI8B,CAAC,CAAClN,GAAG,KAAK,YAAY,IAAIkN,CAAC,CAAClN,GAAG,KAAK,OAAO,EAAE;AACtD,QAAA,IAAI,CAAC/F,OAAO,CAACgR,MAAM,EAAE;AACvB,MAAA,CAAC,MAAM,IAAIiC,CAAC,CAAClN,GAAG,KAAK,WAAW,EAAE;AAChC,QAAA,IAAI,CAAC/F,OAAO,CAACiR,MAAM,EAAE;AACvB,MAAA;IACF,CAAC;IACDvP,QAAQ,CAACyC,gBAAgB,CAAC,SAAS,EAAE,IAAI,CAACgR,WAAW,CAAC;AACxD,EAAA;AAEAjD,EAAAA,gBAAgBA,GAAG;IACjB,IAAI,IAAI,CAACiD,WAAW,EAAE;MACpBzT,QAAQ,CAAC0T,mBAAmB,CAAC,SAAS,EAAE,IAAI,CAACD,WAAW,CAAC;AAC3D,IAAA;AACF,EAAA;AAEAnD,EAAAA,UAAUA,GAAG;AACXqD,IAAAA,qBAAqB,CAAC,MAAM;MAC1B,IAAI,IAAI,CAACwC,cAAc,EAAE;QACvB,IAAI,CAACA,cAAc,CAACzF,SAAS,CAACC,GAAG,CAAC,6BAA6B,CAAC;AAClE,MAAA;MACA,IAAI,CAACf,OAAO,CAACc,SAAS,CAACC,GAAG,CAAC,qBAAqB,CAAC;AACnD,IAAA,CAAC,CAAC;AACJ,EAAA;AACF;;ACrSA;AACA;AACA;AACA;;AAEO,MAAM+F,OAAO,CAAC;EACnBrQ,WAAWA,CAAC/H,OAAO,EAAE;IACnB,IAAI,CAACA,OAAO,GAAG;AACbyQ,MAAAA,aAAa,EAAE,IAAI;AACnBuD,MAAAA,OAAO,EAAE,IAAI;AACb3F,MAAAA,OAAO,EAAE,CAAC;AAAE;AACZgK,MAAAA,OAAO,EAAE,GAAG;AACZjH,MAAAA,KAAK,EAAE,OAAO;AACdkH,MAAAA,YAAY,EAAE,CAAC;MACf,GAAGtY;KACJ;IAED,IAAI,CAACsR,OAAO,GAAG,IAAI;IACnB,IAAI,CAACiH,gBAAgB,GAAG,IAAI;IAC5B,IAAI,CAAC/G,cAAc,GAAG,IAAI;IAC1B,IAAI,CAACC,cAAc,GAAG,IAAI;AAC5B,EAAA;EAEAC,MAAMA,CAACC,SAAS,EAAE;IAChB,IAAI,CAACmG,cAAc,EAAE;AACrBnG,IAAAA,SAAS,CAACE,WAAW,CAAC,IAAI,CAACP,OAAO,CAAC;IAEnC,IAAI,CAACkH,gBAAgB,EAAE;IACvB,IAAI,CAACzG,eAAe,EAAE;IACtB,IAAI,CAACC,UAAU,EAAE;AACnB,EAAA;AAEAC,EAAAA,OAAOA,GAAG;IACR,IAAI,CAACC,gBAAgB,EAAE;IAEvB,IAAI,IAAI,CAACZ,OAAO,EAAE;MAChB,IAAI,CAACA,OAAO,CAACc,SAAS,CAAC+E,MAAM,CAAC,oBAAoB,CAAC;MACnD,IAAI,CAAC7F,OAAO,CAACc,SAAS,CAACC,GAAG,CAAC,mBAAmB,CAAC;AAE/CC,MAAAA,UAAU,CAAC,MAAM;QACf,IAAI,IAAI,CAAChB,OAAO,IAAI,IAAI,CAACA,OAAO,CAACa,UAAU,EAAE;UAC3C,IAAI,CAACb,OAAO,CAACa,UAAU,CAACI,WAAW,CAAC,IAAI,CAACjB,OAAO,CAAC;AACnD,QAAA;MACF,CAAC,EAAE,GAAG,CAAC;AACT,IAAA;IAEA,IAAI,CAACA,OAAO,GAAG,IAAI;IACnB,IAAI,CAACiH,gBAAgB,GAAG,IAAI;AAC9B,EAAA;AAEAT,EAAAA,cAAcA,GAAG;IACf,MAAM;MAAE1G,KAAK;MAAEiH,OAAO;AAAErE,MAAAA;KAAS,GAAG,IAAI,CAAChU,OAAO;;AAEhD;IACA,IAAI,CAACsR,OAAO,GAAG5P,QAAQ,CAAC8Q,aAAa,CAAC,KAAK,CAAC;AAC5C,IAAA,IAAI,CAAClB,OAAO,CAACmB,SAAS,GAAG,CAAA,yBAAA,EAA4BrB,KAAK,CAAA,CAAE;IAE5D,MAAMqH,GAAG,GAAG/W,QAAQ,CAACgX,eAAe,CAAC,4BAA4B,EAAE,KAAK,CAAC;AACzED,IAAAA,GAAG,CAAC1F,YAAY,CAAC,OAAO,EAAE,kBAAkB,CAAC;AAC7C0F,IAAAA,GAAG,CAAC1F,YAAY,CAAC,OAAO,EAAE,MAAM,CAAC;AACjC0F,IAAAA,GAAG,CAAC1F,YAAY,CAAC,QAAQ,EAAE,MAAM,CAAC;;AAElC;IACA,MAAM4F,IAAI,GAAGjX,QAAQ,CAACgX,eAAe,CAAC,4BAA4B,EAAE,MAAM,CAAC;IAE3E,MAAME,IAAI,GAAGlX,QAAQ,CAACgX,eAAe,CAAC,4BAA4B,EAAE,MAAM,CAAC;AAC3EE,IAAAA,IAAI,CAAC7F,YAAY,CAAC,IAAI,EAAE,oBAAoB,CAAC;;AAE7C;IACA,MAAM8F,QAAQ,GAAGnX,QAAQ,CAACgX,eAAe,CAAC,4BAA4B,EAAE,MAAM,CAAC;AAC/EG,IAAAA,QAAQ,CAAC9F,YAAY,CAAC,GAAG,EAAE,GAAG,CAAC;AAC/B8F,IAAAA,QAAQ,CAAC9F,YAAY,CAAC,GAAG,EAAE,GAAG,CAAC;AAC/B8F,IAAAA,QAAQ,CAAC9F,YAAY,CAAC,OAAO,EAAE,MAAM,CAAC;AACtC8F,IAAAA,QAAQ,CAAC9F,YAAY,CAAC,QAAQ,EAAE,MAAM,CAAC;AACvC8F,IAAAA,QAAQ,CAAC9F,YAAY,CAAC,MAAM,EAAE,OAAO,CAAC;AACtC6F,IAAAA,IAAI,CAAC/G,WAAW,CAACgH,QAAQ,CAAC;;AAE1B;IACA,IAAI,CAACN,gBAAgB,GAAG7W,QAAQ,CAACgX,eAAe,CAAC,4BAA4B,EAAE,MAAM,CAAC;IACtF,IAAI,CAACH,gBAAgB,CAACxF,YAAY,CAAC,OAAO,EAAE,wBAAwB,CAAC;IACrE,IAAI,CAACwF,gBAAgB,CAACxF,YAAY,CAAC,MAAM,EAAE,OAAO,CAAC;AACnD,IAAA,IAAI,CAACwF,gBAAgB,CAACxF,YAAY,CAAC,IAAI,EAAE,IAAI,CAAC/S,OAAO,CAACsY,YAAY,CAAC;AACnE,IAAA,IAAI,CAACC,gBAAgB,CAACxF,YAAY,CAAC,IAAI,EAAE,IAAI,CAAC/S,OAAO,CAACsY,YAAY,CAAC;AACnEM,IAAAA,IAAI,CAAC/G,WAAW,CAAC,IAAI,CAAC0G,gBAAgB,CAAC;AAEvCI,IAAAA,IAAI,CAAC9G,WAAW,CAAC+G,IAAI,CAAC;AACtBH,IAAAA,GAAG,CAAC5G,WAAW,CAAC8G,IAAI,CAAC;;AAErB;IACA,MAAMG,WAAW,GAAGpX,QAAQ,CAACgX,eAAe,CAAC,4BAA4B,EAAE,MAAM,CAAC;AAClFI,IAAAA,WAAW,CAAC/F,YAAY,CAAC,GAAG,EAAE,GAAG,CAAC;AAClC+F,IAAAA,WAAW,CAAC/F,YAAY,CAAC,GAAG,EAAE,GAAG,CAAC;AAClC+F,IAAAA,WAAW,CAAC/F,YAAY,CAAC,OAAO,EAAE,MAAM,CAAC;AACzC+F,IAAAA,WAAW,CAAC/F,YAAY,CAAC,QAAQ,EAAE,MAAM,CAAC;AAC1C+F,IAAAA,WAAW,CAAC/F,YAAY,CAAC,MAAM,EAAE3B,KAAK,KAAK,MAAM,GAAG,0BAA0B,GAAG,CAAA,cAAA,EAAiBiH,OAAO,GAAG,CAAC;AAC7GS,IAAAA,WAAW,CAAC/F,YAAY,CAAC,MAAM,EAAE,0BAA0B,CAAC;AAC5D0F,IAAAA,GAAG,CAAC5G,WAAW,CAACiH,WAAW,CAAC;AAE5B,IAAA,IAAI,CAACxH,OAAO,CAACO,WAAW,CAAC4G,GAAG,CAAC;;AAE7B;AACA,IAAA,IAAIzE,OAAO,EAAE;AACX,MAAA,IAAI,CAAC1C,OAAO,CAAC0B,OAAO,GAAIC,CAAC,IAAK;QAC5B,IAAIA,CAAC,CAAC4C,MAAM,KAAK,IAAI,CAACvE,OAAO,IAAI2B,CAAC,CAAC4C,MAAM,CAACkD,OAAO,KAAK,KAAK,IAAI9F,CAAC,CAAC4C,MAAM,CAACkD,OAAO,KAAK,MAAM,EAAE;AAC1F/E,UAAAA,OAAO,EAAE;AACX,QAAA;MACF,CAAC;AACH,IAAA;AACF,EAAA;AAEAwE,EAAAA,gBAAgBA,GAAG;IACjB,MAAM;MAAE/H,aAAa;AAAEpC,MAAAA;KAAS,GAAG,IAAI,CAACrO,OAAO;AAE/C,IAAA,IAAI,CAACyQ,aAAa,IAAI,CAAC,IAAI,CAAC8H,gBAAgB,EAAE;AAC5C;MACA,IAAI,CAACA,gBAAgB,CAACxF,YAAY,CAAC,OAAO,EAAE,GAAG,CAAC;MAChD,IAAI,CAACwF,gBAAgB,CAACxF,YAAY,CAAC,QAAQ,EAAE,GAAG,CAAC;AACjD,MAAA;AACF,IAAA;AAEA,IAAA,MAAMiG,IAAI,GAAGvI,aAAa,CAACuE,qBAAqB,EAAE;AAElD,IAAA,IAAI,CAACuD,gBAAgB,CAACxF,YAAY,CAAC,GAAG,EAAEiG,IAAI,CAACvL,IAAI,GAAGY,OAAO,CAAC;AAC5D,IAAA,IAAI,CAACkK,gBAAgB,CAACxF,YAAY,CAAC,GAAG,EAAEiG,IAAI,CAACxL,GAAG,GAAGa,OAAO,CAAC;AAC3D,IAAA,IAAI,CAACkK,gBAAgB,CAACxF,YAAY,CAAC,OAAO,EAAEiG,IAAI,CAAClM,KAAK,GAAGuB,OAAO,GAAG,CAAC,CAAC;AACrE,IAAA,IAAI,CAACkK,gBAAgB,CAACxF,YAAY,CAAC,QAAQ,EAAEiG,IAAI,CAAChM,MAAM,GAAGqB,OAAO,GAAG,CAAC,CAAC;AACzE,EAAA;AAEA0D,EAAAA,eAAeA,GAAG;IAChB,IAAI,CAACP,cAAc,GAAG,MAAM,IAAI,CAACgH,gBAAgB,EAAE;IACnD,IAAI,CAAC/G,cAAc,GAAG,MAAM,IAAI,CAAC+G,gBAAgB,EAAE;IAEnDlX,MAAM,CAAC6C,gBAAgB,CAAC,QAAQ,EAAE,IAAI,CAACqN,cAAc,CAAC;IACtDlQ,MAAM,CAAC6C,gBAAgB,CAAC,QAAQ,EAAE,IAAI,CAACsN,cAAc,EAAE,IAAI,CAAC;AAC9D,EAAA;AAEAS,EAAAA,gBAAgBA,GAAG;IACjB,IAAI,IAAI,CAACV,cAAc,EAAE;MACvBlQ,MAAM,CAAC8T,mBAAmB,CAAC,QAAQ,EAAE,IAAI,CAAC5D,cAAc,CAAC;AAC3D,IAAA;IACA,IAAI,IAAI,CAACC,cAAc,EAAE;MACvBnQ,MAAM,CAAC8T,mBAAmB,CAAC,QAAQ,EAAE,IAAI,CAAC3D,cAAc,EAAE,IAAI,CAAC;AACjE,IAAA;AACF,EAAA;AAEAO,EAAAA,UAAUA,GAAG;AACXqD,IAAAA,qBAAqB,CAAC,MAAM;MAC1B,IAAI,CAAC/D,OAAO,CAACc,SAAS,CAACC,GAAG,CAAC,oBAAoB,CAAC;AAClD,IAAA,CAAC,CAAC;AACJ,EAAA;AACF;;AAEA;AACA;AACA;AACO,MAAM4G,SAAS,CAAC;EACrBlR,WAAWA,CAAC/H,OAAO,EAAE;IACnB,IAAI,CAACA,OAAO,GAAG;AACbyQ,MAAAA,aAAa,EAAE,IAAI;AACnByF,MAAAA,KAAK,EAAE,SAAS;AAChBgD,MAAAA,WAAW,EAAE,CAAC;AACd7K,MAAAA,OAAO,EAAE,CAAC;AACViK,MAAAA,YAAY,EAAE,CAAC;AACfnC,MAAAA,KAAK,EAAE,KAAK;MACZ,GAAGnW;KACJ;IAED,IAAI,CAACsR,OAAO,GAAG,IAAI;IACnB,IAAI,CAACE,cAAc,GAAG,IAAI;IAC1B,IAAI,CAACC,cAAc,GAAG,IAAI;AAC5B,EAAA;EAEAC,MAAMA,CAACC,SAAS,EAAE;IAChB,IAAI,CAACwH,gBAAgB,EAAE;AACvBxH,IAAAA,SAAS,CAACE,WAAW,CAAC,IAAI,CAACP,OAAO,CAAC;IAEnC,IAAI,CAAC8H,eAAe,EAAE;IACtB,IAAI,CAACrH,eAAe,EAAE;IACtB,IAAI,CAACC,UAAU,EAAE;AACnB,EAAA;AAEAC,EAAAA,OAAOA,GAAG;IACR,IAAI,CAACC,gBAAgB,EAAE;IAEvB,IAAI,IAAI,CAACZ,OAAO,IAAI,IAAI,CAACA,OAAO,CAACa,UAAU,EAAE;MAC3C,IAAI,CAACb,OAAO,CAACa,UAAU,CAACI,WAAW,CAAC,IAAI,CAACjB,OAAO,CAAC;AACnD,IAAA;IAEA,IAAI,CAACA,OAAO,GAAG,IAAI;AACrB,EAAA;AAEA6H,EAAAA,gBAAgBA,GAAG;IACjB,MAAM;MAAEjD,KAAK;MAAEgD,WAAW;MAAEZ,YAAY;AAAEnC,MAAAA;KAAO,GAAG,IAAI,CAACnW,OAAO;IAEhE,IAAI,CAACsR,OAAO,GAAG5P,QAAQ,CAAC8Q,aAAa,CAAC,KAAK,CAAC;AAC5C,IAAA,IAAI,CAAClB,OAAO,CAACmB,SAAS,GAAG,eAAe;AAExC,IAAA,IAAI0D,KAAK,EAAE;MACT,IAAI,CAAC7E,OAAO,CAACc,SAAS,CAACC,GAAG,CAAC,sBAAsB,CAAC;AACpD,IAAA;IAEA,IAAI,CAACf,OAAO,CAACoB,KAAK,CAAC2G,MAAM,GAAG,CAAA,EAAGH,WAAW,CAAA,SAAA,EAAYhD,KAAK,CAAA,CAAE;IAC7D,IAAI,CAAC5E,OAAO,CAACoB,KAAK,CAAC4F,YAAY,GAAG,CAAA,EAAGA,YAAY,CAAA,EAAA,CAAI;IACrD,IAAI,CAAChH,OAAO,CAACoB,KAAK,CAAC4G,SAAS,GAAG,CAAA,UAAA,EAAapD,KAAK,CAAA,EAAA,CAAI;AACvD,EAAA;AAEAkD,EAAAA,eAAeA,GAAG;IAChB,MAAM;MAAE3I,aAAa;MAAEpC,OAAO;AAAE6K,MAAAA;KAAa,GAAG,IAAI,CAAClZ,OAAO;IAE5D,IAAI,CAACyQ,aAAa,EAAE;AAEpB,IAAA,MAAMuI,IAAI,GAAGvI,aAAa,CAACuE,qBAAqB,EAAE;AAElD,IAAA,IAAI,CAAC1D,OAAO,CAACoB,KAAK,CAACzE,QAAQ,GAAG,OAAO;AACrC,IAAA,IAAI,CAACqD,OAAO,CAACoB,KAAK,CAAClF,GAAG,GAAG,CAAA,EAAGwL,IAAI,CAACxL,GAAG,GAAGa,OAAO,GAAG6K,WAAW,CAAA,EAAA,CAAI;AAChE,IAAA,IAAI,CAAC5H,OAAO,CAACoB,KAAK,CAACjF,IAAI,GAAG,CAAA,EAAGuL,IAAI,CAACvL,IAAI,GAAGY,OAAO,GAAG6K,WAAW,CAAA,EAAA,CAAI;AAClE,IAAA,IAAI,CAAC5H,OAAO,CAACoB,KAAK,CAAC5F,KAAK,GAAG,CAAA,EAAGkM,IAAI,CAAClM,KAAK,GAAGuB,OAAO,GAAG,CAAC,CAAA,EAAA,CAAI;AAC1D,IAAA,IAAI,CAACiD,OAAO,CAACoB,KAAK,CAAC1F,MAAM,GAAG,CAAA,EAAGgM,IAAI,CAAChM,MAAM,GAAGqB,OAAO,GAAG,CAAC,CAAA,EAAA,CAAI;AAC9D,EAAA;AAEA0D,EAAAA,eAAeA,GAAG;IAChB,IAAI,CAACP,cAAc,GAAG,MAAM,IAAI,CAAC4H,eAAe,EAAE;IAClD,IAAI,CAAC3H,cAAc,GAAG,MAAM,IAAI,CAAC2H,eAAe,EAAE;IAElD9X,MAAM,CAAC6C,gBAAgB,CAAC,QAAQ,EAAE,IAAI,CAACqN,cAAc,CAAC;IACtDlQ,MAAM,CAAC6C,gBAAgB,CAAC,QAAQ,EAAE,IAAI,CAACsN,cAAc,EAAE,IAAI,CAAC;AAC9D,EAAA;AAEAS,EAAAA,gBAAgBA,GAAG;IACjB,IAAI,IAAI,CAACV,cAAc,EAAE;MACvBlQ,MAAM,CAAC8T,mBAAmB,CAAC,QAAQ,EAAE,IAAI,CAAC5D,cAAc,CAAC;AAC3D,IAAA;IACA,IAAI,IAAI,CAACC,cAAc,EAAE;MACvBnQ,MAAM,CAAC8T,mBAAmB,CAAC,QAAQ,EAAE,IAAI,CAAC3D,cAAc,EAAE,IAAI,CAAC;AACjE,IAAA;AACF,EAAA;AAEAO,EAAAA,UAAUA,GAAG;AACXqD,IAAAA,qBAAqB,CAAC,MAAM;MAC1B,IAAI,CAAC/D,OAAO,CAACc,SAAS,CAACC,GAAG,CAAC,sBAAsB,CAAC;AACpD,IAAA,CAAC,CAAC;AACJ,EAAA;AACF;;AClPA;AACA;AACA;AACA;;AAEO,MAAMkH,WAAW,CAAC;EACvBxR,WAAWA,CAAC/H,OAAO,EAAE;IACnB,IAAI,CAACA,OAAO,GAAG;AACbwZ,MAAAA,OAAO,EAAE,CAAC;AACVC,MAAAA,KAAK,EAAE,CAAC;AACRrI,MAAAA,KAAK,EAAE,OAAO;AACdnD,MAAAA,QAAQ,EAAE,QAAQ;AAAE;AACpByL,MAAAA,eAAe,EAAE,IAAI;AACrBrI,MAAAA,YAAY,EAAE,IAAI;MAClB,GAAGrR;KACJ;IAED,IAAI,CAACsR,OAAO,GAAG,IAAI;AACrB,EAAA;EAEAI,MAAMA,CAACC,SAAS,EAAE;IAChB,IAAI,CAACgI,kBAAkB,EAAE;AACzBhI,IAAAA,SAAS,CAACE,WAAW,CAAC,IAAI,CAACP,OAAO,CAAC;IACnC,IAAI,CAACU,UAAU,EAAE;AACnB,EAAA;AAEAC,EAAAA,OAAOA,GAAG;IACR,IAAI,IAAI,CAACX,OAAO,EAAE;MAChB,IAAI,CAACA,OAAO,CAACc,SAAS,CAAC+E,MAAM,CAAC,yBAAyB,CAAC;MACxD,IAAI,CAAC7F,OAAO,CAACc,SAAS,CAACC,GAAG,CAAC,wBAAwB,CAAC;AAEpDC,MAAAA,UAAU,CAAC,MAAM;QACf,IAAI,IAAI,CAAChB,OAAO,IAAI,IAAI,CAACA,OAAO,CAACa,UAAU,EAAE;UAC3C,IAAI,CAACb,OAAO,CAACa,UAAU,CAACI,WAAW,CAAC,IAAI,CAACjB,OAAO,CAAC;AACnD,QAAA;MACF,CAAC,EAAE,GAAG,CAAC;AACT,IAAA;IAEA,IAAI,CAACA,OAAO,GAAG,IAAI;AACrB,EAAA;EAEAsI,MAAMA,CAACJ,OAAO,EAAE;AACd,IAAA,IAAI,CAACxZ,OAAO,CAACwZ,OAAO,GAAGA,OAAO;IAC9B,IAAI,CAACK,eAAe,EAAE;AACxB,EAAA;AAEAF,EAAAA,kBAAkBA,GAAG;IACnB,MAAM;MAAEH,OAAO;MAAEC,KAAK;MAAErI,KAAK;MAAEnD,QAAQ;MAAEyL,eAAe;AAAErI,MAAAA;KAAc,GAAG,IAAI,CAACrR,OAAO;IAEvF,IAAI,CAACsR,OAAO,GAAG5P,QAAQ,CAAC8Q,aAAa,CAAC,KAAK,CAAC;IAC5C,IAAI,CAAClB,OAAO,CAACmB,SAAS,GAAG,CAAA,mCAAA,EAAsCxE,QAAQ,CAAA,mBAAA,EAAsBmD,KAAK,CAAA,CAAE;AAEpG,IAAA,IAAIC,YAAY,EAAE;MAChB,IAAI,CAACC,OAAO,CAACoB,KAAK,CAACC,WAAW,CAAC,qBAAqB,EAAEtB,YAAY,CAAC;AACrE,IAAA;;AAEA;AACA,IAAA,MAAMyI,KAAK,GAAGpY,QAAQ,CAAC8Q,aAAa,CAAC,KAAK,CAAC;IAC3CsH,KAAK,CAACrH,SAAS,GAAG,yBAAyB;;AAE3C;IACA,KAAK,IAAIqD,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG2D,KAAK,EAAE3D,CAAC,EAAE,EAAE;AAC9B,MAAA,MAAMiE,IAAI,GAAGrY,QAAQ,CAAC8Q,aAAa,CAAC,KAAK,CAAC;MAC1CuH,IAAI,CAACtH,SAAS,GAAG,wBAAwB;MAEzC,IAAIqD,CAAC,GAAG0D,OAAO,EAAE;AACfO,QAAAA,IAAI,CAAC3H,SAAS,CAACC,GAAG,CAAC,mCAAmC,CAAC;AACzD,MAAA,CAAC,MAAM,IAAIyD,CAAC,KAAK0D,OAAO,EAAE;AACxBO,QAAAA,IAAI,CAAC3H,SAAS,CAACC,GAAG,CAAC,gCAAgC,CAAC;AACtD,MAAA;;AAEA;AACA,MAAA,IAAIyD,CAAC,GAAG2D,KAAK,GAAG,CAAC,EAAE;AACjB,QAAA,MAAMO,SAAS,GAAGtY,QAAQ,CAAC8Q,aAAa,CAAC,KAAK,CAAC;QAC/CwH,SAAS,CAACvH,SAAS,GAAG,6BAA6B;QAEnD,IAAIqD,CAAC,GAAG0D,OAAO,EAAE;AACfQ,UAAAA,SAAS,CAAC5H,SAAS,CAACC,GAAG,CAAC,wCAAwC,CAAC;AACnE,QAAA;AAEA0H,QAAAA,IAAI,CAAClI,WAAW,CAACmI,SAAS,CAAC;AAC7B,MAAA;;AAEA;AACA,MAAA,MAAMjE,GAAG,GAAGrU,QAAQ,CAAC8Q,aAAa,CAAC,KAAK,CAAC;MACzCuD,GAAG,CAACtD,SAAS,GAAG,uBAAuB;AAEvC,MAAA,IAAIiH,eAAe,EAAE;AACnB3D,QAAAA,GAAG,CAACxC,WAAW,GAAGuC,CAAC,GAAG,CAAC;AACzB,MAAA;AAEAiE,MAAAA,IAAI,CAAClI,WAAW,CAACkE,GAAG,CAAC;AACrB+D,MAAAA,KAAK,CAACjI,WAAW,CAACkI,IAAI,CAAC;AACzB,IAAA;AAEA,IAAA,IAAI,CAACzI,OAAO,CAACO,WAAW,CAACiI,KAAK,CAAC;;AAE/B;AACA,IAAA,MAAMhG,IAAI,GAAGpS,QAAQ,CAAC8Q,aAAa,CAAC,KAAK,CAAC;IAC1CsB,IAAI,CAACrB,SAAS,GAAG,wBAAwB;IACzCqB,IAAI,CAACP,WAAW,GAAG,CAAA,KAAA,EAAQiG,OAAO,GAAG,CAAC,CAAA,IAAA,EAAOC,KAAK,CAAA,CAAE;AACpD,IAAA,IAAI,CAACnI,OAAO,CAACO,WAAW,CAACiC,IAAI,CAAC;AAChC,EAAA;AAEA+F,EAAAA,eAAeA,GAAG;IAChB,MAAM;MAAEL,OAAO;AAAEC,MAAAA;KAAO,GAAG,IAAI,CAACzZ,OAAO;;AAEvC;IACA,MAAMia,KAAK,GAAG,IAAI,CAAC3I,OAAO,CAAC4I,gBAAgB,CAAC,yBAAyB,CAAC;AACtED,IAAAA,KAAK,CAACnU,OAAO,CAAC,CAACiU,IAAI,EAAEjE,CAAC,KAAK;MACzBiE,IAAI,CAAC3H,SAAS,CAAC+E,MAAM,CAAC,mCAAmC,EAAE,gCAAgC,CAAC;MAE5F,IAAIrB,CAAC,GAAG0D,OAAO,EAAE;AACfO,QAAAA,IAAI,CAAC3H,SAAS,CAACC,GAAG,CAAC,mCAAmC,CAAC;AACzD,MAAA,CAAC,MAAM,IAAIyD,CAAC,KAAK0D,OAAO,EAAE;AACxBO,QAAAA,IAAI,CAAC3H,SAAS,CAACC,GAAG,CAAC,gCAAgC,CAAC;AACtD,MAAA;AACF,IAAA,CAAC,CAAC;;AAEF;IACA,MAAM8H,UAAU,GAAG,IAAI,CAAC7I,OAAO,CAAC4I,gBAAgB,CAAC,8BAA8B,CAAC;AAChFC,IAAAA,UAAU,CAACrU,OAAO,CAAC,CAACkU,SAAS,EAAElE,CAAC,KAAK;MACnCkE,SAAS,CAAC5H,SAAS,CAACgI,MAAM,CAAC,wCAAwC,EAAEtE,CAAC,GAAG0D,OAAO,CAAC;AACnF,IAAA,CAAC,CAAC;;AAEF;IACA,MAAM1F,IAAI,GAAG,IAAI,CAACxC,OAAO,CAAC0F,aAAa,CAAC,yBAAyB,CAAC;AAClE,IAAA,IAAIlD,IAAI,EAAE;MACRA,IAAI,CAACP,WAAW,GAAG,CAAA,KAAA,EAAQiG,OAAO,GAAG,CAAC,CAAA,IAAA,EAAOC,KAAK,CAAA,CAAE;AACtD,IAAA;AACF,EAAA;AAEAzH,EAAAA,UAAUA,GAAG;AACXqD,IAAAA,qBAAqB,CAAC,MAAM;MAC1B,IAAI,CAAC/D,OAAO,CAACc,SAAS,CAACC,GAAG,CAAC,yBAAyB,CAAC;AACvD,IAAA,CAAC,CAAC;AACJ,EAAA;AACF;;AAEA;AACA;AACA;AACO,MAAMgI,YAAY,CAAC;EACxBtS,WAAWA,CAAC/H,OAAO,EAAE;IACnB,IAAI,CAACA,OAAO,GAAG;AACbwZ,MAAAA,OAAO,EAAE,CAAC;AACVC,MAAAA,KAAK,EAAE,CAAC;AACRrI,MAAAA,KAAK,EAAE,OAAO;AACdC,MAAAA,YAAY,EAAE,IAAI;MAClB,GAAGrR;KACJ;IAED,IAAI,CAACsR,OAAO,GAAG,IAAI;AACrB,EAAA;EAEAI,MAAMA,CAACC,SAAS,EAAE;IAChB,IAAI,CAAC2I,WAAW,EAAE;AAClB3I,IAAAA,SAAS,CAACE,WAAW,CAAC,IAAI,CAACP,OAAO,CAAC;AACrC,EAAA;AAEAW,EAAAA,OAAOA,GAAG;IACR,IAAI,IAAI,CAACX,OAAO,IAAI,IAAI,CAACA,OAAO,CAACa,UAAU,EAAE;MAC3C,IAAI,CAACb,OAAO,CAACa,UAAU,CAACI,WAAW,CAAC,IAAI,CAACjB,OAAO,CAAC;AACnD,IAAA;IACA,IAAI,CAACA,OAAO,GAAG,IAAI;AACrB,EAAA;EAEAsI,MAAMA,CAACJ,OAAO,EAAE;AACd,IAAA,IAAI,CAACxZ,OAAO,CAACwZ,OAAO,GAAGA,OAAO;IAC9B,IAAI,CAACe,WAAW,EAAE;AACpB,EAAA;AAEAD,EAAAA,WAAWA,GAAG;IACZ,MAAM;MAAEd,OAAO;MAAEC,KAAK;MAAErI,KAAK;AAAEC,MAAAA;KAAc,GAAG,IAAI,CAACrR,OAAO;IAE5D,IAAI,CAACsR,OAAO,GAAG5P,QAAQ,CAAC8Q,aAAa,CAAC,KAAK,CAAC;AAC5C,IAAA,IAAI,CAAClB,OAAO,CAACmB,SAAS,GAAG,CAAA,qCAAA,EAAwCrB,KAAK,CAAA,CAAE;AAExE,IAAA,IAAIC,YAAY,EAAE;MAChB,IAAI,CAACC,OAAO,CAACoB,KAAK,CAACC,WAAW,CAAC,qBAAqB,EAAEtB,YAAY,CAAC;AACrE,IAAA;IAEA,KAAK,IAAIyE,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG2D,KAAK,EAAE3D,CAAC,EAAE,EAAE;AAC9B,MAAA,MAAMC,GAAG,GAAGrU,QAAQ,CAAC8Q,aAAa,CAAC,KAAK,CAAC;MACzCuD,GAAG,CAACtD,SAAS,GAAG,wBAAwB;MAExC,IAAIqD,CAAC,GAAG0D,OAAO,EAAE;AACfzD,QAAAA,GAAG,CAAC3D,SAAS,CAACC,GAAG,CAAC,mCAAmC,CAAC;AACxD,MAAA,CAAC,MAAM,IAAIyD,CAAC,KAAK0D,OAAO,EAAE;AACxBzD,QAAAA,GAAG,CAAC3D,SAAS,CAACC,GAAG,CAAC,gCAAgC,CAAC;AACrD,MAAA;AAEA,MAAA,IAAI,CAACf,OAAO,CAACO,WAAW,CAACkE,GAAG,CAAC;AAC/B,IAAA;AACF,EAAA;AAEAwE,EAAAA,WAAWA,GAAG;IACZ,MAAM;AAAEf,MAAAA;KAAS,GAAG,IAAI,CAACxZ,OAAO;IAEhC,MAAMwa,IAAI,GAAG,IAAI,CAAClJ,OAAO,CAAC4I,gBAAgB,CAAC,yBAAyB,CAAC;AACrEM,IAAAA,IAAI,CAAC1U,OAAO,CAAC,CAACiQ,GAAG,EAAED,CAAC,KAAK;MACvBC,GAAG,CAAC3D,SAAS,CAAC+E,MAAM,CAAC,mCAAmC,EAAE,gCAAgC,CAAC;MAE3F,IAAIrB,CAAC,GAAG0D,OAAO,EAAE;AACfzD,QAAAA,GAAG,CAAC3D,SAAS,CAACC,GAAG,CAAC,mCAAmC,CAAC;AACxD,MAAA,CAAC,MAAM,IAAIyD,CAAC,KAAK0D,OAAO,EAAE;AACxBzD,QAAAA,GAAG,CAAC3D,SAAS,CAACC,GAAG,CAAC,gCAAgC,CAAC;AACrD,MAAA;AACF,IAAA,CAAC,CAAC;AACJ,EAAA;AACF;;AClNA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACO,SAASoI,WAAWA,CAACC,QAAQ,EAAE;AACpC,EAAA,IAAI,CAACA,QAAQ,EAAE,OAAO,IAAI;EAE1B,IAAI;AACF;AACA,IAAA,IAAIA,QAAQ,CAAC1U,UAAU,CAAC,YAAY,CAAC,EAAE;MACrC,MAAMiF,KAAK,GAAGyP,QAAQ,CAACvU,OAAO,CAAC,YAAY,EAAE,EAAE,CAAC;AAChD,MAAA,OAAOzE,QAAQ,CAACsV,aAAa,CAAC,CAAA,YAAA,EAAe/L,KAAK,IAAI,CAAC;AACzD,IAAA;AAEA,IAAA,IAAIyP,QAAQ,CAAC1U,UAAU,CAAC,eAAe,CAAC,EAAE;MACxC,MAAMiF,KAAK,GAAGyP,QAAQ,CAACvU,OAAO,CAAC,eAAe,EAAE,EAAE,CAAC;AACnD,MAAA,OAAOzE,QAAQ,CAACsV,aAAa,CAAC,CAAA,eAAA,EAAkB/L,KAAK,IAAI,CAAC;AAC5D,IAAA;AAEA,IAAA,OAAOvJ,QAAQ,CAACsV,aAAa,CAAC0D,QAAQ,CAAC;EACzC,CAAC,CAAC,OAAO7Z,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,6BAA6B,EAAE6Z,QAAQ,EAAE7Z,KAAK,CAAC;AAC7D,IAAA,OAAO,IAAI;AACb,EAAA;AACF;;AAEA;AACA;AACA;AACA;AACA;AACO,SAAS8Z,gBAAgBA,CAACrJ,OAAO,EAAE;AACxC,EAAA,IAAI,CAACA,OAAO,EAAE,OAAO,KAAK;AAE1B,EAAA,MAAM0H,IAAI,GAAG1H,OAAO,CAAC0D,qBAAqB,EAAE;AAC5C,EAAA,MAAMtC,KAAK,GAAGpR,MAAM,CAACsZ,gBAAgB,CAACtJ,OAAO,CAAC;;AAE9C;AACA,EAAA,IAAI0H,IAAI,CAAClM,KAAK,KAAK,CAAC,IAAIkM,IAAI,CAAChM,MAAM,KAAK,CAAC,EAAE,OAAO,KAAK;;AAEvD;AACA,EAAA,IAAI0F,KAAK,CAACqC,OAAO,KAAK,MAAM,EAAE,OAAO,KAAK;AAC1C,EAAA,IAAIrC,KAAK,CAACmI,UAAU,KAAK,QAAQ,EAAE,OAAO,KAAK;EAC/C,IAAIC,UAAU,CAACpI,KAAK,CAAC2F,OAAO,CAAC,KAAK,CAAC,EAAE,OAAO,KAAK;;AAEjD;EACA,MAAMvK,cAAc,GAAGxM,MAAM,CAACyM,WAAW,IAAIrM,QAAQ,CAACqZ,eAAe,CAACC,YAAY;EAClF,MAAMpN,aAAa,GAAGtM,MAAM,CAACuM,UAAU,IAAInM,QAAQ,CAACqZ,eAAe,CAACE,WAAW;AAE/E,EAAA,OACEjC,IAAI,CAACxL,GAAG,IAAI,CAACwL,IAAI,CAAChM,MAAM,IACxBgM,IAAI,CAACvL,IAAI,IAAI,CAACuL,IAAI,CAAClM,KAAK,IACxBkM,IAAI,CAACtL,MAAM,IAAII,cAAc,GAAGkL,IAAI,CAAChM,MAAM,IAC3CgM,IAAI,CAACrL,KAAK,IAAIC,aAAa,GAAGoL,IAAI,CAAClM,KAAK;AAE5C;;AAEA;AACA;AACA;AACA;AACA;AACO,SAASoO,qBAAqBA,CAAC5J,OAAO,EAAE;AAC7C,EAAA,IAAI,CAACA,OAAO,EAAE,OAAO,KAAK;AAE1B,EAAA,MAAM0H,IAAI,GAAG1H,OAAO,CAAC0D,qBAAqB,EAAE;EAC5C,MAAMlH,cAAc,GAAGxM,MAAM,CAACyM,WAAW,IAAIrM,QAAQ,CAACqZ,eAAe,CAACC,YAAY;EAClF,MAAMpN,aAAa,GAAGtM,MAAM,CAACuM,UAAU,IAAInM,QAAQ,CAACqZ,eAAe,CAACE,WAAW;EAE/E,OACEjC,IAAI,CAACxL,GAAG,IAAI,CAAC,IACbwL,IAAI,CAACvL,IAAI,IAAI,CAAC,IACduL,IAAI,CAACtL,MAAM,IAAII,cAAc,IAC7BkL,IAAI,CAACrL,KAAK,IAAIC,aAAa;AAE/B;;AAEA;AACA;AACA;AACA;AACA;AACO,SAASuN,kBAAkBA,CAAC7J,OAAO,EAAE;AAC1C,EAAA,IAAI,CAACA,OAAO,EAAE,OAAO,IAAI;AAEzB,EAAA,MAAM0H,IAAI,GAAG1H,OAAO,CAAC0D,qBAAqB,EAAE;EAC5C,MAAMoG,UAAU,GAAG9Z,MAAM,CAAC+Z,WAAW,IAAI3Z,QAAQ,CAACqZ,eAAe,CAACK,UAAU;EAC5E,MAAME,SAAS,GAAGha,MAAM,CAACia,WAAW,IAAI7Z,QAAQ,CAACqZ,eAAe,CAACO,SAAS;EAE1E,OAAO;IACL9N,GAAG,EAAEwL,IAAI,CAACxL,GAAG;IACbC,IAAI,EAAEuL,IAAI,CAACvL,IAAI;IACfE,KAAK,EAAEqL,IAAI,CAACrL,KAAK;IACjBD,MAAM,EAAEsL,IAAI,CAACtL,MAAM;IACnBZ,KAAK,EAAEkM,IAAI,CAAClM,KAAK;IACjBE,MAAM,EAAEgM,IAAI,CAAChM,MAAM;AACnBwO,IAAAA,WAAW,EAAExC,IAAI,CAACxL,GAAG,GAAG8N,SAAS;AACjCG,IAAAA,YAAY,EAAEzC,IAAI,CAACvL,IAAI,GAAG2N,UAAU;IACpCM,OAAO,EAAE1C,IAAI,CAACvL,IAAI,GAAGuL,IAAI,CAAClM,KAAK,GAAG,CAAC;IACnC6O,OAAO,EAAE3C,IAAI,CAACxL,GAAG,GAAGwL,IAAI,CAAChM,MAAM,GAAG;GACnC;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACO,SAAS4O,eAAeA,CAACtK,OAAO,EAAEtR,OAAO,GAAG,EAAE,EAAE;AACrD,EAAA,OAAO,IAAI6b,OAAO,CAAEC,OAAO,IAAK;IAC9B,IAAI,CAACxK,OAAO,EAAE;AACZwK,MAAAA,OAAO,EAAE;AACT,MAAA;AACF,IAAA;IAEA,MAAM;AACJC,MAAAA,QAAQ,GAAG,QAAQ;AACnBC,MAAAA,KAAK,GAAG,QAAQ;AAChBC,MAAAA,MAAM,GAAG,SAAS;AAClBtN,MAAAA,MAAM,GAAG;AACX,KAAC,GAAG3O,OAAO;;AAEX;AACA,IAAA,IAAIkb,qBAAqB,CAAC5J,OAAO,CAAC,EAAE;AAClCwK,MAAAA,OAAO,EAAE;AACT,MAAA;AACF,IAAA;;AAEA;IACAxK,OAAO,CAAC4K,cAAc,CAAC;MACrBH,QAAQ;MACRC,KAAK;AACLC,MAAAA;AACF,KAAC,CAAC;;AAEF;IACA,IAAItN,MAAM,KAAK,CAAC,EAAE;AAChB2D,MAAAA,UAAU,CAAC,MAAM;QACfhR,MAAM,CAAC6a,QAAQ,CAAC;AACd3O,UAAAA,GAAG,EAAEmB,MAAM;AACXoN,UAAAA,QAAQ,EAAE;AACZ,SAAC,CAAC;MACJ,CAAC,EAAE,GAAG,CAAC;AACT,IAAA;;AAEA;IACA,MAAMK,aAAa,GAAGL,QAAQ,KAAK,QAAQ,GAAG,GAAG,GAAG,GAAG;AACvDzJ,IAAAA,UAAU,CAACwJ,OAAO,EAAEM,aAAa,CAAC;AACpC,EAAA,CAAC,CAAC;AACJ;;AAEA;AACA;AACA;AACA;AACA;AACA;AACO,SAASC,cAAcA,CAAC3B,QAAQ,EAAE4B,OAAO,GAAG,IAAI,EAAE;AACvD,EAAA,OAAO,IAAIT,OAAO,CAAEC,OAAO,IAAK;AAC9B;AACA,IAAA,MAAMvV,QAAQ,GAAGkU,WAAW,CAACC,QAAQ,CAAC;AACtC,IAAA,IAAInU,QAAQ,EAAE;MACZuV,OAAO,CAACvV,QAAQ,CAAC;AACjB,MAAA;AACF,IAAA;AAEA,IAAA,MAAMgW,SAAS,GAAGza,IAAI,CAAC8B,GAAG,EAAE;;AAE5B;IACA,MAAM4Y,QAAQ,GAAG,IAAIC,gBAAgB,CAAC,CAACC,SAAS,EAAEC,GAAG,KAAK;AACxD,MAAA,MAAMrL,OAAO,GAAGmJ,WAAW,CAACC,QAAQ,CAAC;AACrC,MAAA,IAAIpJ,OAAO,EAAE;QACXqL,GAAG,CAACC,UAAU,EAAE;QAChBd,OAAO,CAACxK,OAAO,CAAC;MAClB,CAAC,MAAM,IAAIxP,IAAI,CAAC8B,GAAG,EAAE,GAAG2Y,SAAS,IAAID,OAAO,EAAE;QAC5CK,GAAG,CAACC,UAAU,EAAE;QAChBd,OAAO,CAAC,IAAI,CAAC;AACf,MAAA;AACF,IAAA,CAAC,CAAC;AAEFU,IAAAA,QAAQ,CAACK,OAAO,CAACnb,QAAQ,CAACP,IAAI,EAAE;AAC9B2b,MAAAA,SAAS,EAAE,IAAI;AACfC,MAAAA,OAAO,EAAE,IAAI;AACbC,MAAAA,UAAU,EAAE;AACd,KAAC,CAAC;;AAEF;AACA1K,IAAAA,UAAU,CAAC,MAAM;MACfkK,QAAQ,CAACI,UAAU,EAAE;AACrBd,MAAAA,OAAO,CAACrB,WAAW,CAACC,QAAQ,CAAC,CAAC;IAChC,CAAC,EAAE4B,OAAO,CAAC;AACb,EAAA,CAAC,CAAC;AACJ;;AAEA;AACA;AACA;AACA;AACA;AACA;AACO,eAAeW,qBAAqBA,CAACvC,QAAQ,EAAE4B,OAAO,GAAG,IAAI,EAAE;EACpE,MAAMhL,OAAO,GAAG,MAAM+K,cAAc,CAAC3B,QAAQ,EAAE4B,OAAO,CAAC;AAEvD,EAAA,IAAI,CAAChL,OAAO,EAAE,OAAO,IAAI;;AAEzB;AACA,EAAA,MAAMiL,SAAS,GAAGza,IAAI,CAAC8B,GAAG,EAAE;AAC5B,EAAA,OAAO,CAAC+W,gBAAgB,CAACrJ,OAAO,CAAC,IAAIxP,IAAI,CAAC8B,GAAG,EAAE,GAAG2Y,SAAS,GAAGD,OAAO,EAAE;IACrE,MAAM,IAAIT,OAAO,CAAEC,OAAO,IAAKxJ,UAAU,CAACwJ,OAAO,EAAE,GAAG,CAAC,CAAC;AAC1D,EAAA;AAEA,EAAA,OAAOnB,gBAAgB,CAACrJ,OAAO,CAAC,GAAGA,OAAO,GAAG,IAAI;AACnD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACO,SAAS4L,gBAAgBA,CAAC5L,OAAO,EAAEtR,OAAO,GAAG,EAAE,EAAE;AACtD,EAAA,IAAI,CAACsR,OAAO,EAAE,OAAO,MAAM,CAAC,CAAC;EAE7B,MAAM;AACJ4E,IAAAA,KAAK,GAAG,SAAS;AACjBiH,IAAAA,QAAQ,GAAG,CAAC;AAAE;AACdhH,IAAAA,KAAK,GAAG;AACV,GAAC,GAAGnW,OAAO;AAEX,EAAA,MAAMod,eAAe,GAAG9L,OAAO,CAACoB,KAAK,CAAC2K,OAAO;AAC7C,EAAA,MAAMC,kBAAkB,GAAGhM,OAAO,CAACoB,KAAK,CAAC6K,UAAU;AAEnDjM,EAAAA,OAAO,CAACoB,KAAK,CAAC2K,OAAO,GAAG,CAAA,UAAA,EAAanH,KAAK,CAAA,CAAE;AAC5C5E,EAAAA,OAAO,CAACoB,KAAK,CAAC6K,UAAU,GAAG,mBAAmB;AAE9C,EAAA,IAAIpH,KAAK,EAAE;AACT7E,IAAAA,OAAO,CAACc,SAAS,CAACC,GAAG,CAAC,qBAAqB,CAAC;AAC9C,EAAA;EAEA,MAAMmL,OAAO,GAAGA,MAAM;AACpBlM,IAAAA,OAAO,CAACoB,KAAK,CAAC2K,OAAO,GAAGD,eAAe;AACvC9L,IAAAA,OAAO,CAACoB,KAAK,CAAC6K,UAAU,GAAGD,kBAAkB;AAC7ChM,IAAAA,OAAO,CAACc,SAAS,CAAC+E,MAAM,CAAC,qBAAqB,CAAC;EACjD,CAAC;EAED,IAAIgG,QAAQ,GAAG,CAAC,EAAE;AAChB7K,IAAAA,UAAU,CAACkL,OAAO,EAAEL,QAAQ,CAAC;AAC/B,EAAA;AAEA,EAAA,OAAOK,OAAO;AAChB;;AAEA;AACA;AACA;AACA;AACA;AACO,SAASC,oBAAoBA,CAAC9L,SAAS,EAAE;AAC9C,EAAA,MAAM+L,kBAAkB,GAAG,CACzB,SAAS,EACT,wBAAwB,EACxB,uBAAuB,EACvB,wBAAwB,EACxB,0BAA0B,EAC1B,iCAAiC,CAClC,CAACC,IAAI,CAAC,IAAI,CAAC;EAEZ,OAAO5R,KAAK,CAAC6R,IAAI,CAACjM,SAAS,CAACuI,gBAAgB,CAACwD,kBAAkB,CAAC,CAAC;AACnE;;AAEA;AACA;AACA;AACA;AACA;AACO,SAASG,eAAeA,CAAClM,SAAS,EAAE;AACzC,EAAA,MAAMmM,iBAAiB,GAAGL,oBAAoB,CAAC9L,SAAS,CAAC;AACzD,EAAA,MAAMoM,YAAY,GAAGD,iBAAiB,CAAC,CAAC,CAAC;EACzC,MAAME,WAAW,GAAGF,iBAAiB,CAACA,iBAAiB,CAACtZ,MAAM,GAAG,CAAC,CAAC;EAEnE,MAAMyZ,aAAa,GAAIhL,CAAC,IAAK;AAC3B,IAAA,IAAIA,CAAC,CAAClN,GAAG,KAAK,KAAK,EAAE;IAErB,IAAIkN,CAAC,CAACiL,QAAQ,EAAE;AACd,MAAA,IAAIxc,QAAQ,CAACyc,aAAa,KAAKJ,YAAY,EAAE;QAC3C9K,CAAC,CAACC,cAAc,EAAE;QAClB8K,WAAW,EAAEpI,KAAK,EAAE;AACtB,MAAA;AACF,IAAA,CAAC,MAAM;AACL,MAAA,IAAIlU,QAAQ,CAACyc,aAAa,KAAKH,WAAW,EAAE;QAC1C/K,CAAC,CAACC,cAAc,EAAE;QAClB6K,YAAY,EAAEnI,KAAK,EAAE;AACvB,MAAA;AACF,IAAA;EACF,CAAC;AAEDjE,EAAAA,SAAS,CAACxN,gBAAgB,CAAC,SAAS,EAAE8Z,aAAa,CAAC;EACpDF,YAAY,EAAEnI,KAAK,EAAE;AAErB,EAAA,OAAO,MAAM;AACXjE,IAAAA,SAAS,CAACyD,mBAAmB,CAAC,SAAS,EAAE6I,aAAa,CAAC;EACzD,CAAC;AACH;;AAEA;AACA;AACA;AACA;AACA;AACO,SAASG,SAASA,CAAC9M,OAAO,EAAE;EACjC,IAAI+M,EAAE,GAAG/M,OAAO;EAChB,IAAIgN,MAAM,GAAG,CAAC;AAEd,EAAA,OAAOD,EAAE,EAAE;AACT,IAAA,MAAM3L,KAAK,GAAGpR,MAAM,CAACsZ,gBAAgB,CAACyD,EAAE,CAAC;IACzC,MAAME,CAAC,GAAGC,QAAQ,CAAC9L,KAAK,CAAC4L,MAAM,EAAE,EAAE,CAAC;IAEpC,IAAI,CAACG,KAAK,CAACF,CAAC,CAAC,IAAIA,CAAC,GAAGD,MAAM,EAAE;AAC3BA,MAAAA,MAAM,GAAGC,CAAC;AACZ,IAAA;IAEAF,EAAE,GAAGA,EAAE,CAACK,aAAa;AACvB,EAAA;AAEA,EAAA,OAAOJ,MAAM;AACf;;AC5UA;AACA;AACA;;AAUO,MAAMK,YAAY,CAAC;EACxB5W,WAAWA,CAACC,GAAG,EAAE;IACf,IAAI,CAACA,GAAG,GAAGA,GAAG;IACd,IAAI,CAAC2J,SAAS,GAAG,IAAI;IACrB,IAAI,CAACiN,gBAAgB,GAAG,IAAI;IAC5B,IAAI,CAACC,OAAO,GAAG,IAAI;IACnB,IAAI,CAAC7G,WAAW,GAAG,IAAI;IACvB,IAAI,CAAC8G,QAAQ,GAAG,EAAE;IAElB,IAAI,CAACC,gBAAgB,EAAE;AACzB,EAAA;;AAEA;AACF;AACA;AACA;AACA;AACE,EAAA,MAAMC,UAAUA,CAACjF,IAAI,EAAE/Z,OAAO,EAAE;AAC9B;IACA,IAAI,CAACif,QAAQ,EAAE;IAEf,MAAM;MAAExc,IAAI;MAAEmO,SAAS;MAAEC,UAAU;MAAEG,MAAM;MAAEC,MAAM;MAAEC,MAAM;AAAEC,MAAAA;AAAQ,KAAC,GAAGnR,OAAO;;AAEhF;IACA,IAAIyQ,aAAa,GAAG,IAAI;IACxB,IAAIsJ,IAAI,CAACmF,cAAc,EAAE;AACvBzO,MAAAA,aAAa,GAAG,MAAM4L,cAAc,CAACtC,IAAI,CAACmF,cAAc,EAAEnF,IAAI,CAACoF,WAAW,IAAI,IAAI,CAAC;MAEnF,IAAI,CAAC1O,aAAa,EAAE;QAClB3P,OAAO,CAACqE,IAAI,CAAC,CAAA,yCAAA,EAA4C4U,IAAI,CAACmF,cAAc,EAAE,CAAC;AAC/E;QACAnF,IAAI,CAAC1W,IAAI,GAAG,OAAO;AACrB,MAAA;AACF,IAAA;;AAEA;AACA,IAAA,IAAIoN,aAAa,IAAIsJ,IAAI,CAACqF,QAAQ,KAAK,KAAK,EAAE;MAC5C,MAAMxD,eAAe,CAACnL,aAAa,EAAE;AACnCsL,QAAAA,QAAQ,EAAEhC,IAAI,CAACsF,cAAc,IAAI,QAAQ;AACzCrD,QAAAA,KAAK,EAAEjC,IAAI,CAACuF,WAAW,IAAI;AAC7B,OAAC,CAAC;AACJ,IAAA;;AAEA;AACA,IAAA,IAAIvF,IAAI,CAAC8E,OAAO,KAAK,KAAK,IAAIpO,aAAa,EAAE;AAC3C,MAAA,IAAI,CAACoO,OAAO,GAAG,IAAIzG,OAAO,CAAC;QACzB3H,aAAa;AACbuD,QAAAA,OAAO,EAAE+F,IAAI,CAACwF,iBAAiB,GAAGpO,OAAO,GAAG,IAAI;AAChD9C,QAAAA,OAAO,EAAE0L,IAAI,CAACyF,cAAc,IAAI,CAAC;AACjCnH,QAAAA,OAAO,EAAE0B,IAAI,CAAC0F,cAAc,IAAI,GAAG;AACnCrO,QAAAA,KAAK,EAAE,IAAI,CAACpJ,GAAG,CAACO,MAAM,CAAC6I;AACzB,OAAC,CAAC;MACF,IAAI,CAACyN,OAAO,CAACnN,MAAM,CAAC,IAAI,CAACC,SAAS,CAAC;AACrC,IAAA;;AAEA;IACA,IAAIlP,IAAI,CAACuH,QAAQ,EAAE0V,YAAY,KAAK,KAAK,IAAI7O,UAAU,GAAG,CAAC,EAAE;AAC3D,MAAA,IAAI,CAACmH,WAAW,GAAG,IAAIuB,WAAW,CAAC;AACjCC,QAAAA,OAAO,EAAE5I,SAAS;AAClB6I,QAAAA,KAAK,EAAE5I,UAAU;AACjBO,QAAAA,KAAK,EAAE,IAAI,CAACpJ,GAAG,CAACO,MAAM,CAAC6I;AACzB,OAAC,CAAC;MACF,IAAI,CAAC4G,WAAW,CAACtG,MAAM,CAAC,IAAI,CAACC,SAAS,CAAC;AACzC,IAAA;;AAEA;AACA,IAAA,MAAMgO,gBAAgB,GAAG;MACvB5F,IAAI;MACJtJ,aAAa;MACbG,SAAS;MACTC,UAAU;MACVG,MAAM;MACNC,MAAM;MACNC,MAAM;MACNC,OAAO;MACPL,cAAc,EAAEF,SAAS,GAAG,CAAC,IAAInO,IAAI,CAACuH,QAAQ,EAAE8G,cAAc,KAAK,KAAK;AACxEC,MAAAA,cAAc,EAAEtO,IAAI,CAACuH,QAAQ,EAAE+G,cAAc,KAAK,KAAK;AACvDK,MAAAA,KAAK,EAAE,IAAI,CAACpJ,GAAG,CAACO,MAAM,CAAC6I,KAAK;AAC5BC,MAAAA,YAAY,EAAE5O,IAAI,CAACuH,QAAQ,EAAEqH;KAC9B;IAED,QAAQ0I,IAAI,CAAC1W,IAAI;AACf,MAAA,KAAK,SAAS;AACZ,QAAA,IAAI,CAACuc,cAAc,CAACD,gBAAgB,CAAC;AACrC,QAAA;AACF,MAAA,KAAK,OAAO;AACV,QAAA,IAAI,CAACE,YAAY,CAACF,gBAAgB,CAAC;AACnC,QAAA;AACF,MAAA,KAAK,SAAS;AACZ,QAAA,IAAI,CAACG,cAAc,CAACH,gBAAgB,CAAC;AACrC,QAAA;AACF,MAAA,KAAK,UAAU;AACb,QAAA,IAAI,CAACI,eAAe,CAACJ,gBAAgB,CAAC;AACtC,QAAA;AACF,MAAA;AACE,QAAA,IAAI,CAACC,cAAc,CAACD,gBAAgB,CAAC;AACzC;;AAEA;IACA,IAAI,CAACK,kBAAkB,CAACjG,IAAI,EAAEtJ,aAAa,EAAEO,MAAM,CAAC;AACtD,EAAA;;AAEA;AACF;AACA;EACE4O,cAAcA,CAAC5f,OAAO,EAAE;IACtB,MAAM;MAAE+Z,IAAI;MAAEtJ,aAAa;MAAE,GAAGwP;AAAK,KAAC,GAAGjgB,OAAO;AAEhD,IAAA,IAAI,CAAC4e,gBAAgB,GAAG,IAAIrO,OAAO,CAAC;MAClCtN,KAAK,EAAE8W,IAAI,CAAC9W,KAAK;MACjBuN,OAAO,EAAEuJ,IAAI,CAACvJ,OAAO;AACrBvC,MAAAA,QAAQ,EAAE8L,IAAI,CAAC9L,QAAQ,IAAI,QAAQ;MACnCwC,aAAa;MACbC,KAAK,EAAEqJ,IAAI,CAACrJ,KAAK;MACjBC,OAAO,EAAEoJ,IAAI,CAACpJ,OAAO;MACrB,GAAGsP;AACL,KAAC,CAAC;IAEF,IAAI,CAACrB,gBAAgB,CAAClN,MAAM,CAAC,IAAI,CAACC,SAAS,CAAC;AAC9C,EAAA;;AAEA;AACF;AACA;EACEkO,YAAYA,CAAC7f,OAAO,EAAE;IACpB,MAAM;MAAE+Z,IAAI;MAAE,GAAGkG;AAAK,KAAC,GAAGjgB,OAAO;AAEjC,IAAA,IAAI,CAAC4e,gBAAgB,GAAG,IAAItJ,KAAK,CAAC;MAChCrS,KAAK,EAAE8W,IAAI,CAAC9W,KAAK;MACjBuN,OAAO,EAAEuJ,IAAI,CAACvJ,OAAO;AACrB9I,MAAAA,IAAI,EAAEqS,IAAI,CAACrS,IAAI,IAAI,QAAQ;MAC3BgJ,KAAK,EAAEqJ,IAAI,CAACrJ,KAAK;MACjBC,OAAO,EAAEoJ,IAAI,CAACpJ,OAAO;MACrB,GAAGsP;AACL,KAAC,CAAC;IAEF,IAAI,CAACrB,gBAAgB,CAAClN,MAAM,CAAC,IAAI,CAACC,SAAS,CAAC;AAC9C,EAAA;;AAEA;AACF;AACA;EACEmO,cAAcA,CAAC9f,OAAO,EAAE;IACtB,MAAM;MAAE+Z,IAAI;MAAEtJ,aAAa;MAAE,GAAGwP;AAAK,KAAC,GAAGjgB,OAAO;IAEhD,IAAI,CAACyQ,aAAa,EAAE;AAClB3P,MAAAA,OAAO,CAACqE,IAAI,CAAC,kDAAkD,CAAC;AAChE,MAAA,IAAI,CAAC0a,YAAY,CAAC7f,OAAO,CAAC;AAC1B,MAAA;AACF,IAAA;AAEA,IAAA,IAAI,CAAC4e,gBAAgB,GAAG,IAAI3I,OAAO,CAAC;MAClCxF,aAAa;MACbxN,KAAK,EAAE8W,IAAI,CAAC9W,KAAK;MACjBuN,OAAO,EAAEuJ,IAAI,CAACvJ,OAAO;AACrBvC,MAAAA,QAAQ,EAAE8L,IAAI,CAAC9L,QAAQ,IAAI,OAAO;MAClCiI,KAAK,EAAE6D,IAAI,CAACmG,YAAY;AACxB/J,MAAAA,KAAK,EAAE4D,IAAI,CAAC5D,KAAK,KAAK,KAAK;MAC3B,GAAG8J;AACL,KAAC,CAAC;IAEF,IAAI,CAACrB,gBAAgB,CAAClN,MAAM,CAAC,IAAI,CAACC,SAAS,CAAC;AAC9C,EAAA;;AAEA;AACF;AACA;EACEoO,eAAeA,CAAC/f,OAAO,EAAE;IACvB,MAAM;MAAE+Z,IAAI;MAAE,GAAGkG;AAAK,KAAC,GAAGjgB,OAAO;AAEjC,IAAA,IAAI,CAAC4e,gBAAgB,GAAG,IAAIlH,QAAQ,CAAC;MACnCzU,KAAK,EAAE8W,IAAI,CAAC9W,KAAK;MACjBuN,OAAO,EAAEuJ,IAAI,CAACvJ,OAAO;AACrBvC,MAAAA,QAAQ,EAAE8L,IAAI,CAACoG,aAAa,IAAI,OAAO;MACvCrT,KAAK,EAAEiN,IAAI,CAACqG,UAAU;MACtB1P,KAAK,EAAEqJ,IAAI,CAACrJ,KAAK;MACjBC,OAAO,EAAEoJ,IAAI,CAACpJ,OAAO;MACrB,GAAGsP;AACL,KAAC,CAAC;IAEF,IAAI,CAACrB,gBAAgB,CAAClN,MAAM,CAAC,IAAI,CAACC,SAAS,CAAC;AAC9C,EAAA;;AAEA;AACF;AACA;AACEqO,EAAAA,kBAAkBA,CAACjG,IAAI,EAAEtJ,aAAa,EAAEO,MAAM,EAAE;AAC9C,IAAA,IAAI,CAAC+I,IAAI,CAACsG,OAAO,IAAI,CAAC5P,aAAa,EAAE;IAErC,MAAM;MAAEpN,IAAI;AAAEid,MAAAA;KAAO,GAAGvG,IAAI,CAACsG,OAAO;AAEpC,IAAA,QAAQhd,IAAI;AACV,MAAA,KAAK,OAAO;QACV,MAAMkd,YAAY,GAAGA,MAAM;AACzB9P,UAAAA,aAAa,CAAC2E,mBAAmB,CAAC,OAAO,EAAEmL,YAAY,CAAC;AACxDvP,UAAAA,MAAM,EAAE;QACV,CAAC;AACDP,QAAAA,aAAa,CAACtM,gBAAgB,CAAC,OAAO,EAAEoc,YAAY,CAAC;QACrD,IAAI,CAACC,eAAe,GAAG,MAAM/P,aAAa,CAAC2E,mBAAmB,CAAC,OAAO,EAAEmL,YAAY,CAAC;AACrF,QAAA;AAEF,MAAA,KAAK,OAAO;QACV,MAAME,YAAY,GAAGA,MAAM;AACzB,UAAA,IAAIhQ,aAAa,CAACxF,KAAK,CAACzG,MAAM,GAAG,CAAC,EAAE;AAClCiM,YAAAA,aAAa,CAAC2E,mBAAmB,CAAC,OAAO,EAAEqL,YAAY,CAAC;AACxDzP,YAAAA,MAAM,EAAE;AACV,UAAA;QACF,CAAC;AACDP,QAAAA,aAAa,CAACtM,gBAAgB,CAAC,OAAO,EAAEsc,YAAY,CAAC;QACrD,IAAI,CAACD,eAAe,GAAG,MAAM/P,aAAa,CAAC2E,mBAAmB,CAAC,OAAO,EAAEqL,YAAY,CAAC;AACrF,QAAA;AAEF,MAAA,KAAK,QAAQ;AACX;AACA,QAAA,IAAIH,KAAK,EAAE;UACT,MAAMI,aAAa,GAAGA,MAAM;AAC1Bhf,YAAAA,QAAQ,CAAC0T,mBAAmB,CAACkL,KAAK,EAAEI,aAAa,CAAC;AAClD1P,YAAAA,MAAM,EAAE;UACV,CAAC;AACDtP,UAAAA,QAAQ,CAACyC,gBAAgB,CAACmc,KAAK,EAAEI,aAAa,CAAC;UAC/C,IAAI,CAACF,eAAe,GAAG,MAAM9e,QAAQ,CAAC0T,mBAAmB,CAACkL,KAAK,EAAEI,aAAa,CAAC;AACjF,QAAA;AACA,QAAA;AACJ;AACF,EAAA;;AAEA;AACF;AACA;AACEzO,EAAAA,OAAOA,GAAG;IACR,IAAI,CAACgN,QAAQ,EAAE;IAEf,IAAI,IAAI,CAACtN,SAAS,IAAI,IAAI,CAACA,SAAS,CAACQ,UAAU,EAAE;MAC/C,IAAI,CAACR,SAAS,CAACQ,UAAU,CAACI,WAAW,CAAC,IAAI,CAACZ,SAAS,CAAC;AACvD,IAAA;IAEA,IAAI,CAACA,SAAS,GAAG,IAAI;AACvB,EAAA;;AAEA;;AAEAoN,EAAAA,gBAAgBA,GAAG;AACjB;AACA,IAAA,MAAMxY,QAAQ,GAAG7E,QAAQ,CAACif,cAAc,CAAC,4BAA4B,CAAC;AACtE,IAAA,IAAIpa,QAAQ,EAAE;AACZA,MAAAA,QAAQ,CAAC4L,UAAU,CAACI,WAAW,CAAChM,QAAQ,CAAC;AAC3C,IAAA;IAEA,IAAI,CAACoL,SAAS,GAAGjQ,QAAQ,CAAC8Q,aAAa,CAAC,KAAK,CAAC;AAC9C,IAAA,IAAI,CAACb,SAAS,CAAClJ,EAAE,GAAG,4BAA4B;AAChD,IAAA,IAAI,CAACkJ,SAAS,CAACc,SAAS,GAAG,kBAAkB;IAC7C/Q,QAAQ,CAACP,IAAI,CAAC0Q,WAAW,CAAC,IAAI,CAACF,SAAS,CAAC;AAC3C,EAAA;AAEAsN,EAAAA,QAAQA,GAAG;IACT,IAAI,IAAI,CAACL,gBAAgB,EAAE;AACzB,MAAA,IAAI,CAACA,gBAAgB,CAAC3M,OAAO,EAAE;MAC/B,IAAI,CAAC2M,gBAAgB,GAAG,IAAI;AAC9B,IAAA;IAEA,IAAI,IAAI,CAACC,OAAO,EAAE;AAChB,MAAA,IAAI,CAACA,OAAO,CAAC5M,OAAO,EAAE;MACtB,IAAI,CAAC4M,OAAO,GAAG,IAAI;AACrB,IAAA;IAEA,IAAI,IAAI,CAAC7G,WAAW,EAAE;AACpB,MAAA,IAAI,CAACA,WAAW,CAAC/F,OAAO,EAAE;MAC1B,IAAI,CAAC+F,WAAW,GAAG,IAAI;AACzB,IAAA;AAEA,IAAA,IAAI,CAAC8G,QAAQ,CAAChZ,OAAO,CAAE8a,OAAO,IAAKA,OAAO,CAAC3O,OAAO,EAAE,CAAC;IACrD,IAAI,CAAC6M,QAAQ,GAAG,EAAE;IAElB,IAAI,IAAI,CAAC0B,eAAe,EAAE;MACxB,IAAI,CAACA,eAAe,EAAE;MACtB,IAAI,CAACA,eAAe,GAAG,IAAI;AAC7B,IAAA;AACF,EAAA;AACF;;AClSA;AACA;AACA;AACA;;AAEO,MAAMK,YAAY,CAAC;AACxB9Y,EAAAA,WAAWA,GAAG;AACZ,IAAA,IAAI,CAAC+Y,OAAO,GAAG,EAAE;AACjB,IAAA,IAAI,CAACC,WAAW,GAAG,EAAE;AACvB,EAAA;;AAEA;AACF;AACA;AACA;AACA;AACA;AACEC,EAAAA,EAAEA,CAACV,KAAK,EAAEW,QAAQ,EAAE;AAClB,IAAA,IAAI,OAAOA,QAAQ,KAAK,UAAU,EAAE;AAClC,MAAA,MAAM,IAAIvgB,KAAK,CAAC,6BAA6B,CAAC;AAChD,IAAA;AAEA,IAAA,IAAI,CAAC,IAAI,CAACogB,OAAO,CAACR,KAAK,CAAC,EAAE;AACxB,MAAA,IAAI,CAACQ,OAAO,CAACR,KAAK,CAAC,GAAG,EAAE;AAC1B,IAAA;IAEA,IAAI,CAACQ,OAAO,CAACR,KAAK,CAAC,CAAChc,IAAI,CAAC2c,QAAQ,CAAC;AAClC,IAAA,OAAO,IAAI;AACb,EAAA;;AAEA;AACF;AACA;AACA;AACA;AACA;AACEC,EAAAA,IAAIA,CAACZ,KAAK,EAAEW,QAAQ,EAAE;AACpB,IAAA,IAAI,OAAOA,QAAQ,KAAK,UAAU,EAAE;AAClC,MAAA,MAAM,IAAIvgB,KAAK,CAAC,6BAA6B,CAAC;AAChD,IAAA;AAEA,IAAA,IAAI,CAAC,IAAI,CAACqgB,WAAW,CAACT,KAAK,CAAC,EAAE;AAC5B,MAAA,IAAI,CAACS,WAAW,CAACT,KAAK,CAAC,GAAG,EAAE;AAC9B,IAAA;IAEA,IAAI,CAACS,WAAW,CAACT,KAAK,CAAC,CAAChc,IAAI,CAAC2c,QAAQ,CAAC;AACtC,IAAA,OAAO,IAAI;AACb,EAAA;;AAEA;AACF;AACA;AACA;AACA;AACA;AACEE,EAAAA,GAAGA,CAACb,KAAK,EAAEW,QAAQ,EAAE;AACnB,IAAA,IAAI,IAAI,CAACH,OAAO,CAACR,KAAK,CAAC,EAAE;MACvB,IAAI,CAACQ,OAAO,CAACR,KAAK,CAAC,GAAG,IAAI,CAACQ,OAAO,CAACR,KAAK,CAAC,CAAC/Q,MAAM,CAAE6R,EAAE,IAAKA,EAAE,KAAKH,QAAQ,CAAC;AAC3E,IAAA;AAEA,IAAA,IAAI,IAAI,CAACF,WAAW,CAACT,KAAK,CAAC,EAAE;MAC3B,IAAI,CAACS,WAAW,CAACT,KAAK,CAAC,GAAG,IAAI,CAACS,WAAW,CAACT,KAAK,CAAC,CAAC/Q,MAAM,CAAE6R,EAAE,IAAKA,EAAE,KAAKH,QAAQ,CAAC;AACnF,IAAA;AAEA,IAAA,OAAO,IAAI;AACb,EAAA;;AAEA;AACF;AACA;AACA;AACA;EACEI,kBAAkBA,CAACf,KAAK,EAAE;AACxB,IAAA,IAAIA,KAAK,EAAE;AACT,MAAA,OAAO,IAAI,CAACQ,OAAO,CAACR,KAAK,CAAC;AAC1B,MAAA,OAAO,IAAI,CAACS,WAAW,CAACT,KAAK,CAAC;AAChC,IAAA,CAAC,MAAM;AACL,MAAA,IAAI,CAACQ,OAAO,GAAG,EAAE;AACjB,MAAA,IAAI,CAACC,WAAW,GAAG,EAAE;AACvB,IAAA;AAEA,IAAA,OAAO,IAAI;AACb,EAAA;;AAEA;AACF;AACA;AACA;AACA;AACA;AACEO,EAAAA,IAAIA,CAAChB,KAAK,EAAE,GAAGiB,IAAI,EAAE;IACnB,IAAIC,YAAY,GAAG,KAAK;;AAExB;AACA,IAAA,IAAI,IAAI,CAACV,OAAO,CAACR,KAAK,CAAC,EAAE;AACvBkB,MAAAA,YAAY,GAAG,IAAI;MACnB,IAAI,CAACV,OAAO,CAACR,KAAK,CAAC,CAACxa,OAAO,CAAEmb,QAAQ,IAAK;QACxC,IAAI;UACFA,QAAQ,CAAC,GAAGM,IAAI,CAAC;QACnB,CAAC,CAAC,OAAO1gB,KAAK,EAAE;UACdC,OAAO,CAACD,KAAK,CAAC,CAAA,wBAAA,EAA2Byf,KAAK,CAAA,UAAA,CAAY,EAAEzf,KAAK,CAAC;AACpE,QAAA;AACF,MAAA,CAAC,CAAC;AACJ,IAAA;;AAEA;AACA,IAAA,IAAI,IAAI,CAACkgB,WAAW,CAACT,KAAK,CAAC,EAAE;AAC3BkB,MAAAA,YAAY,GAAG,IAAI;MACnB,MAAMC,SAAS,GAAG,CAAC,GAAG,IAAI,CAACV,WAAW,CAACT,KAAK,CAAC,CAAC;AAC9C,MAAA,IAAI,CAACS,WAAW,CAACT,KAAK,CAAC,GAAG,EAAE;AAE5BmB,MAAAA,SAAS,CAAC3b,OAAO,CAAEmb,QAAQ,IAAK;QAC9B,IAAI;UACFA,QAAQ,CAAC,GAAGM,IAAI,CAAC;QACnB,CAAC,CAAC,OAAO1gB,KAAK,EAAE;UACdC,OAAO,CAACD,KAAK,CAAC,CAAA,wBAAA,EAA2Byf,KAAK,CAAA,eAAA,CAAiB,EAAEzf,KAAK,CAAC;AACzE,QAAA;AACF,MAAA,CAAC,CAAC;AACJ,IAAA;;AAEA;AACA,IAAA,IAAI,IAAI,CAACigB,OAAO,CAAC,GAAG,CAAC,EAAE;MACrB,IAAI,CAACA,OAAO,CAAC,GAAG,CAAC,CAAChb,OAAO,CAAEmb,QAAQ,IAAK;QACtC,IAAI;AACFA,UAAAA,QAAQ,CAACX,KAAK,EAAE,GAAGiB,IAAI,CAAC;QAC1B,CAAC,CAAC,OAAO1gB,KAAK,EAAE;AACdC,UAAAA,OAAO,CAACD,KAAK,CAAC,CAAA,0CAAA,CAA4C,EAAEA,KAAK,CAAC;AACpE,QAAA;AACF,MAAA,CAAC,CAAC;AACJ,IAAA;AAEA,IAAA,OAAO2gB,YAAY;AACrB,EAAA;;AAEA;AACF;AACA;AACA;AACA;EACEE,aAAaA,CAACpB,KAAK,EAAE;IACnB,MAAMqB,OAAO,GAAG,IAAI,CAACb,OAAO,CAACR,KAAK,CAAC,EAAE9b,MAAM,IAAI,CAAC;IAChD,MAAM0c,IAAI,GAAG,IAAI,CAACH,WAAW,CAACT,KAAK,CAAC,EAAE9b,MAAM,IAAI,CAAC;IACjD,OAAOmd,OAAO,GAAGT,IAAI;AACvB,EAAA;;AAEA;AACF;AACA;AACA;AACEU,EAAAA,UAAUA,GAAG;IACX,MAAMle,MAAM,GAAG,IAAIme,GAAG,CAAC,CACrB,GAAGhc,MAAM,CAACD,IAAI,CAAC,IAAI,CAACkb,OAAO,CAAC,EAC5B,GAAGjb,MAAM,CAACD,IAAI,CAAC,IAAI,CAACmb,WAAW,CAAC,CACjC,CAAC;AACF,IAAA,OAAOhV,KAAK,CAAC6R,IAAI,CAACla,MAAM,CAAC;AAC3B,EAAA;;AAEA;AACF;AACA;AACA;AACA;EACEoe,SAASA,CAACxB,KAAK,EAAE;IACf,OAAO,CACL,IAAI,IAAI,CAACQ,OAAO,CAACR,KAAK,CAAC,IAAI,EAAE,CAAC,EAC9B,IAAI,IAAI,CAACS,WAAW,CAACT,KAAK,CAAC,IAAI,EAAE,CAAC,CACnC;AACH,EAAA;AACF;;AAEA;AACA;AACA;AACO,MAAMyB,MAAM,GAAG;AACpB;AACAC,EAAAA,eAAe,EAAE,iBAAiB;AAClCC,EAAAA,aAAa,EAAE,eAAe;AAE9B;AACAC,EAAAA,eAAe,EAAE,iBAAiB;AAElC;AACAC,EAAAA,YAAY,EAAE,cAAc;AAC5BC,EAAAA,cAAc,EAAE,gBAAgB;AAChCC,EAAAA,cAAc,EAAE,gBAAgB;AAChCC,EAAAA,UAAU,EAAE,YAAY;AAExB;AACAC,EAAAA,WAAW,EAAE,aAAa;AAC1BC,EAAAA,cAAc,EAAE,gBAAgB;AAChCC,EAAAA,YAAY,EAAE,cAAc;AAE5B;AACAC,EAAAA,cAAc,EAAE,gBAAgB;AAChCC,EAAAA,cAAc,EAAE;AAClB;;AAEA;AACA;AACA;AACO,SAASC,kBAAkBA,GAAG;AACnC,EAAA,MAAMC,OAAO,GAAG,IAAIhC,YAAY,EAAE;;AAElC;EACA,OAAO;AACLG,IAAAA,EAAE,EAAEA,CAACV,KAAK,EAAEW,QAAQ,KAAK4B,OAAO,CAAC7B,EAAE,CAACV,KAAK,EAAEW,QAAQ,CAAC;AACpDC,IAAAA,IAAI,EAAEA,CAACZ,KAAK,EAAEW,QAAQ,KAAK4B,OAAO,CAAC3B,IAAI,CAACZ,KAAK,EAAEW,QAAQ,CAAC;AACxDE,IAAAA,GAAG,EAAEA,CAACb,KAAK,EAAEW,QAAQ,KAAK4B,OAAO,CAAC1B,GAAG,CAACb,KAAK,EAAEW,QAAQ,CAAC;AACtDK,IAAAA,IAAI,EAAEA,CAAChB,KAAK,EAAE,GAAGiB,IAAI,KAAKsB,OAAO,CAACvB,IAAI,CAAChB,KAAK,EAAE,GAAGiB,IAAI,CAAC;IACtDF,kBAAkB,EAAGf,KAAK,IAAKuC,OAAO,CAACxB,kBAAkB,CAACf,KAAK,CAAC;AAChEyB,IAAAA;GACD;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACO,SAASe,QAAQA,CAACC,IAAI,EAAEC,IAAI,EAAE;AACnC,EAAA,IAAI1G,OAAO;AAEX,EAAA,OAAO,SAAS2G,gBAAgBA,CAAC,GAAG1B,IAAI,EAAE;IACxC,MAAM2B,KAAK,GAAGA,MAAM;MAClBC,YAAY,CAAC7G,OAAO,CAAC;MACrByG,IAAI,CAAC,GAAGxB,IAAI,CAAC;IACf,CAAC;IAED4B,YAAY,CAAC7G,OAAO,CAAC;AACrBA,IAAAA,OAAO,GAAGhK,UAAU,CAAC4Q,KAAK,EAAEF,IAAI,CAAC;EACnC,CAAC;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACO,SAASI,QAAQA,CAACL,IAAI,EAAEM,KAAK,EAAE;AACpC,EAAA,IAAIC,UAAU;AAEd,EAAA,OAAO,SAASL,gBAAgBA,CAAC,GAAG1B,IAAI,EAAE;IACxC,IAAI,CAAC+B,UAAU,EAAE;MACfP,IAAI,CAAC,GAAGxB,IAAI,CAAC;AACb+B,MAAAA,UAAU,GAAG,IAAI;AACjBhR,MAAAA,UAAU,CAAC,MAAOgR,UAAU,GAAG,KAAM,EAAED,KAAK,CAAC;AAC/C,IAAA;EACF,CAAC;AACH;;AC1PA;AACA;AACA;AACA;;AAQA,MAAME,OAAO,SAAS1C,YAAY,CAAC;AACjC9Y,EAAAA,WAAWA,GAAG;AACZ,IAAA,KAAK,EAAE;IACP,IAAI,CAACQ,MAAM,GAAG,IAAI;IAClB,IAAI,CAACib,MAAM,GAAG,IAAI;IAClB,IAAI,CAACC,QAAQ,GAAG,IAAI;IACpB,IAAI,CAACC,WAAW,GAAG,IAAI;IACvB,IAAI,CAACC,gBAAgB,GAAG,CAAC;IACzB,IAAI,CAACC,WAAW,GAAG,KAAK;IACxB,IAAI,CAAC5iB,SAAS,GAAG,IAAI;IACrB,IAAI,CAACC,MAAM,GAAG,IAAI;AAClB,IAAA,IAAI,CAACmI,UAAU,GAAG,EAAE;AACtB,EAAA;;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACEya,IAAIA,CAACtb,MAAM,EAAE;IACX,IAAI,IAAI,CAACqb,WAAW,EAAE;AACpB9iB,MAAAA,OAAO,CAACqE,IAAI,CAAC,2CAA2C,CAAC;AACzD,MAAA,OAAO,IAAI;AACb,IAAA;AAEA,IAAA,IAAI,CAACoD,MAAM,CAAC1I,WAAW,EAAE;AACvB,MAAA,MAAM,IAAIa,KAAK,CAAC,2CAA2C,CAAC;AAC9D,IAAA;IAEA,IAAI,CAAC6H,MAAM,GAAG;MACZ1I,WAAW,EAAE0I,MAAM,CAAC1I,WAAW;AAC/BoB,MAAAA,MAAM,EAAEsH,MAAM,CAACtH,MAAM,IAAI,IAAI;AAC7BD,MAAAA,SAAS,EAAEuH,MAAM,CAACvH,SAAS,IAAI+D,YAAY,EAAE;AAC7CnF,MAAAA,MAAM,EAAE2I,MAAM,CAAC3I,MAAM,IAAI,4BAA4B;AACrDkkB,MAAAA,SAAS,EAAEvb,MAAM,CAACub,SAAS,KAAK,KAAK;AACrC1S,MAAAA,KAAK,EAAE7I,MAAM,CAAC6I,KAAK,IAAI;KACxB;;AAED;AACA,IAAA,IAAI,CAACpQ,SAAS,GAAG,IAAI,CAACuH,MAAM,CAACvH,SAAS;AACtCoE,IAAAA,YAAY,CAAC,IAAI,CAACpE,SAAS,CAAC;AAE5B,IAAA,IAAI,IAAI,CAACuH,MAAM,CAACtH,MAAM,EAAE;AACtB,MAAA,IAAI,CAACA,MAAM,GAAG,IAAI,CAACsH,MAAM,CAACtH,MAAM;AAClC,IAAA;;AAEA;AACAtB,IAAAA,OAAO,CAAC,IAAI,CAAC4I,MAAM,CAAC3I,MAAM,EAAE,IAAI,CAAC2I,MAAM,CAAC1I,WAAW,CAAC;;AAEpD;AACA,IAAA,IAAI,CAAC2jB,MAAM,GAAG,IAAI1b,UAAU,CAAC,IAAI,CAAC;AAClC,IAAA,IAAI,CAAC2b,QAAQ,GAAG,IAAI9E,YAAY,CAAC,IAAI,CAAC;;AAEtC;IACA,IAAI,CAACoF,WAAW,CAAC,IAAI,CAACxb,MAAM,CAAC6I,KAAK,CAAC;IAEnC,IAAI,CAACwS,WAAW,GAAG,IAAI;AACvB,IAAA,IAAI,CAACtC,IAAI,CAAC,iBAAiB,EAAE;MAAE/Y,MAAM,EAAE,IAAI,CAACA;AAAO,KAAC,CAAC;;AAErD;AACA,IAAA,IAAI,IAAI,CAACA,MAAM,CAACub,SAAS,EAAE;MACzB,IAAI,CAACE,eAAe,EAAE;AACxB,IAAA;AAEA,IAAA,OAAO,IAAI;AACb,EAAA;;AAEA;AACF;AACA;AACA;AACA;AACEC,EAAAA,QAAQA,CAAChjB,MAAM,EAAEijB,MAAM,GAAG,EAAE,EAAE;AAC5B,IAAA,IAAI,CAAC,IAAI,CAACN,WAAW,EAAE;AACrB,MAAA,MAAM,IAAIljB,KAAK,CAAC,2DAA2D,CAAC;AAC9E,IAAA;IAEA,IAAI,CAACO,MAAM,GAAGA,MAAM;IACpB,IAAI,CAACmI,UAAU,GAAG;MAAE,GAAG,IAAI,CAACA,UAAU;MAAE,GAAG8a;KAAQ;AAEnD,IAAA,IAAI,CAAC5C,IAAI,CAAC,iBAAiB,EAAE;MAAErgB,MAAM;MAAEijB,MAAM,EAAE,IAAI,CAAC9a;AAAW,KAAC,CAAC;;AAEjE;AACA,IAAA,IAAI,IAAI,CAACb,MAAM,CAACub,SAAS,EAAE;MACzB,IAAI,CAACE,eAAe,EAAE;AACxB,IAAA;AAEA,IAAA,OAAO,IAAI;AACb,EAAA;;AAEA;AACF;AACA;AACA;EACE,MAAMG,SAASA,CAAC3hB,MAAM,EAAE;AACtB,IAAA,IAAI,CAAC,IAAI,CAACohB,WAAW,EAAE;AACrB,MAAA,MAAM,IAAIljB,KAAK,CAAC,2DAA2D,CAAC;AAC9E,IAAA;IAEA,IAAI,IAAI,CAACgjB,WAAW,EAAE;AACpB5iB,MAAAA,OAAO,CAACqE,IAAI,CAAC,4DAA4D,CAAC;AAC1E,MAAA;AACF,IAAA;IAEA,IAAI;MACF,MAAM1C,IAAI,GAAG,MAAM,IAAI,CAAC+gB,MAAM,CAAC9a,QAAQ,CAAClG,MAAM,CAAC;MAC/C,IAAI,CAACC,IAAI,EAAE;AACT3B,QAAAA,OAAO,CAACD,KAAK,CAAC,CAAA,uBAAA,EAA0B2B,MAAM,YAAY,CAAC;AAC3D,QAAA;AACF,MAAA;MAEA,IAAI,CAACkhB,WAAW,GAAGjhB,IAAI;MACvB,IAAI,CAACkhB,gBAAgB,GAAG,CAAC;;AAEzB;AACA,MAAA,MAAMzd,QAAQ,GAAGb,WAAW,CAAC7C,MAAM,CAAC;AACpC,MAAA,IAAI0D,QAAQ,IAAIA,QAAQ,CAACU,WAAW,GAAG,CAAC,EAAE;AACxC,QAAA,IAAI,CAAC+c,gBAAgB,GAAGzd,QAAQ,CAACU,WAAW;AAC9C,MAAA;AAEA,MAAA,IAAI,CAAC0a,IAAI,CAAC,cAAc,EAAE;QAAE7e,IAAI,EAAE,IAAI,CAACihB,WAAW;QAAE9S,SAAS,EAAE,IAAI,CAAC+S;AAAiB,OAAC,CAAC;AACvF,MAAA,IAAI,CAACH,MAAM,CAAC9gB,UAAU,CAAC,cAAc,EAAE;AAAEF,QAAAA;AAAO,OAAC,CAAC;MAElD,IAAI,CAAC4hB,gBAAgB,EAAE;IACzB,CAAC,CAAC,OAAOvjB,KAAK,EAAE;AACdC,MAAAA,OAAO,CAACD,KAAK,CAAC,yCAAyC,EAAEA,KAAK,CAAC;AAC/D,MAAA,IAAI,CAACygB,IAAI,CAAC,YAAY,EAAE;QAAE9e,MAAM;AAAE3B,QAAAA;AAAM,OAAC,CAAC;AAC5C,IAAA;AACF,EAAA;;AAEA;AACF;AACA;AACA;AACEwjB,EAAAA,OAAOA,CAACC,SAAS,GAAG,IAAI,EAAE;AACxB,IAAA,IAAI,CAAC,IAAI,CAACZ,WAAW,EAAE;AACrB,MAAA;AACF,IAAA;AAEA,IAAA,MAAMjhB,IAAI,GAAG,IAAI,CAACihB,WAAW;AAC7B,IAAA,MAAM/Y,SAAS,GAAG2Z,SAAS,GAAG,gBAAgB,GAAG,gBAAgB;AAEjE,IAAA,IAAI,CAACb,QAAQ,CAACxR,OAAO,EAAE;IAEvB,IAAI,CAACuR,MAAM,CAAC9gB,UAAU,CAAC4hB,SAAS,GAAG,gBAAgB,GAAG,gBAAgB,EAAE;MACtE9hB,MAAM,EAAEC,IAAI,CAACgG,EAAE;AACf8b,MAAAA,cAAc,EAAE,IAAI,CAACZ,gBAAgB,GAAG,CAAC;AACzC9S,MAAAA,UAAU,EAAEpO,IAAI,CAACwX,KAAK,CAACzV;AACzB,KAAC,CAAC;AAEF,IAAA,IAAI8f,SAAS,EAAE;AACb,MAAA,IAAI,CAACd,MAAM,CAAC3Y,YAAY,CAACpI,IAAI,CAACgG,EAAE,EAAEhG,IAAI,CAACwX,KAAK,CAACzV,MAAM,GAAG,CAAC,EAAE,WAAW,CAAC;AACvE,IAAA;AAEA,IAAA,IAAI,CAAC8c,IAAI,CAAC3W,SAAS,EAAE;MAAElI,IAAI;AAAE8hB,MAAAA,cAAc,EAAE,IAAI,CAACZ,gBAAgB,GAAG;AAAE,KAAC,CAAC;IAEzE,IAAI,CAACD,WAAW,GAAG,IAAI;IACvB,IAAI,CAACC,gBAAgB,GAAG,CAAC;AAC3B,EAAA;;AAEA;AACF;AACA;AACEa,EAAAA,QAAQA,GAAG;AACT,IAAA,IAAI,CAAC,IAAI,CAACd,WAAW,EAAE;AACrB,MAAA;AACF,IAAA;AAEA,IAAA,MAAMjhB,IAAI,GAAG,IAAI,CAACihB,WAAW;IAE7B,IAAI,IAAI,CAACC,gBAAgB,IAAIlhB,IAAI,CAACwX,KAAK,CAACzV,MAAM,GAAG,CAAC,EAAE;AAClD;AACA,MAAA,IAAI,CAAC6f,OAAO,CAAC,IAAI,CAAC;AAClB,MAAA;AACF,IAAA;AAEA,IAAA,IAAI,CAAC/C,IAAI,CAAC,gBAAgB,EAAE;MAC1B7e,IAAI;MACJsX,IAAI,EAAEtX,IAAI,CAACwX,KAAK,CAAC,IAAI,CAAC0J,gBAAgB,CAAC;MACvC/S,SAAS,EAAE,IAAI,CAAC+S;AAClB,KAAC,CAAC;IAEF,IAAI,CAACA,gBAAgB,EAAE;AACvB,IAAA,IAAI,CAACH,MAAM,CAAC3Y,YAAY,CAACpI,IAAI,CAACgG,EAAE,EAAE,IAAI,CAACkb,gBAAgB,EAAE,aAAa,CAAC;IAEvE,IAAI,CAACS,gBAAgB,EAAE;AACzB,EAAA;;AAEA;AACF;AACA;AACEK,EAAAA,QAAQA,GAAG;IACT,IAAI,CAAC,IAAI,CAACf,WAAW,IAAI,IAAI,CAACC,gBAAgB,KAAK,CAAC,EAAE;AACpD,MAAA;AACF,IAAA;IAEA,IAAI,CAACA,gBAAgB,EAAE;IACvB,IAAI,CAACS,gBAAgB,EAAE;AACzB,EAAA;;AAEA;AACF;AACA;AACEM,EAAAA,QAAQA,GAAG;AACT,IAAA,IAAI,CAAC,IAAI,CAAChB,WAAW,EAAE;AACrB,MAAA;AACF,IAAA;AAEA,IAAA,IAAI,CAACF,MAAM,CAAC3Y,YAAY,CAAC,IAAI,CAAC6Y,WAAW,CAACjb,EAAE,EAAE,IAAI,CAACkb,gBAAgB,EAAE,SAAS,CAAC;AAC/E,IAAA,IAAI,CAACU,OAAO,CAAC,KAAK,CAAC;AACrB,EAAA;;AAEA;AACF;AACA;AACA;EACEM,QAAQA,CAAC/T,SAAS,EAAE;AAClB,IAAA,IAAI,CAAC,IAAI,CAAC8S,WAAW,EAAE;AACrB,MAAA;AACF,IAAA;AAEA,IAAA,IAAI9S,SAAS,GAAG,CAAC,IAAIA,SAAS,IAAI,IAAI,CAAC8S,WAAW,CAACzJ,KAAK,CAACzV,MAAM,EAAE;AAC/D1D,MAAAA,OAAO,CAACqE,IAAI,CAAC,sCAAsC,CAAC;AACpD,MAAA;AACF,IAAA;IAEA,IAAI,CAACwe,gBAAgB,GAAG/S,SAAS;IACjC,IAAI,CAACwT,gBAAgB,EAAE;AACzB,EAAA;;AAEA;AACF;AACA;AACEQ,EAAAA,QAAQA,GAAG;IACT,OAAO;MACLhB,WAAW,EAAE,IAAI,CAACA,WAAW;MAC7BF,WAAW,EAAE,IAAI,CAACA,WAAW;MAC7BC,gBAAgB,EAAE,IAAI,CAACA,gBAAgB;MACvC9S,UAAU,EAAE,IAAI,CAAC6S,WAAW,EAAEzJ,KAAK,CAACzV,MAAM,IAAI,CAAC;MAC/CvD,MAAM,EAAE,IAAI,CAACA,MAAM;MACnBD,SAAS,EAAE,IAAI,CAACA;KACjB;AACH,EAAA;;AAEA;AACF;AACA;AACA;EACE6jB,aAAaA,CAACriB,MAAM,EAAE;IACpBiD,aAAa,CAACjD,MAAM,CAAC;AACrB,IAAA,IAAI,CAAC8e,IAAI,CAAC,gBAAgB,EAAE;AAAE9e,MAAAA;AAAO,KAAC,CAAC;AACzC,EAAA;;AAEA;AACF;AACA;AACEyP,EAAAA,OAAOA,GAAG;IACR,IAAI,IAAI,CAACyR,WAAW,EAAE;AACpB,MAAA,IAAI,CAACW,OAAO,CAAC,KAAK,CAAC;AACrB,IAAA;IAEA,IAAI,IAAI,CAACZ,QAAQ,EAAE;AACjB,MAAA,IAAI,CAACA,QAAQ,CAACxR,OAAO,EAAE;AACzB,IAAA;IAEA,IAAI,CAACoP,kBAAkB,EAAE;IACzB,IAAI,CAACuC,WAAW,GAAG,KAAK;IACxB,IAAI,CAACrb,MAAM,GAAG,IAAI;IAClB,IAAI,CAACib,MAAM,GAAG,IAAI;IAClB,IAAI,CAACC,QAAQ,GAAG,IAAI;AAEpB,IAAA,IAAI,CAACnC,IAAI,CAAC,eAAe,CAAC;AAC5B,EAAA;;AAEA;;AAEA8C,EAAAA,gBAAgBA,GAAG;IACjB,MAAMrK,IAAI,GAAG,IAAI,CAAC2J,WAAW,CAACzJ,KAAK,CAAC,IAAI,CAAC0J,gBAAgB,CAAC;AAE1D,IAAA,IAAI,CAACF,QAAQ,CAACzE,UAAU,CAACjF,IAAI,EAAE;MAC7BtX,IAAI,EAAE,IAAI,CAACihB,WAAW;MACtB9S,SAAS,EAAE,IAAI,CAAC+S,gBAAgB;AAChC9S,MAAAA,UAAU,EAAE,IAAI,CAAC6S,WAAW,CAACzJ,KAAK,CAACzV,MAAM;AACzCwM,MAAAA,MAAM,EAAEA,MAAM,IAAI,CAACwT,QAAQ,EAAE;AAC7BvT,MAAAA,MAAM,EAAEA,MAAM,IAAI,CAACwT,QAAQ,EAAE;AAC7BvT,MAAAA,MAAM,EAAEA,MAAM,IAAI,CAACwT,QAAQ,EAAE;AAC7BvT,MAAAA,OAAO,EAAEA,MAAM,IAAI,CAACkT,OAAO,CAAC,KAAK;AACnC,KAAC,CAAC;AAEF,IAAA,IAAI,CAAC/C,IAAI,CAAC,aAAa,EAAE;MACvB7e,IAAI,EAAE,IAAI,CAACihB,WAAW;MACtB3J,IAAI;MACJnJ,SAAS,EAAE,IAAI,CAAC+S;AAClB,KAAC,CAAC;AAEF,IAAA,IAAI,CAACH,MAAM,CAAC9gB,UAAU,CAAC,aAAa,EAAE;AACpCF,MAAAA,MAAM,EAAE,IAAI,CAACkhB,WAAW,CAACjb,EAAE;MAC3Bqc,MAAM,EAAE/K,IAAI,CAACtR,EAAE;MACfmI,SAAS,EAAE,IAAI,CAAC+S;AAClB,KAAC,CAAC;AACJ,EAAA;EAEA,MAAMK,eAAeA,GAAG;IACtB,IAAI;MACF,MAAM1hB,KAAK,GAAG,MAAM,IAAI,CAACkhB,MAAM,CAAClb,eAAe,EAAE;AAEjD,MAAA,KAAK,MAAM7F,IAAI,IAAIH,KAAK,EAAE;AACxB,QAAA,MAAM0G,OAAO,GAAG;AACd/I,UAAAA,GAAG,EAAEqB,MAAM,CAACC,QAAQ,CAACC,IAAI;AACzBW,UAAAA,QAAQ,EAAEb,MAAM,CAACC,QAAQ,CAACY,QAAQ;UAClClB,MAAM,EAAE,IAAI,CAACA,MAAM;UACnBD,SAAS,EAAE,IAAI,CAACA,SAAS;UACzBoI,UAAU,EAAE,IAAI,CAACA;SAClB;QAED,IAAI,IAAI,CAACoa,MAAM,CAAC5Z,cAAc,CAACnH,IAAI,EAAEuG,OAAO,CAAC,EAAE;AAC7C,UAAA,MAAM,IAAI,CAACmb,SAAS,CAAC1hB,IAAI,CAACgG,EAAE,CAAC;AAC7B,UAAA,MAAM;AACR,QAAA;AACF,MAAA;IACF,CAAC,CAAC,OAAO5H,KAAK,EAAE;AACdC,MAAAA,OAAO,CAACD,KAAK,CAAC,+CAA+C,EAAEA,KAAK,CAAC;AACvE,IAAA;AACF,EAAA;EAEAkjB,WAAWA,CAAC3S,KAAK,EAAE;IACjB1P,QAAQ,CAACqZ,eAAe,CAAChI,YAAY,CAAC,uBAAuB,EAAE3B,KAAK,CAAC;AACvE,EAAA;AACF;;AAEA;AACA,MAAM2T,QAAQ,GAAG,IAAIxB,OAAO,EAAE;;AAE9B;AACA,IAAI,OAAOjiB,MAAM,KAAK,WAAW,EAAE;EACjCA,MAAM,CAAC0jB,eAAe,GAAGD,QAAQ;AACnC;;AChWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAOA;AACA,MAAM/c,GAAG,GAAGid,QAAe;;AAE3B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASpB,IAAIA,CAACtb,MAAM,EAAE;AACpB;AACA,EAAA,MAAM2c,gBAAgB,GAAG;AACvB,IAAA,GAAG3c,MAAM;AACT1I,IAAAA,WAAW,EAAE0I,MAAM,CAAC1I,WAAW,IAAI0I,MAAM,CAAC4c;GAC3C;AACD,EAAA,OAAOnd,GAAG,CAAC6b,IAAI,CAACqB,gBAAgB,CAAC;AACnC;;AAEA;AACA;AACA;AACA;AACA,SAASf,SAASA,CAAC3hB,MAAM,EAAE;AACzB,EAAA,OAAOwF,GAAG,CAACmc,SAAS,CAAC3hB,MAAM,CAAC;AAC9B;;AAEA;AACA;AACA;AACA;AACA,SAAS4iB,QAAQA,GAAG;AAClB,EAAA,OAAOpd,GAAG,CAACqc,OAAO,CAAC,KAAK,CAAC;AAC3B;;AAEA;AACA;AACA;AACA,SAASG,QAAQA,GAAG;AAClB,EAAA,OAAOxc,GAAG,CAACwc,QAAQ,EAAE;AACvB;;AAEA;AACA;AACA;AACA,SAASC,QAAQA,GAAG;AAClB,EAAA,OAAOzc,GAAG,CAACyc,QAAQ,EAAE;AACvB;;AAEA;AACA;AACA;AACA;AACA,SAASE,QAAQA,CAACU,KAAK,EAAE;AACvB,EAAA,OAAOrd,GAAG,CAAC2c,QAAQ,CAACU,KAAK,CAAC;AAC5B;;AAEA;AACA;AACA;AACA;AACA,SAASC,UAAUA,CAACrE,QAAQ,EAAE;AAC5BjZ,EAAAA,GAAG,CAACgZ,EAAE,CAAC,gBAAgB,EAAEC,QAAQ,CAAC;AAClC,EAAA,OAAOjZ,GAAG;AACZ;;AAEA;AACA;AACA;AACA;AACA,SAASkJ,MAAMA,CAAC+P,QAAQ,EAAE;AACxBjZ,EAAAA,GAAG,CAACgZ,EAAE,CAAC,gBAAgB,EAAEC,QAAQ,CAAC;AAClC,EAAA,OAAOjZ,GAAG;AACZ;;AAEA;AACA;AACA;AACA;AACA,SAASud,YAAYA,CAACtE,QAAQ,EAAE;AAC9BjZ,EAAAA,GAAG,CAACgZ,EAAE,CAAC,aAAa,EAAEC,QAAQ,CAAC;AAC/B,EAAA,OAAOjZ,GAAG;AACZ;;AAEA;AACA;AACA;AACA;AACA,SAASwd,cAAcA,CAACvE,QAAQ,EAAE;AAChCjZ,EAAAA,GAAG,CAACgZ,EAAE,CAAC,gBAAgB,EAAEC,QAAQ,CAAC;AAClC,EAAA,OAAOjZ,GAAG;AACZ;;AAEA;AACA;AACA;AACA;AACA,SAASyd,OAAOA,CAACxE,QAAQ,EAAE;AACzBjZ,EAAAA,GAAG,CAACgZ,EAAE,CAAC,cAAc,EAAEC,QAAQ,CAAC;AAChC,EAAA,OAAOjZ,GAAG;AACZ;;AAEA;AACA;AACA;AACA;AACA;AACA,SAASic,QAAQA,CAAChjB,MAAM,EAAEijB,MAAM,EAAE;AAChC,EAAA,OAAOlc,GAAG,CAACic,QAAQ,CAAChjB,MAAM,EAAEijB,MAAM,CAAC;AACrC;;AAEA;AACA;AACA;AACA,SAASU,QAAQA,GAAG;AAClB,EAAA,OAAO5c,GAAG,CAAC4c,QAAQ,EAAE;AACvB;;AAEA;AACA;AACA;AACA;AACA,SAASC,aAAaA,CAACriB,MAAM,EAAE;AAC7B,EAAA,OAAOwF,GAAG,CAAC6c,aAAa,CAACriB,MAAM,CAAC;AAClC;;AAEA;AACA;AACA;AACA,SAASyP,OAAOA,GAAG;AACjB,EAAA,OAAOjK,GAAG,CAACiK,OAAO,EAAE;AACtB;;AAEA;AACA;AACA;AACA;AACA,SAASoS,OAAOA,CAACC,SAAS,GAAG,IAAI,EAAE;AACjC,EAAA,OAAOtc,GAAG,CAACqc,OAAO,CAACC,SAAS,CAAC;AAC/B;;AAEA;AACA;AACA;AACA,SAASI,QAAQA,GAAG;AAClB,EAAA,OAAO1c,GAAG,CAAC0c,QAAQ,EAAE;AACvB;;AAkDA;AACA,YAAe;AACb;EACA1c,GAAG;AAEH;EACA6b,IAAI;EACJM,SAAS;EACTiB,QAAQ;EACRZ,QAAQ;EACRC,QAAQ;EACRE,QAAQ;EACRW,UAAU;EACVpU,MAAM;EACNqU,YAAY;EACZC,cAAc;EACdC,OAAO;EACPxB,QAAQ;EACRW,QAAQ;EACRC,aAAa;EACb5S,OAAO;EACPoS,OAAO;EACPK,QAAQ;AAER;EACAnB,OAAO;EACPzb,UAAU;EACV6W,YAAY;EACZkC,YAAY;AACZkB,EAAAA;AACF,CAAC;;;;"}